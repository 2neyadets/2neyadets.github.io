(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{0:function(t,e){},"05da":function(t,e,a){"use strict";var n=a("7062"),s=a.n(n);s.a},"0a8b":function(t,e,a){},"0ac9":function(t,e,a){"use strict";var n=a("714f4"),s=a.n(n);s.a},"0df1":function(t,e,a){"use strict";var n=a("5554"),s=a.n(n);s.a},"0f71":function(t,e,a){},"0f8d":function(t,e,a){},"156e":function(t,e,a){},"15d3":function(t,e,a){},"1a5b":function(t,e,a){"use strict";var n=a("82d7"),s=a.n(n);s.a},"1cfc":function(t,e,a){"use strict";var n=a("d054"),s=a.n(n);s.a},"1f8d":function(t,e,a){},2:function(t,e){},"226b":function(t,e,a){"use strict";var n=a("7880"),s=a.n(n);s.a},"22a6":function(t,e,a){},2922:function(t,e,a){"use strict";var n=a("0a8b"),s=a.n(n);s.a},"2d11":function(t,e,a){"use strict";var n=a("db17"),s=a.n(n);s.a},3:function(t,e){},"30e5":function(t,e,a){},"32d5":function(t,e,a){"use strict";var n=a("e422"),s=a.n(n);s.a},"33ce":function(t,e,a){},"37ad":function(t,e,a){"use strict";var n=a("e2ce"),s=a.n(n);s.a},"38bb":function(t,e,a){"use strict";var n=a("8734"),s=a.n(n);s.a},"3d9c":function(t,e,a){"use strict";var n=a("6fff"),s=a.n(n);s.a},"464d":function(t,e,a){"use strict";var n=a("e76c"),s=a.n(n);s.a},"47c2":function(t,e,a){"use strict";var n=a("b60f"),s=a.n(n);s.a},"483f":function(t,e,a){},4850:function(t,e,a){},"4cb1":function(t,e,a){"use strict";var n=a("483f"),s=a.n(n);s.a},"4f27":function(t,e,a){"use strict";var n=a("dc1d"),s=a.n(n);s.a},"4f79":function(t,e,a){"use strict";var n=a("f228"),s=a.n(n);s.a},"50d88":function(t,e,a){"use strict";var n=a("aa51"),s=a.n(n);s.a},"511a":function(t,e,a){"use strict";var n=a("d3d1"),s=a.n(n);s.a},"53dd":function(t,e,a){"use strict";var n=a("f7a9"),s=a.n(n);s.a},5554:function(t,e,a){},"5af3":function(t,e,a){"use strict";var n=a("8164"),s=a.n(n);s.a},"5b5a":function(t,e,a){},"5b62":function(t,e,a){},"5bfc":function(t,e,a){"use strict";var n=a("5b5a"),s=a.n(n);s.a},"5d6c":function(t,e,a){},6005:function(t,e,a){"use strict";var n=a("be1f"),s=a.n(n);s.a},6088:function(t,e,a){"use strict";var n=a("c246"),s=a.n(n);s.a},6236:function(t,e,a){},6264:function(t,e,a){"use strict";var n=a("c0f2"),s=a.n(n);s.a},6544:function(t,e,a){},"65f6":function(t,e,a){"use strict";var n=a("7fcf"),s=a.n(n);s.a},"69b6":function(t,e,a){},"69c1":function(t,e,a){"use strict";var n=a("9312"),s=a.n(n);s.a},"6e76":function(t,e,a){"use strict";var n=a("5b62"),s=a.n(n);s.a},"6fff":function(t,e,a){},7062:function(t,e,a){},"714f4":function(t,e,a){},7226:function(t,e,a){"use strict";var n=a("f640"),s=a.n(n);s.a},7760:function(t,e,a){"use strict";var n=a("5d6c"),s=a.n(n);s.a},7880:function(t,e,a){},"7c25":function(t,e,a){"use strict";var n=a("0f71"),s=a.n(n);s.a},"7f3a":function(t,e,a){},"7fcf":function(t,e,a){},8164:function(t,e,a){},"823c":function(t,e,a){"use strict";var n=a("c5ee"),s=a.n(n);s.a},"827d":function(t,e,a){},"82d7":function(t,e,a){},8335:function(t,e,a){"use strict";var n=a("923a"),s=a.n(n);s.a},"84a8":function(t,e,a){"use strict";var n=a("cfb4"),s=a.n(n);s.a},"86d8":function(t,e,a){"use strict";var n=a("fa88"),s=a.n(n);s.a},8734:function(t,e,a){},"8b24":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("FullHeightIntersection",[a("Start")],1),a("FullHeightIntersection",[a("Heroes")],1),a("FullHeightIntersection",[a("Webbankir")],1),a("FullHeightIntersection",[a("Rozetki")],1),t.$app.layout.scroll.position.current>=t.$app.layout.getCurrentHeight()?a("q-page-sticky",{attrs:{position:"top",offset:[0,t.$q.platform.is.mobile?0:2]}},[a("q-btn",{staticClass:"full-width",class:t.bounce.top?"bounce-down":"",attrs:{color:t.$app.layout.activeColor,disable:!t.$app.layout.scroll.ready,size:"sm",flat:"",round:""},on:{click:function(e){return t.goToSection(!1)}}},[a("q-icon",{staticStyle:{"font-size":"28px"},attrs:{name:"keyboard_arrow_up"}})],1)],1):t._e(),t.$app.layout.scroll.position.current<=t.$app.layout.scroll.position.max-t.$app.layout.getCurrentHeight()?a("q-page-sticky",{attrs:{position:"bottom",offset:[0,t.$q.platform.is.mobile?0:2]}},[a("q-btn",{staticClass:"full-width",class:t.bounce.bottom?"bounce-up":"",attrs:{color:t.$app.layout.activeColor,disable:!t.$app.layout.scroll.ready,size:"sm",flat:"",round:""},on:{click:function(e){return t.goToSection(!0)}}},[a("q-icon",{staticStyle:{"font-size":"28px"},attrs:{name:"keyboard_arrow_down"}})],1)],1):t._e()],1)},s=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"startBlock",staticClass:"start__block q-pa-xs-xs q-pa-sm-sm q-pa-md-md flex flex-center",style:"height: "+(t.$q.screen.height-50)+"px;"},[a("q-card",{staticClass:"shadow-12",class:t.$q.screen.gt.lg&&t.$q.screen.height>800?"mx-for-project-card":"",staticStyle:{"text-align":"justify"}},[a("q-card-section",{staticClass:"q-pa-xs-xs q-pa-md-sm q-py-lg-md q-px-lg-lg"},[a("p",{domProps:{innerHTML:t._s(t.$t("start.text.hello"))}})]),a("q-card-section",{staticClass:"q-px-xs-sm q-px-md-sm q-px-lg-lg q-pb-xs-sm q-pb-md-sm q-pb-lg-md q-pt-none md-opacity"},[a("p",{domProps:{innerHTML:t._s(t.$t("start.text.myNameIs"))}}),a("p",{domProps:{innerHTML:t._s(t.$t("start.text.loveAndHate"))}}),a("p",{domProps:{innerHTML:t._s(t.$t("start.text.enjoying"))}})]),a("q-separator",{attrs:{inset:""}}),a("q-card-section",{staticClass:"q-px-xs-sm q-px-md-sm q-px-lg-lg q-py-xs-sm q-py-md-sm q-py-lg-md md-opacity"},[a("p",{domProps:{innerHTML:t._s(t.$t("start.text.dareToSuggest"))}}),a("p",{domProps:{innerHTML:t._s(t.$t("start.text.portfolio"))}})]),a("q-card-actions",{staticClass:"q-pa-none",attrs:{align:"center"}},[a("q-btn",{staticClass:"full-width full-height",attrs:{label:t.$t("start.letsGo"),color:t.$app.layout.activeColor,textColor:t.$app.layout.activeTextColor,size:t.$app.layout.btnsSizeForProjectCard,icon:"arrow_downward","icon-right":"arrow_downward"},on:{click:function(e){return t.$app.layout.goToSection(!0)}}})],1)],1)],1)},r=[],o={name:"Start"},l=o,c=a("2877"),u=a("eebe"),d=a.n(u),m=a("f09f"),p=a("a370"),f=a("eb85"),h=a("4b7e"),b=a("9c40"),g=Object(c["a"])(l,i,r,!1,null,"d7a4f176",null),v=g.exports;d()(g,"components",{QCard:m["a"],QCardSection:p["a"],QSeparator:f["a"],QCardActions:h["a"],QBtn:b["a"]});var _=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"heroes__block"},[a("ProjectCard",{attrs:{projectObj:t.obj},scopedSlots:t._u([{key:"actions",fn:function(){return[a("q-btn",{attrs:{label:t.$t("heroes.text.btns.heroes"),color:t.$app.layout.activeColor,textColor:t.$app.layout.activeTextColor,size:t.$app.layout.btnsSizeForProjectCard,"icon-right":"group"},on:{click:function(e){t.heroesDialog=!0}}})]},proxy:!0}])}),t.$q.platform.is.mobile?[a("DesktopOnlyDialog",{attrs:{show:t.heroesDialog},on:{hide:function(e){t.heroesDialog=!1}}})]:[a("ProjectDialog",{attrs:{show:t.heroesDialog,name:"heroes"},on:{hide:function(e){t.heroesDialog=!1}}},[a("div",{class:{"app-win":"win"===t.$app.layout.getOS,"app-macos":"mac"===t.$app.layout.getOS,desktop:t.$q.platform.is.desktop}},[a("HeroesProject")],1)])]],2)},y=[],x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project__card q-pa-xs-xs q-pa-sm-sm q-pa-md-md flex flex-center",style:"height: "+(t.$q.screen.height-50)+"px;"},[a("q-card",{staticClass:"shadow-12",class:t.$q.screen.gt.lg&&t.$q.screen.height>800?"mx-for-project-card":"",staticStyle:{"text-align":"justify"}},[a("q-card-section",{staticClass:"q-pb-none q-px-xs-xs q-px-md-sm q-px-lg-md q-pt-xs-xs q-pt-md-sm q-pt-lg-sm",attrs:{align:"center"}},[a("strong",{class:"text-"+t.$app.layout.activeColor},[t._v(t._s(t.projectObj.title))])]),a("q-card-section",{staticClass:"q-px-xs-xs q-px-md-sm q-px-lg-md q-py-xs-xs q-py-md-sm q-py-lg-sm"},[a("q-card",{staticClass:"shadow-6",attrs:{bordered:""}},[a("q-card-section",{attrs:{horizontal:""}},[a("q-card-section",{staticClass:"col-xl-4 q-pa-none",class:"Webbankir"===t.projectObj.title?"col-xs-4 col-sm-5":"col-xs-3 col-sm-4"},[a("q-card-section",{staticClass:"q-pa-xs-xs q-pa-md-sm q-px-lg-md q-py-lg-sm text-center"},[a("strong",[t._v(t._s(t.$t("project.team")))])]),a("q-separator"),a("q-card-section",{staticClass:"q-pa-xs-xs q-pa-md-sm q-px-lg-md q-py-lg-sm md-opacity"},[t._l(t.projectObj.employees,(function(e){return[a("div",{staticClass:"flex justify-between"},[a("div",{staticClass:"q-pa-none"},[t._v(t._s(e.type)+":")]),a("div",{staticClass:"q-pl-xs-xs q-pl-md-sm q-pl-lg-md"},[t._v(t._s(e.number))])])]}))],2),a("q-separator"),a("q-card-section",{staticClass:"q-pa-xs-xs q-pa-md-sm q-px-lg-md q-py-lg-sm text-center"},[a("strong",[t._v(t._s(t.$t("project.tech")))])]),a("q-separator"),a("q-card-section",{staticClass:"q-pa-xs-xs q-pa-md-sm q-px-lg-md q-py-lg-sm md-opacity"},[t._v(t._s(t.projectObj.technologies))])],1),a("q-separator",{attrs:{vertical:""}}),a("q-card-section",{staticClass:"col-xl-8 q-pa-none",class:"Webbankir"===t.projectObj.title?"col-xs-8 col-sm-7":"col-xs-9 col-sm-8"},[a("q-card-section",{staticClass:"q-pa-xs-xs q-pa-md-sm q-px-lg-md q-py-lg-sm text-center"},[a("strong",[t._v(t._s(t.$t("project.description")))])]),a("q-separator"),a("q-card-section",{staticClass:"q-pa-xs-xs q-pa-md-sm q-px-lg-md q-py-lg-sm md-opacity",domProps:{innerHTML:t._s(t.projectObj.description)}})],1)],1),a("q-separator"),a("q-card-section",{staticClass:"q-pa-xs-xs q-pa-md-sm q-px-lg-md q-py-lg-sm"},[a("div",{staticClass:"flex justify-between"},[a("strong",{staticClass:"q-pa-none"},[t._v(t._s(t.$t("project.workTime")))]),a("div",{staticClass:"md-opacity q-pl-lg"},[t._v(t._s(t.projectObj.time))])])])],1)],1),a("q-card-actions",{staticClass:"q-pt-none q-px-xs-xs q-px-md-sm q-px-lg-md q-pb-xs-xs q-pb-md-sm q-pb-lg-sm",attrs:{align:"center"}},[t._t("actions")],2)],1)],1)},C=[],$={name:"ProjectCard",props:{projectObj:{type:Object,required:!0}},mounted:function(){}},B=$,q=Object(c["a"])(B,x,C,!1,null,null,null),w=q.exports;d()(q,"components",{QCard:m["a"],QCardSection:p["a"],QSeparator:f["a"],QCardActions:h["a"]});var W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"heroes__project"},["/"===t.$heroes.route.path?a("HeroesProjectIndexPage"):t._e(),"/title"===t.$heroes.route.path?a("HeroesProjectTitlePage"):t._e(),"/"!==t.$heroes.route.path&&"/title"!==t.$heroes.route.path?a("div",{staticClass:"bg",class:t.classname},["/section"===t.$heroes.route.path?a("HeroesProjectPapersPage"):t._e(),"/section/culture"===t.$heroes.route.path?a("HeroesProjectSectionPage"):t._e(),t.$heroes.route.params.category&&null===t.$heroes.route.params.item?a("HeroesProjectCategoryPage"):t._e(),t.$heroes.route.params.category&&null!==t.$heroes.route.params.item?a("HeroesProjectItemPage"):t._e()],1):t._e()],1)},k=[],D=(a("28a5"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title flex flex-center",on:{click:t.click}},[a("div",{staticClass:"column"},[a("q-img",{staticClass:"title__logo",attrs:{src:"statics/heroes/title/cover_logo.png"}}),t._m(0),t._m(1)],1)])}),O=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title__link text-center"},[a("div",{staticClass:"title__dates"},[a("div",{staticClass:"text-white"},[t._v("1917–1921гг.")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title__info text-center"},[a("div",{staticClass:"title__info"},[a("div",{staticClass:"text-white"},[t._v("Нажмите, чтобы продолжить")])])])}],j=a("1c16"),S={name:"HeroesProjectTitlePage",created:function(){this.click=Object(j["a"])(this.handler,500)},methods:{handler:function(){this.$heroes.route.path="/section"}}},P=S,M=(a("65f6"),a("068f")),A=Object(c["a"])(P,D,O,!1,null,"985d63da",null),T=A.exports;d()(A,"components",{QImg:M["a"]});var Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"video",on:{click:t.onVideoEnded}},[a("video",{attrs:{src:"statics/heroes/videos/start.mp4",autoplay:""},on:{ended:t.onVideoEnded}})])},F=[],I={name:"HeroesProjectIndexPage",created:function(){this.$heroes.route.path="/"},methods:{onVideoEnded:function(){this.$heroes.route.path="/title"}}},R=I,E=Object(c["a"])(R,Q,F,!1,null,"2d14c57e",null),L=E.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"heroes-page relative-position"},[a("div",{staticClass:"papers"},[t._l(t.papers,(function(e){return[a("div",{directives:[{name:"ripple",rawName:"v-ripple",value:"culture"===e.type,expression:"paper.type === 'culture'"}],key:e.index,ref:"ref__"+e.type,refInFor:!0,staticClass:"paper absolute",class:"section__"+e.type+" "+("culture"===e.type?"cursor-pointer":"")+" "+("culture"!==e.type?"cursor-not-allowed":""),style:t.styles(e),on:{mouseover:function(a){return t.mouseOver(e)},mouseout:function(a){return t.mouseOut(e)},click:function(a){return t.click(e.type)}}})]}))],2)])},H=[],N=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("9523")),z=a.n(N),V=a("f303"),G=a("18d6"),U=a("2fa3");function Z(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function K(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(a),!0).forEach((function(e){z()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var J=V["c"].css,X={name:"HeroesProjectPapersPage",data:function(){return{sizes:{base:{w:1015,h:968}},curr:"war",paper:{war:{matrix:[.99,.13,-.13,.99],hover:[2,-10],top:40,right:!0},economic:{matrix:[.99,-.13,.13,.99],hover:[-1,-10],top:40,left:!0},politics:{matrix:[.99,-.13,.13,.99],hover:[-1,-10],top:350,left:!0},culture:{matrix:[.97,.24,-.24,.97],hover:[2,-10],top:350,right:!0}}}},created:function(){var t=this;!this.$heroes.cancelHeroesPapersNotify&&this.$q.platform.is.desktop&&Object(U["m"])({message:this.$t("heroes.notify.onlyCultureSection"),color:this.$app.layout.activeColor,textColor:this.$app.layout.activeTextColor,icon:"info",timeout:5e3},{label:this.$t("notify.dontShowAgain"),color:this.$app.layout.activeTextColor,handler:function(){G["a"].set("cancelHeroesPapersNotify",!0),t.$heroes.cancelHeroesPapersNotify=!0}})},computed:{papers:function(){var t=K({},this.paper);return Object.keys(t).map((function(e,a){return K({index:a+1,type:e},t[e])}))},current:{get:function(){return this.curr},set:function(t){this.curr=t}}},methods:{click:function(t){"culture"===t&&(this.$heroes.route.path="/section/".concat(t))},mouseOver:function(t){var e=this.$refs["ref__"+t.type];J(e[0],{transform:"matrix(".concat(t.matrix.join(","),", ").concat(t.hover.join(","),")")})},mouseOut:function(t){var e=this.$refs["ref__"+t.type];J(e[0],{transform:"matrix(".concat(t.matrix.join(","),", 0, 0)")})},styles:function(t){var e=512,a=1.97,n=this.sizes.base,s=n.w,i=n.h,r=s/a,o=i/a,l=t.right,c="\n        background-image: url(statics/heroes/paper/".concat(t.type,".png);\n        width: ").concat(r,"px; height: ").concat(o,"px;\n        left: ").concat(e+(l?1:-1)*r/2.25-o/1.9+(4===t.index?-55:0),"px;\n        top: ").concat(50/a+t.top+(t.index>2&&this.$q.screen.xl?70:0),"px;\n        z-index: ").concat(t.index,";\n        transform: matrix(").concat(t.matrix.join(","),", 0, 0)\n        ");return c}}},tt=X,et=(a("be34"),a("714f")),at=Object(c["a"])(tt,Y,H,!1,null,"688be115",null),nt=at.exports;d()(at,"directives",{Ripple:et["a"]});var st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"heroes-page column"},[a("div",{staticClass:"col relative-position"},[a("div",{staticClass:"heroes absolute-top-left full-width full-height row"},t._l(t.heroes,(function(t,e){return a("Person",{key:e,attrs:{hero:t,index:e}})})),1)]),a("div",{staticClass:"col-auto"},[a("Nav")],1),a("div",{staticClass:"col-auto"},[a("NavSmall")],1)])},it=[],rt=a("fe45"),ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hero col row relative-position full-height"},[a("q-dialog",{attrs:{"content-class":"heroes__dialog",persistent:"","full-height":"","full-width":""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("HeroMediaItem",{attrs:{item:t.media},on:{onClose:t.update}})],1),a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"hero__left col relative-position full-height cursor-pointer",on:{click:function(e){return t.openVideo("about","0"+(t.index+1),t.index)}}},[a("q-img",{staticClass:"full-height",attrs:{src:"statics/heroes/face/"+t.$heroes.route.params.section+"/"+t.hero.photo}}),a("div",{staticClass:"absolute-bottom-left"},[a("div",{staticClass:"play relative-position"},[a("div",{staticClass:"play__img absolute-left flex justify-center items-center"},[a("q-img",{attrs:{src:"statics/heroes/face/triangleNormal.png"}})],1)])])],1),a("div",{staticClass:"hero__separator"},[a("q-separator",{staticClass:"full-height",attrs:{vertical:"",color:"white"}})],1),a("div",{staticClass:"hero__right col q-pa-md full-height"},[a("div",{staticClass:"hero__right_names bg-white q-px-md q-py-sm rounded"},[a("div",{staticClass:"hero__right_firstname"},[t._v(t._s(t.hero.firstname))]),a("div",{staticClass:"hero__right_lastname"},[t._v(t._s(t.hero.lastname))])]),a("div",{staticClass:"hero__right_life bg-white q-px-md q-py-sm rounded"},[a("span",[t._v(t._s(t.hero.life))])]),a("div",{staticClass:"hero__right_select"},[a("q-btn",{staticClass:"full-width",attrs:{label:"Вопросы",outline:"",color:"white",align:"between","icon-right":t.open?"keyboard_arrow_down":"keyboard_arrow_left"},on:{click:function(e){t.open=!t.open}}})],1),a("transition",{attrs:{name:"fade"}},[t.open?a("div",{staticClass:"hero__right_numbers"},[a("div",{staticClass:"row justify-start gutter"},[t._l(t.arrayOfQuestions,(function(e,n){return[a("Button",{attrs:{label:n,questionValue:e,hero:"0"+(t.index+1)},on:{onClick:function(e){return t.openVideo("question","0"+(t.index+1),n)}}})]}))],2)]):t._e()])],1)],1)},lt=[],ct=(a("c5f6"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-btn",{staticClass:"num-btn",attrs:{outline:t.questionValue,label:t.label+1,color:"white",unelevated:t.questionValue,"text-color":t.questionValue?"white":"black"},on:{click:t.changeQuestionValue}})}),ut=[],dt={name:"Button",props:{label:{type:Number,required:!0},questionValue:{type:Boolean,required:!0},hero:{type:String,required:!0}},methods:{changeQuestionValue:function(){this.questionValue||(this.$heroes[this.$heroes.route.params.section][this.hero][this.label]=!0),this.$emit("onClick")}}},mt=dt,pt=(a("8bd5"),Object(c["a"])(mt,ct,ut,!1,null,"625f675e",null)),ft=pt.exports;d()(pt,"components",{QBtn:b["a"]});var ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chronic__item full-width full-height q-pl-xs q-pb-xs"},[a("div",{staticClass:"column full-width full-height"},[a("div",{ref:"testItemMediaContainer",staticClass:"col flex justify-center items-center chronic__item_media-container q-mb-md"},[a("video",{staticClass:"full-width",style:{maxHeight:t.height+"px"},attrs:{src:t.path,autoplay:"",controls:"",controlsList:"nodownload"}})]),a("div",{staticClass:"col-auto row"},[a("div",{staticClass:"col-auto flex justify-start items-end"},[a("q-btn",{staticClass:"close-btn",attrs:{icon:"close",color:"white",outline:"",unelevated:""},on:{click:t.close}})],1)])])])},bt=[],gt={name:"HeroMediaItem",props:{item:{type:Object,required:!0}},data:function(){return{height:0}},computed:{path:function(){var t=this.item,e=t.type,a=t.heroIndex,n=t.questionsIndex,s="statics/heroes/videos/persons/".concat(this.$heroes.route.params.section,"/").concat(a,"/");return"about"===e?s+"about.mp4":s+"question-".concat(n+1,".mp4")}},mounted:function(){this.height=this.$refs.testItemMediaContainer.clientHeight},methods:{close:function(){this.$emit("onClose")}},watch:{"$q.screen.height":function(t){this.height=this.$refs.testItemMediaContainer.clientHeight}}},vt=gt,_t=Object(c["a"])(vt,ht,bt,!1,null,"2fdc71e8",null),yt=_t.exports;d()(_t,"components",{QBtn:b["a"]});var xt={name:"Person",components:{HeroMediaItem:yt,Button:ft},props:{hero:{type:Object,required:!0},index:{type:Number}},data:function(){return{open:!1,dialog:!1,media:null,arrayOfQuestions:[],options:[]}},mounted:function(){this.update()},methods:{openVideo:function(t,e,a){this.media={type:t,heroIndex:e,questionsIndex:a},this.dialog=!0},update:function(){var t=this;this.dialog=!1,this.arrayOfQuestions=[],this.$nextTick((function(){t.arrayOfQuestions=t.$heroes.culture["0".concat(t.index+1)]}))},address:function(){return"$app.questions.".concat(this.$heroes.route.params.section)}},watch:{"$heroes.route.params.section":function(t){this.open=!1,this.update()}}},Ct=xt,$t=(a("6088"),a("24e8")),Bt=Object(c["a"])(Ct,ot,lt,!1,null,null,null),qt=Bt.exports;d()(Bt,"components",{QDialog:$t["a"],QImg:M["a"],QSeparator:f["a"],QBtn:b["a"]}),d()(Bt,"directives",{Ripple:et["a"]});var wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-big"},[a("NavSmallArrows",{attrs:{arrows:t.arrows},on:{click:t.click}}),a("div",{ref:"content",staticClass:"nav-big__content"},[a("div",{directives:[{name:"touch-swipe",rawName:"v-touch-swipe.mouse.right.left",value:t.handleSwipe,expression:"handleSwipe",modifiers:{mouse:!0,right:!0,left:!0}}],ref:"wrapper",staticClass:"nav-big__content-wrapper"},t._l(t.tabs,(function(e){return a("q-btn",{key:e.name,ref:"btn_"+e.name,refInFor:!0,class:{active:e.name===t.current},attrs:{disable:"culture"!==e.name,name:e.name,label:e.label,flat:""},on:{click:function(a){e.name!==t.current&&t.click(e.name)}}})})),1)])],1)},Wt=[],kt=(a("f751"),a("20d6"),a("4082")),Dt=a.n(kt),Ot=(a("7f7f"),a("448a")),jt=a.n(Ot),St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"arrows"},[a("NavBigButtonArrow",{attrs:{dir:"left",item:t.arrows.left},on:{click:function(e){return t.$emit("click",t.arrows.left)}}}),a("NavBigButtonArrow",{attrs:{dir:"right",item:t.arrows.right},on:{click:function(e){return t.$emit("click",t.arrows.right)}}})],1)},Pt=[],Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-btn",{staticClass:"nav-big__arrows",class:t.className,attrs:{icon:t.iconName,size:"xl",flat:""},on:{click:function(e){return t.$emit("click")}}})},At=[],Tt={name:"NavBigButtonArrow",props:{dir:{type:String,required:!0}},computed:{className:function(){return"nav-big__arrow-".concat(this.dir)},iconName:function(){return"img:statics/heroes/nav/arrow/navArrow.svg"}}},Qt=Tt,Ft=Object(c["a"])(Qt,Mt,At,!1,null,"3d0677bb",null),It=Ft.exports;d()(Ft,"components",{QBtn:b["a"]});var Rt={name:"NavSmallArrows",components:{NavBigButtonArrow:It},props:{arrows:{type:Object,required:!0}}},Et=Rt,Lt=Object(c["a"])(Et,St,Pt,!1,null,"0c976df1",null),Yt=Lt.exports,Ht=a("38fe"),Nt={name:"Nav",components:{NavSmallArrows:Yt},data:function(){return{arrows:{left:"",right:""},sections:[],swipeInfo:null}},mounted:function(){var t=this;this.sections=jt()(Ht["a"].map((function(t){var e=t.name,a=t.label;return{name:e,label:a}}))),this.setCurrent(this.current),setTimeout((function(){return t.setCurrent(t.current)}),150)},computed:{tabs:function(){return this.sections},current:function(){return this.$heroes.route.params.section}},methods:{handleSwipe:function(t){t.evt;var e=Dt()(t,["evt"]);this.swipeInfo=e},setCurrent:function(t){var e=jt()(this.sections),a=e.findIndex((function(e){return e.name===t})),n=e.splice(a-1);this.sections=[].concat(jt()(n),jt()(e)),this.arrows=Object.assign({},{left:this.sections[0].name,right:this.sections[2].name}),this.$nextTick((function(){var t=this.sections[0].name,e=this.$refs["btn_"+t][0].$el,a=-1*V["c"].width(e);V["c"].css(this.$refs.wrapper,{left:a+"px"})}))},click:function(t){this.setCurrent(t)}}},zt=Nt,Vt=a("12c5"),Gt=Object(c["a"])(zt,wt,Wt,!1,null,"2c019a42",null),Ut=Gt.exports;d()(Gt,"components",{QBtn:b["a"]}),d()(Gt,"directives",{TouchSwipe:Vt["a"]});var Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-small full-width"},[t.$heroes.route.params.category?[a("div",{staticClass:"row items-center justify-start"},[a("div",{staticClass:"col"},[a("NavSmallButtonBack"),t._l(t.items,(function(t){return[a("NavSmallButtonItem",{key:t.name,attrs:{item:t}})]}))],2),"chronic"===t.$heroes.route.params.category?a("div",{staticClass:"col-auto"},[a("FilterForChronic",{attrs:{filter:t.filter},on:{onFilterChange:t.changeFilter}})],1):t._e(),"maps"===t.$heroes.route.params.category?a("div",{staticClass:"col-auto"},[a("q-btn",{staticClass:"nav-small__button",attrs:{label:"Обозначения",color:t.designations?"white":"","text-color":t.designations?"black":"white",outline:!t.designations,unelevated:""},on:{click:t.changeDesignations}})],1):t._e()])]:[a("div",{staticClass:"row items-center justify-between"},[a("div",{staticClass:"col"},[a("NavSmallButtonBack"),t._l(t.items,(function(t){return[a("NavSmallButtonItem",{key:t.name,attrs:{item:t}})]}))],2)])]],2)},Kt=[],Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-btn",{staticClass:"nav-small__button nav-small__button-back",attrs:{icon:"arrow_back","text-color":"white",outline:"",unelevated:""},on:{click:t.click}})},Xt=[],te={name:"NavSmallButtonBack",methods:{click:function(){var t=this.$heroes.route.path.split("/");t.pop(),this.$heroes.route.path=t.join("/")}}},ee=te,ae=Object(c["a"])(ee,Jt,Xt,!1,null,"4ad87a77",null),ne=ae.exports;d()(ae,"components",{QBtn:b["a"]});var se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-btn",{staticClass:"nav-small__button nav-small__button_right-margin",class:{active:t.item.name===t.current,"app-win":"win"===t.$app.layout.getOS},attrs:{label:t.item.label,color:t.item.name!==t.current?"":"white","text-color":t.item.name!==t.current?"white":"black",outline:t.item.name!==t.current,disable:!!t.$heroes.route.params.category&&"Культура"!==t.item.label,unelevated:""},on:{click:t.click}})},ie=[],re={name:"NavSmallButtonItem",props:{item:{type:Object,required:!0}},computed:{current:function(){return this.$heroes.route.params.category?this.$heroes.route.params.section:this.$heroes.route.params.category}},methods:{click:function(){if(this.item.name===this.current)return!1;this.$heroes.route.params.category?this.$heroes.route.path="/section/".concat(this.item.name,"/").concat(this.$heroes.route.params.category):this.$heroes.route.path="/section/".concat(this.$heroes.route.params.section,"/").concat(this.item.name)}}},oe=re,le=(a("c406"),Object(c["a"])(oe,se,ie,!1,null,"0e47cd82",null)),ce=le.exports;d()(le,"components",{QBtn:b["a"]});var ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filter-for-chronic row"},[t._l(t.items,(function(e){return[a("FilterForChronicButtonItem",{key:e,attrs:{item:e,filter:t.filter},on:{click:t.changeFilter}})]}))],2)},de=[],me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-btn",{staticClass:"filter-for-chronic__button-item nav-small__button nav-small__button_right-margin",class:"ВСЕ"===t.item?"text-btn":"img-btn",attrs:{label:"ВСЕ"===t.item?t.item:"",icon:"ВСЕ"===t.item?"":t.item,color:t.item!==t.filter?"":"white","text-color":t.item!==t.filter?"white":"black",outline:t.item!==t.filter,unelevated:""},on:{click:t.click}})},pe=[],fe={name:"FilterForChronicButtonItem",props:{item:{type:String,required:!0},filter:{type:String,required:!0}},methods:{click:function(){this.$emit("click",this.item)}}},he=fe,be=Object(c["a"])(he,me,pe,!1,null,"52a2508a",null),ge=be.exports;d()(be,"components",{QBtn:b["a"]});var ve={name:"FilterForChronic",components:{FilterForChronicButtonItem:ge},props:{filter:{type:String,required:!0}},data:function(){return{items:["ВСЕ","headset","videocam","photo"]}},methods:{changeFilter:function(t){this.$emit("onFilterChange",t)}}},_e=ve,ye=Object(c["a"])(_e,ue,de,!1,null,"1c8efc65",null),xe=ye.exports,Ce={name:"NavSmall",components:{FilterForChronic:xe,NavSmallButtonItem:ce,NavSmallButtonBack:ne},props:{filter:{type:String,required:!1},designations:{type:Boolean,required:!1}},computed:{items:function(){return this.$heroes.route.params.category?rt["a"].sections:rt["a"].categories}},methods:{changeFilter:function(t){this.$emit("onFilterChange",t)},changeDesignations:function(){this.$emit("onDesignationsChange")}}},$e=Ce,Be=Object(c["a"])($e,Zt,Kt,!1,null,"95a8a010",null),qe=Be.exports;d()(Be,"components",{QBtn:b["a"]});var we={name:"HeroesProjectSectionPage",components:{NavSmall:qe,Nav:Ut,Person:qt},data:function(){return{}},computed:{heroes:function(){var t=rt["a"].heroes[this.$heroes.route.params.section];return t||[]}},methods:{}},We=we,ke=Object(c["a"])(We,st,it,!1,null,"b2400a22",null),De=ke.exports,Oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"heroes-page category-index column top-padding-for-header",class:"chronic"===t.$heroes.route.params.category?"no-x-padding-page":""},[a("div",{staticClass:"col-auto",class:"chronic"===t.$heroes.route.params.category?"left-padding right-padding":""},[a("div",{staticClass:"header-top"},[t._v(t._s(t.header))])]),a("div",{staticClass:"col flex",class:"maps"===t.$heroes.route.params.category||"events"===t.$heroes.route.params.category||"chronic"===t.$heroes.route.params.category?"items-end":"items-start"},["events"===t.$heroes.route.params.category?a("Events"):t._e(),"terms"===t.$heroes.route.params.category?a("TermsList"):t._e(),"persons"===t.$heroes.route.params.category?a("PersonsList"):t._e(),"maps"===t.$heroes.route.params.category?a("Maps",{attrs:{designationsProp:t.designations}}):t._e(),"chronic"===t.$heroes.route.params.category?a("ChronicleList",{attrs:{filter:t.currentFilter}}):t._e()],1),a("div",{staticClass:"navigation col-auto flex items-end",class:"chronic"===t.$heroes.route.params.category?"left-padding right-padding":""},[a("NavSmall",{attrs:{filter:t.currentFilter,designations:t.designations},on:{onFilterChange:t.changeFilter,onDesignationsChange:t.changeDesignations}})],1)])},je=[],Se=(a("7514"),a("901b")),Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"events row content-between full-width full-height"},[a("div",{staticClass:"col-auto flex justify-start items-center"},[a("div",{staticClass:"scroll-control"},[a("div",{staticClass:"q-mb-lg flex justify-start items-center"},[a("q-btn",{attrs:{color:"white","text-color":"black",icon:"arrow_drop_up",round:""},on:{click:function(e){return t.animateScroll(!0)}}})],1),a("div",{staticClass:"flex justify-start items-center"},[a("q-btn",{attrs:{color:"white","text-color":"black",icon:"arrow_drop_down",round:""},on:{click:function(e){return t.animateScroll(!1)}}})],1)])]),a("div",{staticClass:"col flex justify-center items-center"},[a("q-timeline",{staticClass:"border-for-scroll q-mr-lg q-my-none",class:"changing-size-md",attrs:{layout:"comfortable",side:"right",color:"white"}},[a("q-scroll-area",{ref:"scrollAreaEvents",staticClass:"text-shadow",style:t.height,attrs:{"thumb-style":t.$app.layout.thumbStyle}},[t._l(t.data.events[t.$heroes.route.params.section],(function(e,n){return[a("q-timeline-entry",{key:e.date+n,attrs:{title:e.event}},[a("template",{slot:"subtitle"},[a("span",{staticClass:"date",domProps:{innerHTML:t._s(e.date)}})])],2)]}))],2)],1)],1)])},Me=[],Ae={name:"Events",data:function(){return{data:rt["a"],scrollPosition:0}},computed:{height:function(){return{height:"".concat(545.28,"px")}}},methods:{animateScroll:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.$refs.scrollAreaEvents,a=e.containerHeight;this.scrollPosition=e.getScrollPosition(),this.scrollPosition+=t?-.75*a:.75*a,e.setScrollPosition(this.scrollPosition,500)},goToStartScroll:function(){var t=this;this.$nextTick((function(){var e=t.$refs.scrollAreaEvents;e.setScrollPosition&&e.setScrollPosition(0)}))}},watch:{"$heroes.route.params.section":function(t){this.goToStartScroll()}}},Te=Ae,Qe=a("05eb"),Fe=a("4983"),Ie=a("74af"),Re=Object(c["a"])(Te,Pe,Me,!1,null,"56dc332a",null),Ee=Re.exports;d()(Re,"components",{QBtn:b["a"],QTimeline:Qe["a"],QScrollArea:Fe["a"],QTimelineEntry:Ie["a"]});var Le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"persons-list full-width"},[a("q-carousel",{ref:"carouselForPersons",attrs:{height:t.height,"transition-prev":t.transition?"slide-right":"fade","transition-next":t.transition?"slide-left":"fade",animated:""},model:{value:t.slide,callback:function(e){t.slide=e},expression:"slide"}},[t._l(t.arrOfSlides,(function(e){return[a("q-carousel-slide",{staticClass:"q-py-none q-px-none text-white flex justify-center items-start",attrs:{name:e}},[a("q-scroll-area",{ref:"scrollAreaPersons",refInFor:!0,staticClass:"full-width text-shadow",style:{height:t.heightForScroll},attrs:{"thumb-style":t.$app.layout.thumbStyle}},[a("q-list",{staticClass:"row"},[a("div",{staticClass:"col-6",class:"q-pr-sm"},[t._l(t.getItems(t.itemsForThisSlide(e),!0),(function(t,e){return[a("ItemPerson",{attrs:{item:t,index:e}})]}))],2),a("div",{staticClass:"col-6",class:"q-pl-sm"},[t._l(t.getItems(t.itemsForThisSlide(e),!1),(function(t,e){return[a("ItemPerson",{attrs:{item:t,index:e}})]}))],2)])],1)],1)]}))],2),t.amountOfSlides>1?a("div",{staticClass:"q-pt-sm btns"},[a("q-btn",{staticClass:"q-mr-lg",attrs:{color:"white","text-color":"black",icon:"arrow_left",round:""},on:{click:function(e){return t.$refs.carouselForPersons.previous()}}}),a("q-btn",{attrs:{color:"white","text-color":"black",icon:"arrow_right",round:""},on:{click:function(e){return t.$refs.carouselForPersons.next()}}})],1):t._e()],1)},Ye=[],He=a("c707"),Ne=a.n(He),ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-person"},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.item.name+t.index,staticClass:"q-pa-md link",class:"q-py-md",attrs:{clickable:""},on:{click:function(e){return t.goToPerson(t.item)}}},[a("q-item-section",[t._v(t._s(t.item.name))])],1)],1)},Ve=[],Ge={name:"ItemPerson",props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},methods:{goToPerson:function(t){this.$heroes.route.path=this.$heroes.route.path+"/"+this.findIndexOfItem(t)},findIndexOfItem:function(t){return rt["a"][this.$heroes.route.params.category][this.$heroes.route.params.section].findIndex((function(e){return e.name===t.name}))}}},Ue=Ge,Ze=a("66e5"),Ke=a("4074"),Je=Object(c["a"])(Ue,ze,Ve,!1,null,"649a8e5b",null),Xe=Je.exports;d()(Je,"components",{QItem:Ze["a"],QItemSection:Ke["a"]}),d()(Je,"directives",{Ripple:et["a"]});var ta={name:"PersonsList",components:{ItemPerson:Xe},data:function(){return{slide:0,transition:!0,data:rt["a"]}},computed:{height:function(){return"".concat(768*.63,"px")},heightForScroll:function(){return"".concat(768*.63-1,"px")},amountOfSlides:function(){return Math.ceil(rt["a"][this.$heroes.route.params.category][this.$heroes.route.params.section].length/16)},arrOfSlides:function(){for(var t=[],e=0;e<this.amountOfSlides;e++)t.push(e);return t}},methods:{itemsForThisSlide:function(t){var e=jt()(Ne()(rt["a"][this.$heroes.route.params.category][this.$heroes.route.params.section],["name"]));return e.splice(16*t,16)},goToStartSlide:function(){var t=this;this.transition=!1,this.$nextTick((function(){t.slide=0,t.transition=!0}))},getItems:function(t,e){var a=[];if(e)for(var n=0;n<t.length;n++)n%2===0&&a.push(t[n]);else for(var s=0;s<t.length;s++)s%2!==0&&a.push(t[s]);return a},goToStartScroll:function(){var t=this;this.$nextTick((function(){var e=t.$refs.scrollAreaPersons;e.setScrollPosition&&e.setScrollPosition(0)}))}},watch:{"$heroes.route.params.section":function(t){this.goToStartSlide()},slide:function(t){this.goToStartScroll()}}},ea=ta,aa=a("880c"),na=a("62cd"),sa=a("1c1c"),ia=Object(c["a"])(ea,Le,Ye,!1,null,"5b1b6aac",null),ra=ia.exports;d()(ia,"components",{QCarousel:aa["a"],QCarouselSlide:na["a"],QScrollArea:Fe["a"],QList:sa["a"],QBtn:b["a"]});var oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"maps full-width full-height row",style:{height:t.height}},[a("div",{staticClass:"col-auto flex items-end"},[a("div",{staticClass:"column maps-nav__column"},[t._l(t.offsetArr.length,(function(e){return[a("q-btn",{staticClass:"map-nav-btn nav-btn",class:e===t.offsetArr.length?"":"q-mb-lg",attrs:{label:e,color:"white",outline:"",unelevated:""},on:{click:function(a){return t.openDialog(e)}}})]}))],2)]),a("div",{staticClass:"col map flex justify-start items-center"},[a("div",{ref:"mainMapRelative",staticClass:"relative-position flex justify-center items-center"},[a("div",{ref:"mapContainer",staticClass:"map__container flex items-end"},[a("img",{ref:"mainMap",staticClass:"mainMap",style:{maxHeight:t.height},attrs:{id:"mainMap",src:t.designationsProp?"statics/heroes/maps/"+t.$heroes.route.params.section+"/legend.jpg":t.imgSrc}}),a("div",{staticClass:"copyright absolute-bottom-left flex justify-start items-center q-px-md q-py-sm"},[a("span",[t._v("© ")]),a("span",[t._v("РОСРЕЕСТР, "+t._s(t.copyright))])])]),t._l(t.offsetArr.length,(function(e){return[t.designationsProp?t._e():a("div",{staticClass:"clickable-area cursor-pointer",class:"small-padding-area",style:t.getOffsetForMark(e),on:{click:function(a){return t.openDialog(e)}}},[a("q-btn",{staticClass:"my-btn",attrs:{label:e}})],1)]})),t.designationsProp?t._e():a("div",{staticClass:"clickable-area clickable-area__legend cursor-pointer",class:"small-padding-area",style:t.getLegendOffset(t.$heroes.route.params.section),on:{click:function(e){return t.openDialog(1,!0)}}})],2)]),a("q-dialog",{attrs:{"content-class":"heroes__dialog","full-width":"","full-height":"",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("DialogMaps",{attrs:{mapIndex:t.mapIndex,designationsProp:t.designations},on:{onClose:function(e){t.dialog=!t.dialog}}})],1)],1)},la=[],ca=(a("f386"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dialog-maps full-width full-height q-pl-xs q-pb-xs"},[a("div",{staticClass:"row full-width full-height"},[a("div",{staticClass:"col-auto"},[a("div",{staticClass:"column full-height"},[a("div",{staticClass:"col column justify-end map-nav__column"},[t._l(t.offsetArr.length,(function(e){return[a("q-btn",{staticClass:"map-nav-btn nav-btn q-mb-lg",attrs:{label:e,color:t.current!==e?"":"white","text-color":t.current!==e?"white":"black",outline:t.current!==e,unelevated:""},on:{click:function(a){return t.changeCurrent(e)}}})]}))],2),a("div",{staticClass:"col-auto flex justify-start items-end"},[a("q-btn",{staticClass:"map-nav-btn margin-for-nav",attrs:{icon:"close",color:"white",outline:"",unelevated:""},on:{click:t.close}})],1)])]),a("div",{staticClass:"col"},[a("div",{staticClass:"column full-height"},[a("div",{ref:"imgContainer",staticClass:"col flex justify-start items-end"},[a("div",{staticClass:"relative-position flex justify-center items-end"},[a("img",{style:{maxHeight:t.height},attrs:{src:t.designations?"statics/heroes/maps/"+t.$heroes.route.params.section+"/legend.jpg":"statics/heroes/maps/"+t.$heroes.route.params.section+"/"+t.current+".jpg"}}),a("div",{staticClass:"copyright absolute-bottom-left flex justify-start items-center q-px-md q-py-sm"},[a("span",[t._v("© ")]),a("span",[t._v("РОСРЕЕСТР, "+t._s(t.copyright))])])])]),a("div",{staticClass:"col-auto flex justify-start items-end"},[a("q-btn",{staticClass:"map-nav-btn q-px-md margin-for-nav",attrs:{label:"Обозначения",color:t.designations?"white":"","text-color":t.designations?"black":"white",outline:!t.designations,unelevated:""},on:{click:function(e){t.designations=!t.designations}}})],1)])])])])}),ua=[],da={name:"DialogMaps",props:{mapIndex:{type:Number,required:!0},designationsProp:{type:Boolean,required:!1}},data:function(){return{current:this.mapIndex,designations:!1}},mounted:function(){this.designationsProp&&(this.designations=!0)},computed:{height:function(){return"".concat(768*.8,"px")},offsetArr:function(){return rt["a"].markersForMaps[this.$heroes.route.params.section].small},copyright:function(){return rt["a"].markersForMaps[this.$heroes.route.params.section].copyright}},methods:{close:function(){this.$emit("onClose")},changeCurrent:function(t){this.$nextTick((function(){this.current=t,this.designations=!1}))}},watch:{"$q.screen.height":function(t){this.height=this.$refs.imgContainer.clientHeight}}},ma=da,pa=Object(c["a"])(ma,ca,ua,!1,null,"5ba4e243",null),fa=pa.exports;d()(pa,"components",{QBtn:b["a"]});var ha=V["c"].height,ba=V["c"].width,ga={name:"Maps",components:{DialogMaps:fa},props:{designationsProp:{type:Boolean,required:!1}},data:function(){return{imgWidth:0,imgHeight:0,dialog:!1,mapIndex:0,designations:!1}},created:function(){this.updateImg()},updated:function(){this.updateImg()},computed:{imgSrc:function(){return"statics/heroes/maps/".concat(this.$heroes.route.params.section,".jpg")},height:function(){return"".concat(768*.7,"px")},offsetArr:function(){return rt["a"].markersForMaps[this.$heroes.route.params.section].small},copyright:function(){return rt["a"].markersForMaps[this.$heroes.route.params.section].copyright}},methods:{updateImg:function(){var t=this,e=new Image;e.onload=function(){var e=t.$refs.mainMap;t.imgWidth=ba(e),t.imgHeight=ha(e)},e.onerror=function(){alert("not a valid file")},e.src=this.imgSrc},getOffsetForMark:function(t){var e=this.offsetArr[t-1];return{left:"".concat(e.left*this.imgWidth,"px"),top:"".concat(e.top*this.imgHeight,"px")}},getLegendOffset:function(t){switch(t){case"war":return{left:"".concat(.722*this.imgWidth,"px"),top:"".concat(.744*this.imgHeight,"px"),paddingTop:0,paddingRight:"".concat(.252*this.imgWidth,"px"),paddingBottom:"".concat(.19*this.imgHeight,"px"),paddingLeft:0};case"politics":return{left:"".concat(.033*this.imgWidth,"px"),top:"".concat(.795*this.imgHeight,"px"),paddingTop:0,paddingRight:"".concat(.29*this.imgWidth,"px"),paddingBottom:"".concat(.162*this.imgHeight,"px"),paddingLeft:0};case"economic":return{left:"".concat(.02*this.imgWidth,"px"),top:"".concat(.91*this.imgHeight,"px"),paddingTop:0,paddingRight:"".concat(.961*this.imgWidth,"px"),paddingBottom:"".concat(.08*this.imgHeight,"px"),paddingLeft:0};case"culture":return{left:"".concat(.513*this.imgWidth,"px"),top:"".concat(.795*this.imgHeight,"px"),paddingTop:0,paddingRight:"".concat(.258*this.imgWidth,"px"),paddingBottom:"".concat(.148*this.imgHeight,"px"),paddingLeft:0}}},updateWidthAndHeight:function(){var t=this.$refs.mainMap;this.imgWidth=ba(t),this.imgHeight=ha(t)},openDialog:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$nextTick((function(){this.designations=e,this.mapIndex=t,this.dialog=!0}))}},watch:{"$q.screen.width":function(t){this.updateWidthAndHeight()},"$q.screen.height":function(t){this.updateWidthAndHeight()}}},va=ga,_a=Object(c["a"])(va,oa,la,!1,null,"a5d49544",null),ya=_a.exports;d()(_a,"components",{QBtn:b["a"],QDialog:$t["a"]});var xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chronicleList",staticClass:"chronicle-list full-width"},[a("q-scroll-area",{ref:"scrollAreaChronicle",style:t.scrollStyle,attrs:{horizontal:"","thumb-style":t.$app.layout.thumbStyle}},[a("div",{staticClass:"full-height flex items-center left-padding right-padding"},[a("div",{ref:"mediaContainer",staticClass:"media__container",style:t.containerStyle},[t._l(t.items,(function(e,n){return[e.type===t.filter||"ВСЕ"===t.filter?[a("div",{staticClass:"media__block inline q-ml-xl relative-position",on:{click:function(e){return t.openDialog(n)}}},[a("q-img",{key:e.caption+n,staticClass:"cursor-pointer",style:{height:t.sideSize+"px",width:t.sideSize+"px"},attrs:{src:"statics/heroes/chronic/"+t.$heroes.route.params.section+"/"+e.prev}},[a("div",{staticClass:"caption absolute-bottom flex justify-start items-center"},[t._v(t._s(e.caption))])]),a("div",{staticClass:"media__block_type cursor-pointer"},[a("div",{staticClass:"media__block_helper flex justify-center items-center"},[a("q-icon",{attrs:{name:e.type,color:"white"}})],1)])],1)]:t._e()]}))],2)])]),a("div",{staticClass:"scroll-control left-padding"},[a("div",{staticClass:"q-pt-sm row justify-start items-center"},[a("q-btn",{staticClass:"q-mr-lg",attrs:{color:"white","text-color":"black",icon:"arrow_left",round:""},on:{click:function(e){return t.animateScroll(!0)}}}),a("q-btn",{attrs:{color:"white","text-color":"black",icon:"arrow_right",round:""},on:{click:function(e){return t.animateScroll(!1)}}})],1)]),a("q-dialog",{attrs:{"content-class":"heroes__dialog","full-width":"","full-height":"",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("ChronicItem",{attrs:{index:t.mediaIndex},on:{onClose:function(e){t.dialog=!t.dialog}}})],1)],1)},Ca=[],$a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chronic__item full-width full-height q-pl-xs q-pb-xs"},[a("div",{staticClass:"column full-width full-height"},[a("div",{ref:"chronicItemMediaContainer",staticClass:"col flex justify-center items-center chronic__item_media-container q-mb-md"},["photo"===t.contentObj.type?[a("q-img",{style:{maxHeight:t.height+"px"},attrs:{src:"statics/heroes/chronic/"+t.$heroes.route.params.section+"/"+t.contentObj.content,contain:""}})]:[a("video",{staticClass:"full-width",style:{maxHeight:t.height+"px"},attrs:{src:"statics/heroes/chronic/"+t.$heroes.route.params.section+"/"+t.contentObj.content,autoplay:"",controls:""}})]],2),a("div",{staticClass:"col-auto row"},[a("div",{staticClass:"col-auto flex justify-start items-end"},[a("q-btn",{staticClass:"close-btn",attrs:{icon:"close",color:"white",outline:"",unelevated:""},on:{click:t.close}})],1),a("div",{staticClass:"col flex justify-center items-end"},[a("div",{staticClass:"q-pa-none text-white"},[t._v(t._s(t.contentObj.caption))])])])])])},Ba=[],qa={name:"ChronicItem",props:{index:{type:Number,required:!0}},data:function(){return{height:0}},mounted:function(){this.height=this.$refs.chronicItemMediaContainer.clientHeight},computed:{contentObj:function(){return rt["a"][this.$heroes.route.params.category][this.$heroes.route.params.section][this.index]}},methods:{close:function(){this.$emit("onClose")}},watch:{"$q.screen.height":function(t){this.height=this.$refs.chronicItemMediaContainer.clientHeight}}},wa=qa,Wa=Object(c["a"])(wa,$a,Ba,!1,null,"492e9a0f",null),ka=Wa.exports;d()(Wa,"components",{QImg:M["a"],QBtn:b["a"]});var Da={name:"ChronicleList",components:{ChronicItem:ka},props:{filter:{type:String,required:!0}},data:function(){return{mounted:!1,dialog:!1,mediaIndex:0,itemsCount:0}},mounted:function(){this.mounted=!0,this.itemsCount=this.$refs.mediaContainer.childElementCount},computed:{sideSize:function(){return 480},scrollStyle:function(){return{height:"".concat(this.sideSize,"px")}},containerStyle:function(){return{height:"".concat(this.sideSize,"px"),width:"".concat(this.sideSize*(this.mounted?this.itemsCount:this.items.length)+48*((this.mounted?this.itemsCount:this.items.length)-1),"px")}},items:function(){return rt["a"][this.$heroes.route.params.category][this.$heroes.route.params.section]}},methods:{animateScroll:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.$refs.scrollAreaChronicle,a=e.containerWidth,n=e.getScrollPosition();n+=t?-.333*a:.333*a,e.setScrollPosition(n,500)},goToStartScroll:function(){var t=this;this.$nextTick((function(){var e=t.$refs.scrollAreaChronicle;e.setScrollPosition&&e.setScrollPosition(0)}))},updateItemsCount:function(){var t=this;this.$nextTick((function(){t.itemsCount=t.$refs.mediaContainer.childElementCount}))},openDialog:function(t){this.mediaIndex=t,this.dialog=!0}},watch:{filter:function(t){this.updateItemsCount(),this.goToStartScroll()},"$heroes.route.params.section":function(t){this.updateItemsCount(),this.goToStartScroll()}}},Oa=Da,ja=a("0016"),Sa=Object(c["a"])(Oa,xa,Ca,!1,null,"a12628a4",null),Pa=Sa.exports;d()(Sa,"components",{QScrollArea:Fe["a"],QImg:M["a"],QIcon:ja["a"],QBtn:b["a"],QDialog:$t["a"]});var Ma={name:"HeroesProjectCategoryPage",components:{ChronicleList:Pa,Maps:ya,PersonsList:ra,Events:Ee,TermsList:Se["a"],Nav:Ut,NavSmall:qe},data:function(){return{currentFilter:"ВСЕ",designations:!1}},computed:{header:function(){var t=this,e=rt["a"].categories.find((function(e){return e.name===t.$heroes.route.params.category}));return e?e.label:""}},methods:{changeFilter:function(t){this.currentFilter=t},changeDesignations:function(){this.designations=!this.designations}}},Aa=Ma,Ta=Object(c["a"])(Aa,Oe,je,!1,null,"2e9ff0b6",null),Qa=Ta.exports,Fa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"heroes-page category-item column top-padding-for-header"},[a("div",{staticClass:"col-auto"},[a("div",{staticClass:"header-top",class:t.isBigTitle?"big-header-title":""},[t._v(t._s(t.header))])]),a("div",{staticClass:"col",class:"persons"===t.$heroes.route.params.category?"items-start":"items-end"},["terms"===t.$heroes.route.params.category?a("TermItem"):t._e(),"persons"===t.$heroes.route.params.category?a("PersonItem"):t._e()],1),a("div",{staticClass:"col-auto flex items-end",style:{maxHeight:"68px"}},[a("NavNeighbors",{attrs:{neighbors:t.neighbors}})],1)])},Ia=[],Ra=(a("ac4d"),a("5df3"),a("1c4c"),a("6b54"),a("9c86"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"termWrapper",staticClass:"term row content-between full-width"},[a("div",{staticClass:"col-1 flex justify-start items-center"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.needScroll,expression:"needScroll"}],staticClass:"scroll-control"},[a("div",{staticClass:"q-mb-lg flex justify-start items-center"},[a("q-btn",{attrs:{color:"white","text-color":"black",icon:"arrow_drop_up",round:""},on:{click:function(e){return t.animateScroll(!0)}}})],1),a("div",{staticClass:"flex justify-start items-center"},[a("q-btn",{attrs:{color:"white","text-color":"black",icon:"arrow_drop_down",round:""},on:{click:function(e){return t.animateScroll(!1)}}})],1)])]),a("div",{staticClass:"col-11 border-for-scroll"},[a("q-scroll-area",{ref:"scrollAreaTerm",staticClass:"text-shadow",style:t.height,attrs:{"thumb-style":t.$app.layout.thumbStyle}},[a("div",{ref:"scrollAreaTermContent",staticClass:"q-pr-sm",domProps:{innerHTML:t._s(t.item.description)}})])],1)])}),Ea=[],La={name:"TermItem",data:function(){return{data:rt["a"],scrollPosition:0,needScroll:!1,realHeight:0}},computed:{item:function(){return rt["a"][this.$heroes.route.params.category][this.$heroes.route.params.section][this.$heroes.route.params.item]},height:function(){return{height:"".concat(522.24,"px")}}},methods:{animateScroll:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.$refs.scrollAreaTerm,a=e.containerHeight;this.scrollPosition=e.getScrollPosition(),this.scrollPosition+=t?-.85*a:.85*a,e.setScrollPosition(this.scrollPosition,500)},goToStartScroll:function(){var t=this;this.$nextTick((function(){var e=t.$refs.scrollAreaTerm,a=t.$refs.scrollAreaTermContent;t.needScroll=V["c"].height(a)>e.containerHeight,e.setScrollPosition&&e.setScrollPosition(0)}))}},watch:{"$heroes.route.params.item":{handler:function(t){this.goToStartScroll()},immediate:!0}}},Ya=La,Ha=Object(c["a"])(Ya,Ra,Ea,!1,null,"96cb6cb6",null),Na=Ha.exports;d()(Ha,"components",{QBtn:b["a"],QScrollArea:Fe["a"]});var za=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-neighbors row justify-between items-end full-width"},[a("div",{staticClass:"col-1 flex justify-start items-end"},[a("NavSmallButtonBack")],1),a("div",{staticClass:"col-11 neighbors"},[a("q-btn-group",{attrs:{stretch:"",spread:"",unelevated:""}},[t._l(t.neighbors,(function(e,n){return[""===e?[a("div",{staticClass:"empty q-mx-xs"})]:[a("q-btn",{staticClass:"q-mx-xs",class:t.className(e),style:{minHeight:"68px"},attrs:{label:"persons"===t.$heroes.route.params.category?t.getAbbreviatedName(e):e,"no-caps":""},on:{click:function(){return t.click(e)}}})],n<t.neighbors.length-1?a("q-separator",{attrs:{vertical:"",inset:""}}):t._e()]}))],2)],1)])},Va=[],Ga={name:"NavNeighbors",components:{NavSmallButtonBack:ne},props:{neighbors:{type:Array,required:!0}},computed:{parentPath:function(){var t=this.$route.fullPath.split("/");return t.splice(t.length-1,1),t.join("/")}},methods:{className:function(t){var e=rt["a"][this.$heroes.route.params.category][this.$heroes.route.params.section].find((function(e){return e.name===t})),a=e.big;return(Number(this.$heroes.route.params.item)===this.findIndexOfItem(t)?"active-item":"")+(a?" big-title":"")},click:function(t){var e=this.$heroes.route.path.split("/");e.pop(),this.$heroes.route.path=e.join("/")+"/"+this.findIndexOfItem(t)},findIndexOfItem:function(t){return rt["a"][this.$heroes.route.params.category][this.$heroes.route.params.section].findIndex((function(e){return e.name===t}))},getAbbreviatedName:function(t){if(t){var e=t.split(" ");return"".concat(e[0]," ").concat(e[1][0],".").concat(e[2][0],".")}return""}}},Ua=Ga,Za=a("e7a9"),Ka=Object(c["a"])(Ua,za,Va,!1,null,"e9364f3a",null),Ja=Ka.exports;d()(Ka,"components",{QBtnGroup:Za["a"],QBtn:b["a"],QSeparator:f["a"]});var Xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"person-item row content-between full-width",style:{minHeight:768*.65+"px"}},[a("div",{staticClass:"col-4 q-pr-md flex justify-center items-center"},[a("q-img",{staticClass:"full-height",style:{maxHeight:768*.65+"px"},attrs:{src:"statics/heroes/persons/"+t.$heroes.route.params.section+"/"+t.person.photo,contain:""}})],1),a("div",{staticClass:"col-8 q-pl-md"},[a("q-scroll-area",{ref:"scrollAreaPerson",staticClass:"full-width q-pr-sm text-shadow",style:t.height,attrs:{"thumb-style":t.$app.layout.thumbStyle}},[a("div",{staticClass:"name q-mb-lg"},[t._v(t._s(t.person.name))]),a("div",{staticClass:"main-info"},[t._v(t._s(t.person.description))]),a("div",{staticClass:"row q-py-lg"},[a("div",{staticClass:"col-1"},[a("q-separator")],1)]),a("div",{staticClass:"dates-and-places q-mb-xl"},[a("div",{staticClass:"years-of-life"},[t._v(t._s(t.person.life))]),a("div",{staticClass:"born"},[t._v("Родился: "+t._s(t.person.born))]),a("div",{staticClass:"died"},[t._v("Умер: "+t._s(t.person.dead))])]),a("div",{staticClass:"quote",domProps:{innerHTML:t._s(t.person.quote)}})])],1)])},tn=[],en={name:"PersonItem",computed:{person:function(){return rt["a"][this.$heroes.route.params.category][this.$heroes.route.params.section][this.$heroes.route.params.item]},height:function(){return{height:"".concat(522.24,"px")}}},methods:{goToStartScroll:function(){var t=this;this.$nextTick((function(){var e=t.$refs.scrollAreaPerson;e.setScrollPosition&&e.setScrollPosition(0)}))}},watch:{"$heroes.route.params.item":function(t){this.goToStartScroll()}}},an=en,nn=Object(c["a"])(an,Xa,tn,!1,null,"68b7a07a",null),sn=nn.exports;function rn(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=on(t))){var e=0,a=function(){};return{s:a,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s,i=!0,r=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){r=!0,s=t},f:function(){try{i||null==n.return||n.return()}finally{if(r)throw s}}}}function on(t,e){if(t){if("string"===typeof t)return ln(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ln(t,e):void 0}}function ln(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}d()(nn,"components",{QImg:M["a"],QScrollArea:Fe["a"],QSeparator:f["a"]});var cn={name:"HeroesProjectItemPage",components:{PersonItem:sn,NavNeighbors:Ja,TermItem:Na},computed:{header:function(){var t=this;return"terms"===this.$heroes.route.params.category?rt["a"].terms[this.$heroes.route.params.section][this.$heroes.route.params.item].name:rt["a"].categories.find((function(e){return e.name===t.$heroes.route.params.category})).label},isBigTitle:function(){return"terms"===this.$heroes.route.params.category&&(rt["a"].terms[this.$heroes.route.params.section][this.$heroes.route.params.item].hasOwnProperty("big")&&rt["a"].terms[this.$heroes.route.params.section][this.$heroes.route.params.item].big)},neighbors:function(){var t=rt["a"][this.$heroes.route.params.category][this.$heroes.route.params.section][this.$heroes.route.params.item].name,e=jt()(Ne()(rt["a"][this.$heroes.route.params.category][this.$heroes.route.params.section],["name"])),a=e.findIndex((function(e){return e.name===t})),n=[],s=[];n=0===a?[{name:""}].concat(e.splice(0,2)):a===e.length-1?e.splice(e.length-2,2).concat([{name:""}]):e.splice(a-1,3);var i,r=rn(n);try{for(r.s();!(i=r.n()).done;){var o=i.value;s.push(o.name)}}catch(l){r.e(l)}finally{r.f()}return s}}},un=cn,dn=Object(c["a"])(un,Fa,Ia,!1,null,"1c8a3ec4",null),mn=dn.exports,pn={name:"HeroesProject",components:{HeroesProjectItemPage:mn,HeroesProjectCategoryPage:Qa,HeroesProjectSectionPage:De,HeroesProjectPapersPage:nt,HeroesProjectIndexPage:L,HeroesProjectTitlePage:T},created:function(){var t=this;this.$heroes.route.path="/",!this.$heroes.cancelHeroesStartNotify&&this.$q.platform.is.desktop&&Object(U["m"])({message:this.$t("heroes.notify.resolution"),color:this.$app.layout.activeColor,textColor:this.$app.layout.activeTextColor,icon:"desktop_mac",timeout:5e3},{label:this.$t("notify.dontShowAgain"),color:this.$app.layout.activeTextColor,handler:function(){G["a"].set("cancelHeroesStartNotify",!0),t.$heroes.cancelHeroesStartNotify=!0}})},computed:{classname:function(){var t="bg-";return"/section"===this.$heroes.route.path?t+="papers":(t+=this.$heroes.route.path.split("/")[2],this.$heroes.route.params.category&&(t+="-"+this.$heroes.route.params.category)),t}},methods:{}},fn=pn,hn=Object(c["a"])(fn,W,k,!1,null,"02e66c92",null),bn=hn.exports,gn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{attrs:{value:t.show,"content-class":t.name+"__dialog",persistent:"",maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},on:{hide:function(e){return t.$emit("hide")}}},[a("div",{staticClass:"flex flex-center"},[a("div",{staticClass:"q-pa-none"},[t.$q.platform.is.desktop?a("q-bar",{staticClass:"q-px-xs"},[a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",icon:"close",dense:"",flat:""}},[a("q-tooltip",{attrs:{"content-class":"bg-"+t.$app.layout.activeColor+" text-"+t.$app.layout.activeTextColor}},[t._v(t._s(t.$t("layout.close")))])],1)],1):t._e(),t._t("default")],2)])])},vn=[],_n={name:"ProjectDialog",props:{show:{type:Boolean,required:!0},name:{type:String,required:!0}}},yn=_n,xn=a("d847"),Cn=a("2c91"),$n=a("05c0"),Bn=a("7f67"),qn=Object(c["a"])(yn,gn,vn,!1,null,"0c3875fc",null),wn=qn.exports;d()(qn,"components",{QDialog:$t["a"],QBar:xn["a"],QSpace:Cn["a"],QBtn:b["a"],QTooltip:$n["a"]}),d()(qn,"directives",{ClosePopup:Bn["a"]});var Wn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{attrs:{value:t.show,persistent:"",maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},on:{hide:function(e){return t.$emit("hide")}}},[a("div",{staticClass:"flex flex-center text-center"},[a("div",{staticClass:"q-pa-sm"},[a("h4",{staticClass:"text-white"},[t._v(t._s(t.$t("layout.desktopOnly")))]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:t.$t("layout.close"),color:t.$app.layout.activeColor,textColor:t.$app.layout.activeTextColor}})],1)])])},kn=[],Dn={name:"DesktopOnlyDialog",props:{show:{type:Boolean,required:!0}}},On=Dn,jn=Object(c["a"])(On,Wn,kn,!1,null,null,null),Sn=jn.exports;d()(jn,"components",{QDialog:$t["a"],QBtn:b["a"]}),d()(jn,"directives",{ClosePopup:Bn["a"]});var Pn={name:"Heroes",components:{DesktopOnlyDialog:Sn,ProjectDialog:wn,HeroesProject:bn,ProjectCard:w},data:function(){return{heroesDialog:!1}},computed:{obj:function(){return{title:this.$t("layout.drawer.heroes"),employees:[{type:this.$t("heroes.text.team.frontend"),number:2},{type:this.$t("heroes.text.team.content"),number:1},{type:this.$t("heroes.text.team.design"),number:1}],technologies:"SPA, Vue.js, Electron",description:this.$t("heroes.text.description"),time:"11.2019 - 01.2020"}}}},Mn=Pn,An=Object(c["a"])(Mn,_,y,!1,null,"d160c2c6",null),Tn=An.exports;d()(An,"components",{QBtn:b["a"]});var Qn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wb__block"},[a("ProjectCard",{attrs:{projectObj:t.obj},scopedSlots:t._u([{key:"actions",fn:function(){return[a("q-btn",{attrs:{label:t.$t("wb.text.btns.operator"),color:t.$app.layout.activeColor,textColor:t.$app.layout.activeTextColor,size:t.$app.layout.btnsSizeForProjectCard,"icon-right":"headset_mic"},on:{click:function(e){t.wbOperatorDialog=!0}}}),a("q-btn",{attrs:{label:t.$t("wb.text.btns.manager"),color:t.$app.layout.activeColor,textColor:t.$app.layout.activeTextColor,size:t.$app.layout.btnsSizeForProjectCard,"icon-right":"record_voice_over"},on:{click:function(e){t.wbManagerDialog=!0}}})]},proxy:!0}])}),t.$q.platform.is.mobile?[a("DesktopOnlyDialog",{attrs:{show:t.wbOperatorDialog},on:{hide:function(e){t.wbOperatorDialog=!1}}}),a("DesktopOnlyDialog",{attrs:{show:t.wbManagerDialog},on:{hide:function(e){t.wbManagerDialog=!1}}})]:[a("ProjectDialog",{attrs:{show:t.wbOperatorDialog,name:"operatorWB"},on:{hide:function(e){t.wbOperatorDialog=!1}}},[a("WBOperatorProject")],1),a("ProjectDialog",{attrs:{show:t.wbManagerDialog,name:"managerWB"},on:{hide:function(e){t.wbManagerDialog=!1}}},[a("WBManagerProject")],1)]],2)},Fn=[],In=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"operatorWB__project"},["/login"===t.$operatorWB.layout.route.path?[a("q-layout",[a("q-page-container",[a("WBOperatorProjectLogin")],1)],1)]:[a("q-layout",{staticStyle:{height:"calc(100vh - 32px)",width:"100vw"},attrs:{view:"hHh Lpr lFf",container:""}},[a("q-header",{staticClass:"main-toolbar"},[a("WBOperatorToolbar")],1),a("q-page-container",[a("Modals"),a("q-page",{staticClass:"hard"},["/"===t.$operatorWB.layout.route.path?a("Hard"):t._e(),"/payments"===t.$operatorWB.layout.route.path?a("PaymentsReport"):t._e()],1)],1)],1)]],2)},Rn=[],En=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-toolbar",{staticClass:"main-toolbar bg-WB-dark q-px-sm no-wrap"},[a("div",{staticClass:"row items-center justify-between no-wrap full-width"},[a("div",{staticClass:"row items-center justify-start no-wrap"},[a("q-btn",{staticClass:"button",attrs:{flat:"",color:"red"},on:{click:t.safeLogout}},[a("q-icon",{staticClass:"fas fa-sign-out-alt"})],1),a("span",{staticClass:"loans-list-header__title"},[a("span",[t._v(t._s(t.$operatorWB.user.shortName))])]),a("Search",{staticClass:"search-client q-ml-md"}),a("OpenedCards",{staticClass:"q-mr-sm"})],1),a("div",{staticClass:"row items-center justify-end no-wrap"},[t.$operatorWB.layout.clientCardModalOpened?a("q-btn",{staticClass:"q-mx-sm",attrs:{size:"small",color:"WB-primary",disable:t.$operatorWB.layout.isCallingCard},on:{click:function(e){return t.$operatorWB.layout.returnToListOfClients({source:"toolbar"})}}},[a("div",{staticClass:"flex no-wrap"},[a("q-icon",{staticClass:"q-mr-sm",attrs:{name:"fa fa-arrow-right"}}),a("div",{staticClass:"text-no-wrap",domProps:{innerHTML:t._s(t.$t("toolbar.backToList"))}})],1)]):t._e(),t.$operatorWB.user.isUserHaveRoles("operatorHard")?[a("ContractsButton"),a("PaymentsButton"),a("OperatorHardScores",{staticClass:"q-ml-sm"})]:t._e()],2)])])},Ln=[],Yn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("q-select",{attrs:{options:t.options,placeholder:"Найти клиента",loading:t.loading,"text-color":"white",color:"white","bg-color":"WB-primary","use-input":"","hide-selected":"","fill-input":"","input-debounce":"1000","hide-dropdown-icon":"",dense:"",dark:!1,"options-dense":"",standout:"",clearable:"",disable:t.$operatorWB.layout.isCallingCard},on:{input:t.selected,filter:t.filterFn},scopedSlots:t._u([{key:"option",fn:function(e){return[a("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[a("q-item-section",[a("q-item-label",[a("div",{staticClass:"text-black"},[t._v(t._s(e.opt.label))])]),a("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.opt.sublabel))])],1),a("q-item-section",{attrs:{avatar:""}},[a("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.opt.stamp))])],1)],1)]}}]),model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[a("template",{slot:"prepend"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"search"},on:{click:function(e){return t.search(t.query)}}})],1)],2)],1)},Hn=[],Nn=(a("386d"),a("a34a")),zn=a.n(Nn),Vn=(a("6762"),a("2fdb"),a("96cf"),a("c973")),Gn=a.n(Vn),Un=a("365c"),Zn={name:"Search",data:function(){return{query:null,model:null,options:[],loading:!1}},methods:{search:function(t){var e=this;return Gn()(zn.a.mark((function a(){var n,s;return zn.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,a.next=3,Un["a"].crm.getClientsList();case 3:return n=a.sent,e.loading=!1,s=n.data.clients.map((function(t){return{id:t.id,value:t.fullName,label:t.fullName,sublabel:"(ID: ".concat(t.id,") | ").concat(t.mainProduct.client.city," ").concat(t.mainProduct.client.phone?"| ".concat(t.mainProduct.client.phone):""," ").concat(t.mainProduct.product.group.name?"| ".concat(t.mainProduct.product.group.name):""),stamp:Object(U["b"])(t.mainProduct.client.birthDate,"YYYY-MM-DD")}})),a.abrupt("return",s.filter((function(e){return e.label.toLowerCase().includes(t.toLowerCase())})).slice(0,20));case 7:case"end":return a.stop()}}),a)})))()},selected:function(t){t&&this.$operatorWB.layout.openClientCard({clientId:t.id,source:"search",cardType:"classic"})},filterFn:function(t,e,a){var n=this;return Gn()(zn.a.mark((function s(){return zn.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(n.query=t,t&&!(t.length<1)){s.next=5;break}return n.options=[],a(),s.abrupt("return");case 5:return s.next=7,n.search(t);case 7:n.options=s.sent,e();case 9:case"end":return s.stop()}}),s)})))()}},watch:{"$operatorWB.user.token":function(t){this.model=null}}},Kn=Zn,Jn=(a("9e27"),a("ddd8")),Xn=a("0170"),ts=Object(c["a"])(Kn,Yn,Hn,!1,null,"3612b224",null),es=ts.exports;d()(ts,"components",{QSelect:Jn["a"],QIcon:ja["a"],QItem:Ze["a"],QItemSection:Ke["a"],QItemLabel:Xn["a"]});var as=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.$operatorWB.layout.openedCards.length>0?a("div",{staticClass:"card-list row justify-start items-center q-ml-md"},t._l(t.$operatorWB.layout.openedCards,(function(e,n){return a("div",{key:e.id,staticClass:"card-list__item",class:{active:n===t.$operatorWB.layout.activeCardIndex,application:"application"===e.type,call:"call"===e.source},on:{click:function(a){return t.changeCard(e.id,e.clientId,e.type,n)}}},[a("q-icon",{staticClass:"far fa-file-alt"}),a("sup",[t._v(t._s(n+1))]),a("q-tooltip",{attrs:{anchor:"bottom left",self:"top right",offset:[0,5]}},[a("strong",[t._v(t._s(t.clientName(e.clientId))+" "),a("br")]),a("span",[t._v("тел.: "+t._s(t.clientPhone(e.clientId))+" "),a("br")]),a("span",[t._v("д.р.: "+t._s(t.clientBirthDate(e.clientId))+" "),a("br")]),a("span",[t._v("source: "+t._s(e.source)+" "),a("br")]),a("span",[t._v("cardType: "+t._s(e.type))])])],1)})),0):t._e()},ns=[],ss={name:"openedCards",computed:{},methods:{clientBirthDate:function(t){var e=this.$operatorWB.clients.get(t);return e&&Object(U["b"])(e.birthDate,"YYYY-MM-DD","DD.MM.YYYY")},clientName:function(t){var e=this.$operatorWB.clients.get(t);return e&&e.lastName+" "+e.firstName+" "+e.middleName},clientPhone:function(t){var e=this.$operatorWB.clients.get(t),a=e&&e.phones&&e.phones.find((function(t){return t.main}));return a&&a.number||"нет основного номера"},changeCard:function(t,e,a,n){if(this.$operatorWB.layout.isCallingCard)return!1;this.$operatorWB.layout.switchClientCard({id:t,clientId:e,cardType:a,source:"openedCards",index:n})}}},is=ss,rs=(a("6005"),Object(c["a"])(is,as,ns,!1,null,"1a3467ea",null)),os=rs.exports;d()(rs,"components",{QIcon:ja["a"],QTooltip:$n["a"]});var ls=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"operator-scores-hard"},[a("div",{staticClass:"row items-center full-height"},[a("div",{staticClass:"col-5 q-px-sm"},[a("q-select",{staticClass:"select__group",attrs:{options:t.groups,"bg-color":"grey-9","label-color":"white",color:"WB-primary",dark:!0,"popup-content-class":"text-black bg-white",dense:"","options-dense":"",standout:""},model:{value:t.$operatorWB.user.currentGroup,callback:function(e){t.$set(t.$operatorWB.user,"currentGroup",e)},expression:"$operatorWB.user.currentGroup"}})],1),a("div",{staticClass:"col-5"},[a("div",{staticClass:"row",on:{click:function(e){t.hardStat=!t.$operatorWB.user.loading.ratings&&!t.hardStat}}},[a("div",{staticClass:"full-width flex justify-between text-bold text-yellow-6"},[a("span",[t._v("Ваш рейтинг:")]),a("span",[t._v(t._s(t.params&&t.params.rating))])]),a("div",{staticClass:"full-width flex justify-between text-bold"},[a("span",[t._v("Cбор:")]),a("span",[t._v(t._s(t.params&&t.params.amount&&t.money(t.params.amount,!0)))])])])]),a("div",{staticClass:"col-2 text-grey-5"},[a("div",{staticClass:"row justify-center"},[t._v(t._s(t.updated))]),a("div",{staticClass:"row justify-center",on:{click:function(e){return t.$operatorWB.user.loadRatings()}}},[a("q-icon",{attrs:{size:"16px",name:"cached"}})],1)])]),a("q-inner-loading",{attrs:{showing:t.$operatorWB.user.loading.ratings}},[a("q-spinner",{attrs:{size:"20",color:"white"}})],1)],1),a("q-dialog",{attrs:{"content-style":"min-width: 730px;","content-class":"operatorWB__dialog operatorWB__stat-dialog"},model:{value:t.hardStat,callback:function(e){t.hardStat=e},expression:"hardStat"}},[a("HardStat",{on:{close:function(e){t.hardStat=!t.hardStat}}})],1)],1)},cs=[],us=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stat full-stat"},[a("q-card",{staticClass:"modal-content"},[a("q-card-section",{staticClass:"title q-pa-none row"},[a("div",{staticClass:"col-11 flex justify-center items-center"},[t._v("Информация по сборам")]),a("div",{staticClass:"col-1 flex justify-end"},[a("q-btn",{attrs:{flat:"",label:"Закрыть"},on:{click:t.close}})],1)]),a("div",{staticClass:"row justify-center department-name"},[t._v(t._s(t.$operatorWB.user.currentGroupData&&t.$operatorWB.user.currentGroupData.name))]),a("q-card-section",{staticClass:"main q-pa-none"},[a("div",{staticClass:"keys"},[a("div",{staticClass:"tiles hard"},[a("div",{staticClass:"tile"},[a("q-radio",{attrs:{val:"daily",dark:"",color:"WB-primary"},model:{value:t.current.type,callback:function(e){t.$set(t.current,"type",e)},expression:"current.type"}},[a("q-icon",{attrs:{name:"calendar_today"}}),a("span",[t._v("Дневной сбор")])],1),a("HardRatingTable",{attrs:{ratings:t.$operatorWB.user.currentGroupData,current:t.current,periods:t.periodsDay,type:"daily"}}),a("HardRatingLeader",{attrs:{ratings:t.$operatorWB.user.ratings&&t.$operatorWB.user.ratings.leaders.day,type:"day"}})],1),a("div",{staticClass:"tile"},[a("q-radio",{attrs:{val:"monthly",dark:"",color:"WB-primary"},model:{value:t.current.type,callback:function(e){t.$set(t.current,"type",e)},expression:"current.type"}},[a("q-icon",{attrs:{name:"date_range"}}),a("span",[t._v("Квартальный сбор")])],1),a("HardRatingTable",{attrs:{ratings:t.$operatorWB.user.currentGroupData,current:t.current,periods:t.periodsQuarterCurrent,type:"monthly",period:"current"}}),a("HardRatingLeader",{attrs:{ratings:t.$operatorWB.user.ratings&&t.$operatorWB.user.ratings.leaders.month,type:"month"}})],1),a("div",{staticClass:"tile"},[a("HardRatingTable",{attrs:{ratings:t.$operatorWB.user.currentGroupData,current:t.current,periods:t.periodsQuarterLast,type:"quarter",period:"closed"}}),a("HardRatingLeader",{attrs:{ratings:t.$operatorWB.user.ratings&&t.$operatorWB.user.ratings.leaders.quarter,type:"quarter"}})],1)])]),a("div",{staticClass:"total"},[a("HardRatingList",{attrs:{staff:t.staffList,current:t.current}})],1)])],1)],1)},ds=[],ms=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-rating-table"},[a("div",{staticClass:"key-rating-table__left"},[a("div",{staticClass:"table"},[a("div",{staticClass:"thead"},[a("div",{staticClass:"tr"},[a("div",{staticClass:"th"},[t._v(" ")]),a("div",{staticClass:"th"},[t._v(t._s(t.$t("stats.labels.sum")))]),a("div",{staticClass:"th"},[t._v(t._s(t.$t("stats.labels.rating")))])])]),a("div",{staticClass:"tbody"},[t._l(t.periods,(function(e,n){return[a("div",{key:n,staticClass:"tr",class:t.current.period===e?"current":""},[a("div",{staticClass:"td"},[a("div",{staticClass:"span"},[t._v(t._s(t.label(e)))])]),a("div",{staticClass:"td"},[a("div",{staticClass:"span"},[t._v(t._s(t.amount(e)))])]),a("div",{staticClass:"td"},[a("div",{staticClass:"span"},[t._v(t._s(t.rating(e)))])])])]}))],2)])]),a("div",{staticClass:"key-rating-table__right",class:t.type},[a("span",[t._v(t._s(t.period&&t.$t("stats.period."+t.period)))])])])},ps=[],fs=a("21e3"),hs=a("bd4c"),bs=new Date,gs={name:"HardRatingTable",props:{type:{type:String,required:!0},current:{type:Object,required:!0},period:{type:String,required:!1},periods:{type:Array,required:!0},ratings:{type:Object,required:!1}},computed:{isActive:function(){return this.type===this.current.type}},methods:{label:function(t){return"daily"===this.type?this.$t("stats.period."+(t===Object(fs["c"])(bs,!0)?"today":"yesterday")):hs["b"].formatDate(Date.parse(t),"MMMM")},amount:function(t){var e="–",a="quarter"===this.type?"monthly":this.type;if(this.ratings&&this.ratings.indicators){var n=this.$operatorWB.user.currentGroupData,s=n.indicators[a];s&&s.hasOwnProperty(t)&&(e=Object(U["l"])(s[t].amount,!0))}return e},rating:function(t){var e="–";if(this.ratings&&this.ratings.indicators){var a=this.$operatorWB.user.currentGroupData,n=a.indicators[this.type];n&&n.hasOwnProperty(t)&&(e=n[t].rating)}return e},month:function(t){var e=t.split("-");return parseInt(e[1])}}},vs=gs,_s=(a("53dd"),Object(c["a"])(vs,ms,ps,!1,null,"2c8c5d6a",null)),ys=_s.exports,xs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rating-leader row justify-between"},[a("div",{staticClass:"rating-leader__value"},[t._v(t._s(t.$t("stats.leader."+t.type))+": "),a("span",[t._v(t._s(t.ratings&&t.ratings.group))])]),a("div",{staticClass:"rating-leader__value"},[t._v(t._s(t.$t("stats.leader.sum"))+": "),a("span",[t._v(t._s(t.ratings&&t.money(t.ratings.amount,!0)))])])])},Cs=[],$s={name:"HardRatingLeader",data:function(){return{money:U["l"]}},props:{ratings:{type:Object,required:!1},type:{type:String,required:!0}}},Bs=$s,qs=(a("e3fe"),Object(c["a"])(Bs,xs,Cs,!1,null,"264d7acc",null)),ws=qs.exports,Ws=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-list",{staticClass:"header"},[a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"far fa-chart-bar"}})],1),a("q-item-section",[a("q-item-label",[t._v(t._s(t.$t("stats.labels.total")))])],1)],1)],1),a("div",{staticClass:"total-rating"},[a("div",{staticClass:"total-rating__title"},[a("div",{staticClass:"top"},[a("q-list",{staticClass:"header"},[a("q-item",[a("q-item-section",[a("q-item-label",[t._v(t._s(t.$t("stats.labels.rating")))])],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",{attrs:{stamp:""}},[t._v(t._s(t.$t("stats.period."+("daily"===t.current.type?"today":t.month(t.current.period)))))])],1)],1)],1)],1),a("div",{staticClass:"bottom"},[a("q-list",[a("q-item",[a("q-item-section",[a("q-item-label",{staticClass:"flex justify-start"},[t._v(t._s(t.$t("stats.labels.leader"))+": "+t._s(t.staff&&t.staff[0].name))])],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",{attrs:{stamp:""}},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("stats.labels.yourRating"))+": ")]),a("span",{staticClass:"value"},[t._v(t._s(t.rating))]),a("span",{staticClass:"switcher"},[a("q-btn",{attrs:{size:"xs",rounded:"",dense:"",flat:""},on:{click:function(e){t.showMyRating=!t.showMyRating}}},[a("q-icon",{attrs:{name:t.showMyRating?"far fa-eye-slash":"far fa-eye"}})],1)],1)])],1)],1)],1)],1)]),a("div",{staticClass:"total-rating__content"},[a("div",{staticClass:"total-rating__list"},[a("div",{staticClass:"header"},[a("span",[t._v(t._s(t.$t("stats.labels.group")))]),a("span",[t._v(t._s(t.$t("stats.labels.value")))])]),a("div",{staticClass:"main"},[a("q-scroll-area",{staticStyle:{width:"100%",height:"390px"}},[a("q-list",{class:t.showMyRating?"show":""},[t._l(t.staff,(function(e,n){return[a("q-item",{key:n,class:e.id===t.$operatorWB.user.currentGroup.value?"me":""},[a("q-item-section",[a("q-item-label",[t._v(t._s(n+1+". "+e.name))])],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",{attrs:{stamp:""}},[e.value?a("span",[t._v(t._s(t.money(e.value,!0)))]):t._e(),e.amount?a("span",[t._v(t._s(t.money(e.amount,!0)))]):a("span",[t._v("—")])])],1)],1)]}))],2)],1)],1)])])])],1)},ks=[],Ds={name:"HardRatingList",props:{staff:{type:Array,required:!1},leaders:{type:Object,required:!1},rating:{type:String,required:!1},current:{type:Object,required:!0}},data:function(){return{money:U["l"],showMyRating:!0}},methods:{month:function(t){var e=t.split("-");return parseInt(e[1])}}},Os=Ds,js=(a("7226"),Object(c["a"])(Os,Ws,ks,!1,null,"b887d5bc",null)),Ss=js.exports;function Ps(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function Ms(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ps(Object(a),!0).forEach((function(e){z()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ps(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}d()(js,"components",{QList:sa["a"],QItem:Ze["a"],QItemSection:Ke["a"],QIcon:ja["a"],QItemLabel:Xn["a"],QBtn:b["a"],QScrollArea:Fe["a"]});var As=new Date,Ts={name:"HardStat",components:{HardRatingTable:ys,HardRatingLeader:ws,HardRatingList:Ss},data:function(){return{opened:!0,current:{type:"daily",period:Object(fs["c"])(new Date,!0)},periodsDay:[Object(fs["c"])(new Date,!0),Object(fs["c"])(hs["b"].subtractFromDate(new Date,{days:1}),!0)],periodsQuarterCurrent:Object(fs["g"])(!0),periodsQuarterLast:Object(fs["g"])()}},computed:{currentLeader:function(){return{name:this.current.type,value:this.current.period}},staffList:function(){var t=this,e=this.$operatorWB.user.ratings&&this.$operatorWB.user.ratings.groups;return e&&Ne()(e.map((function(e,a){var n=e.indicators[t.current.type];return Ms({index:a,name:e.name,id:e.id},n[t.current.period])})),["rating","group"])}},methods:{close:function(){this.$emit("close")},setCurrent:function(t){this.current=t}},watch:{"current.type":function(t){this.current.period="daily"===t?Object(fs["c"])(As,!0,!0):Object(fs["c"])(As,!1)}}},Qs=Ts,Fs=(a("8b99"),a("3786")),Is=Object(c["a"])(Qs,us,ds,!1,null,"0a23c364",null),Rs=Is.exports;d()(Is,"components",{QCard:m["a"],QCardSection:p["a"],QBtn:b["a"],QRadio:Fs["a"],QIcon:ja["a"]});var Es={name:"OperatorHardScores",components:{HardStat:Rs},data:function(){return{hardStat:!1,money:U["l"],visible:!0,group:null}},computed:{updated:function(){var t=this.$operatorWB.user.updated&&hs["b"].formatDate(this.$operatorWB.user.updated,"HH:mm");return t},groups:function(){return this.$operatorWB.user.ratings&&this.$operatorWB.user.ratings.employee&&this.$operatorWB.user.ratings.employee.groups.map((function(t){return{label:t.name,value:t.id}}))||[]},params:function(){var t=this;if(!this.$operatorWB.user.ratings||!this.$operatorWB.user.ratings.groups)return{};var e=this.$operatorWB.user.ratings.groups.find((function(e){return!!t.$operatorWB.user.currentGroup&&e.id===t.$operatorWB.user.currentGroup.value}));return e&&e.indicators.monthly[Object(fs["c"])()]}}},Ls=Es,Ys=(a("eb64"),a("74f7")),Hs=a("0d59"),Ns=a("27f9"),zs=Object(c["a"])(Ls,ls,cs,!1,null,"52569a10",null),Vs=zs.exports;d()(zs,"components",{QSelect:Jn["a"],QIcon:ja["a"],QInnerLoading:Ys["a"],QSpinner:Hs["a"],QDialog:$t["a"],QInput:Ns["a"]});var Gs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("MenuButton",{attrs:{icon:"fa fa-coins",label:"Платежи",disable:!!t.$operatorWB.clients.current,to:{path:"/payments"}}})},Us=[],Zs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-btn",{staticClass:"q-mr-sm no-wrap",class:{active:t.isActive},attrs:{flat:"",size:"small",exact:"",disable:t.disable},on:{click:t.click}},[a("div",{staticClass:"flex no-wrap"},[a("q-icon",{staticClass:"q-mr-sm",attrs:{name:t.icon}}),t._v(t._s(t.label))],1)])},Ks=[],Js={name:"MenuButton",props:{to:{type:Object,required:!0},icon:{type:String,required:!0},label:{type:String,required:!0},disable:{type:Boolean}},computed:{isActive:function(){return this.$operatorWB.layout.route.path===this.to.path}},methods:{click:function(){!this.disable&&this.$operatorWB.layout.changeRoute(this.to.path)}}},Xs=Js,ti=(a("6e76"),Object(c["a"])(Xs,Zs,Ks,!1,null,"2c387a57",null)),ei=ti.exports;d()(ti,"components",{QBtn:b["a"],QIcon:ja["a"]});var ai={name:"PaymentsButton",components:{MenuButton:ei}},ni=ai,si=Object(c["a"])(ni,Gs,Us,!1,null,"a590745a",null),ii=si.exports,ri=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("MenuButton",{attrs:{icon:"fa fa-clipboard-list",label:"Договоры",disable:!!t.$operatorWB.clients.current,to:{path:"/"}}})},oi=[],li={name:"ContractsButton",components:{MenuButton:ei}},ci=li,ui=Object(c["a"])(ci,ri,oi,!1,null,"208d1214",null),di=ui.exports,mi={name:"WBOperatorToolbar",components:{ContractsButton:di,PaymentsButton:ii,Search:es,OpenedCards:os,OperatorHardScores:Vs},data:function(){return{shortStat:!1,fullStat:!1}},computed:{disabled:function(){return!!this.$operatorWB.calls.currentCall}},methods:{safeLogout:function(){this.$operatorWB.layout.openedCards.length>0?this.$operatorWB.messages.show({position:"top-right",message:this.$t("clients.card.alert.close"),timeout:1e3}):this.$operatorWB.user.logout()}}},pi=mi,fi=(a("464d"),a("65c6")),hi=Object(c["a"])(pi,En,Ln,!1,null,"d00f7000",null),bi=hi.exports;d()(hi,"components",{QToolbar:fi["a"],QBtn:b["a"],QIcon:ja["a"]});var gi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"bg-blue-grey-2 flex justify-center items-center row"},[a("q-form",{staticClass:"col-xs-12 col-sm-8 col-md-6 col-lg-3",on:{submit:function(e){return e.preventDefault(),t.doLogin(e)}}},[a("q-card",{staticClass:"bg-white text-black"},[a("q-card-section",{staticClass:"font-size-large"},[t._v("Вход в систему")]),a("q-card-section",[a("q-input",{attrs:{label:"Логин",color:"WB-primary","float-label":"",placeholder:"Имя пользователя или email",error:t.$v.form.login.$error,"error-message":"Поле не может быть пустым",dark:!1,hint:"Подойдёт любой пароль"},model:{value:t.form.login,callback:function(e){t.$set(t.form,"login","string"===typeof e?e.trim():e)},expression:"form.login"}},[a("template",{slot:"before"},[a("q-icon",{attrs:{name:"account_box"}})],1)],2),a("q-input",{attrs:{type:t.isPwd?"password":"text",label:"Пароль",color:"WB-primary","float-label":"",placeholder:"Пароль",autocomplete:"off",error:t.$v.form.password.$error,"error-message":"Поле не может быть пустым",dark:!1,hint:"Подойдёт любой пароль"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}},[a("template",{slot:"before"},[a("q-icon",{attrs:{name:"lock"}})],1),a("template",{slot:"append"},[a("q-icon",{staticClass:"text-lg cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})],1)],2)],1),a("q-card-actions",[a("q-btn",{staticClass:"self-center text-white full-width",attrs:{disable:t.$v.$error||t.$operatorWB.user.loading.user,type:"submit",loading:t.$operatorWB.user.loading.user,color:"WB-primary",label:"Войти",dark:!1},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-spinner",{attrs:{size:"20px"}}),a("span",[t._v("загрузка...")])]},proxy:!0}])})],1)],1)],1)],1)},vi=[],_i=a("b5ae"),yi={name:"WBOperatorProjectLogin",data:function(){return{form:{login:"test@test.test",password:"~Test123"},isPwd:!0}},validations:{form:{login:{required:_i["required"]},password:{required:_i["required"]}}},methods:{doLogin:function(){this.$v.form.$touch(),this.$v.form.$invalid||this.$operatorWB.user.login({name:this.form.login,password:this.form.password})}}},xi=yi,Ci=(a("96be"),a("9989")),$i=a("0378"),Bi=a("8572"),qi=Object(c["a"])(xi,gi,vi,!1,null,"fb69b598",null),wi=qi.exports;d()(qi,"components",{QPage:Ci["a"],QForm:$i["a"],QCard:m["a"],QCardSection:p["a"],QInput:Ns["a"],QIcon:ja["a"],QCardActions:h["a"],QBtn:b["a"],QSpinner:Hs["a"],QField:Bi["a"]});var Wi=a("04e1"),ki=a.n(Wi),Di=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"card brx5 pretty-table q-pa-xs"},[a("HardTable")],1)},Oi=[],ji=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pretty-table__wrapper q-pa-xs"},[a("FilteredTable",{attrs:{items:t.items,"table-options":t.options,loading:t.$operatorWB.hard.loading,title:t.$t("hard.table.title")},scopedSlots:t._u([{key:"ft-body",fn:function(e){return[a("q-tr",{staticClass:"pretty-table__row cursor-pointer",class:{"last-opened":t.lastOpened(e.props.row),opened:t.isOpenedToday(e.props.row)},attrs:{props:e.props,"data-prop":e.props},nativeOn:{dblclick:function(a){return t.onRowClick(e.props.row)}}},t._l(e.props.cols,(function(n){return a("q-td",{key:n.name,attrs:{props:e.props,"row-key":"clientId"}},["status"===n.name?[a("span",{class:t.colorClass(n.value)},[t._v(t._s(n))])]:"lastCommunicationDepartment"===n.name&&n.value?[a("span",[t._v(t._s(n.value.includes("(")?n.value.split("(")[0]:n.value)),n.value.includes("(")?[a("q-tooltip",[t._v(t._s(n.value.split("(")[1].substring(0,n.value.split("(")[1].length-1)))])]:t._e()],2)]:[["string","text"].includes(n.type)?[a("TextHighlight",{attrs:{queries:t.queries(e.props.filters,n.name,n.value)}},[t._v(t._s(n.value))])]:"datetime"===n.type?[n.value?a("span",[t._v(t._s(n.value.split(" ")[0])+"\n "),a("small",{staticClass:"text-blue-grey-9"},[t._v(t._s(n.value.split(" ")[1]))])]):t._e()]:[a("span",[t._v(t._s(n.value))])]]],2)})),1)]}},{key:"ft-filters",fn:function(e){return[a("div",{staticClass:"row full-width justify-end items-center"},[a("q-select",{staticClass:"q-mr-sm",attrs:{"transition-show":"fade","transition-hide":"fade",options:t.translatedColumns,"display-value":t.$q.lang.table.columns,color:"WB-secondary",multiple:"",borderless:"",dense:"","options-dense":"","emit-value":"","map-options":"","option-value":"name","popup-content-style":"color: black;",dark:!1},model:{value:t.visibleColumns,callback:function(e){t.visibleColumns=e},expression:"visibleColumns"}})],1)]}}])}),a("HardTableBottomLine",{attrs:{"info-block":t.infoBlock}})],1)},Si=[],Pi=a("b50c"),Mi=a("8847"),Ai={columns:[{name:"contract",required:!1,label:Mi["b"].t("hard.table.columns.contract"),align:"left",field:"contract",sortable:!0,type:"string",search:"first"},{name:"signDate",required:!1,label:Mi["b"].t("hard.table.columns.signDate"),format:function(t){return Object(U["c"])(t)},align:"center",field:"signDate",sortable:!0,type:"datetime"},{name:"timezone",required:!1,label:Mi["b"].t("hard.table.columns.timezone"),align:"left",field:"timezone",sortable:!0,style:"width: 40px",type:"select"},{name:"city",required:!1,label:Mi["b"].t("hard.table.columns.city"),align:"left",field:"city",sortable:!0,type:"text"},{name:"region",required:!1,label:Mi["b"].t("hard.table.columns.region"),align:"left",field:"region",sortable:!0,type:"select"},{name:"fullName",required:!1,label:Mi["b"].t("hard.table.columns.fullName"),align:"left",field:"fullName",sortable:!0,type:"string"},{name:"birthDate",required:!1,label:Mi["b"].t("hard.table.columns.birthDay"),format:function(t){return Object(U["d"])(t)},align:"center",field:"birthDate",sortable:!0,type:"date"},{name:"duration",required:!1,label:Mi["b"].t("hard.table.columns.duration"),align:"center",field:"duration",sortable:!0,type:"select"},{name:"amount",required:!1,label:Mi["b"].t("hard.table.columns.summ"),format:function(t){return t?Object(U["l"])(t):""},align:"right",field:"amount",sortable:!0,type:"range"},{name:"summLeft",required:!1,label:Mi["b"].t("hard.table.columns.summLeft"),format:function(t){return t?Object(U["l"])(t):""},align:"right",field:"summLeft",sortable:!0,type:"range"},{name:"summPercent",required:!1,label:Mi["b"].t("hard.table.columns.summPercent"),format:function(t){return"".concat(Number(t).toFixed(0)," %")},align:"right",field:"summPercent",sortable:!0,type:"range"},{name:"summPenalty",required:!1,label:Mi["b"].t("hard.table.columns.summPenalty"),format:function(t){return t?Object(U["l"])(t):""},align:"right",field:"summPenalty",sortable:!0,type:"range"},{name:"summTotal",required:!1,label:Mi["b"].t("hard.table.columns.summTotal"),format:function(t){return t?Object(U["l"])(t):""},align:"right",field:"summTotal",sortable:!0,type:"range"},{name:"daysDelay",required:!1,label:Mi["b"].t("hard.table.columns.daysDelay"),align:"center",field:"daysDelay",sortable:!0,type:"range"},{name:"phone",required:!1,label:Mi["b"].t("hard.table.columns.phone"),align:"center",field:"phone",sortable:!0,type:"string"},{name:"openedAt",required:!1,label:Mi["b"].t("hard.table.columns.openedAt"),format:function(t){return Object(U["c"])(t)},align:"center",field:"openedAt",sortable:!0,type:"datetime"},{name:"lastContact",required:!1,label:Mi["b"].t("hard.table.columns.lastContact"),format:function(t){return Object(U["c"])(t)},align:"center",field:"lastContact",sortable:!0,type:"datetime"},{name:"lastPayDate",required:!1,label:Mi["b"].t("hard.table.columns.lastPayDate"),format:function(t){return Object(U["c"])(t)},align:"center",field:"lastPayDate",sortable:!0,type:"datetime"},{name:"lastPaySumm",required:!1,label:Mi["b"].t("hard.table.columns.lastPaySumm"),format:function(t){return t?Object(U["l"])(t):""},align:"right",field:"lastPaySumm",sortable:!0,type:"range"},{name:"paymentsAmount",required:!1,label:Mi["b"].t("hard.table.columns.paymentsAmount"),align:"right",field:"paymentsAmount",sortable:!0,type:"select"},{name:"suppAssignDate",required:!1,label:Mi["b"].t("hard.table.columns.suppAssignDate"),format:function(t){return Object(U["c"])(t)},align:"center",field:"suppAssignDate",sortable:!0,type:"datetime"},{name:"suppSendDate",required:!1,label:Mi["b"].t("hard.table.columns.suppSendDate"),format:function(t){return Object(U["c"])(t)},align:"center",field:"suppSendDate",sortable:!0,type:"datetime"},{name:"suppPaymantDate",required:!1,label:Mi["b"].t("hard.table.columns.suppPaymantDate"),format:function(t){return Object(U["c"])(t)},align:"center",field:"suppPaymantDate",sortable:!0,type:"datetime"},{name:"promiseDate",required:!1,label:Mi["b"].t("hard.table.columns.promiseDate"),format:function(t){return Object(U["d"])(t)},align:"center",field:"promiseDate",sortable:!0,type:"date"},{name:"promiseSumm",required:!1,label:Mi["b"].t("hard.table.columns.promiseSumm"),format:function(t){return t?Object(U["l"])(t):""},align:"right",field:"promiseSumm",sortable:!0,type:"range"},{name:"numberOfLoans",required:!1,label:Mi["b"].t("hard.table.columns.numberOfLoans"),align:"center",field:"numberOfLoans",sortable:!0,type:"select"},{name:"lastLogin",required:!1,label:Mi["b"].t("hard.table.columns.lastLogin"),format:function(t){return Object(U["c"])(t)},align:"center",field:"lastLogin",sortable:!0,type:"datetime"},{name:"secret",required:!1,label:Mi["b"].t("hard.table.columns.secret"),align:"left",field:"secret",sortable:!0,type:"string"},{name:"product",required:!1,label:Mi["b"].t("hard.table.columns.product"),align:"center",field:"product",sortable:!0,type:"select"},{name:"portfolio",required:!1,label:Mi["b"].t("hard.table.columns.portfolio"),align:"center",field:"portfolio",sortable:!0,type:"select"},{name:"lastCommunicationStatus",required:!1,label:Mi["b"].t("hard.table.columns.lastCommunicationStatus"),align:"center",field:"lastCommunicationStatus",sortable:!0,type:"select"},{name:"lastCommunicationResult",required:!1,label:Mi["b"].t("hard.table.columns.lastCommunicationResult"),align:"center",field:"lastCommunicationResult",sortable:!0,type:"select"},{name:"lastCommunicationDepartment",required:!1,label:Mi["b"].t("hard.table.columns.department"),align:"center",field:"lastCommunicationDepartment",sortable:!0,type:"select"},{name:"prolongations",required:!1,label:Mi["b"].t("hard.table.columns.prolongations"),align:"center",field:"prolongations",sortable:!0,type:"select"}],visibleColumns:["fullName","birthDate","timeZone","contract","duration","amount","summTotal","daysDelay","numberOfLoans","product","lastProcessingDate"],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:25}},Ti=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filtered-table"},[a("q-table",{staticClass:"my-sticky-header-table",attrs:{data:t.itemsFiltered,columns:t.tableOptions.columns,pagination:t.tableOptions.pagination,"visible-columns":t.tableOptions.visibleColumns,color:"WB-secondary",loading:t.loading,"row-key":"id",separator:"cell","sort-method":t.mySort,rowsPerPageOptions:[3,5,7,10,15,20,25,30,35,50,0],dark:!1},on:{"update:pagination":function(e){return t.$set(t.tableOptions,"pagination",e)}},scopedSlots:t._u([{key:"top",fn:function(e){return[a("div",{staticClass:"row items-center full-width"},[a("div",{staticClass:"col-1"},[a("div",{staticClass:"table__top-title"},[a("span",[t._v(t._s(t.title))])])]),a("div",{staticClass:"col"},[t._t("ft-filters",null,{props:e})],2)])]}},{key:"top-row",fn:function(e){return[t._t("ft-top-row",[a("q-tr",{staticClass:"hidden"},[a("q-td",{attrs:{colspan:"100%"}},[t._v(" ")])],1)],{props:t.localProps(e),items:t.itemsFiltered})]}},{key:"header",fn:function(e){return[a("TableFilters",{attrs:{props:e,filters:t.filters,columns:t.columns,"data-prop":e,items:t.items,itemsFiltered:t.itemsFiltered},on:{setFilter:t.setFilter,resetFilter:t.resetFilter}})]}},{key:"body",fn:function(e){return[t._t("ft-body",[a("q-tr",{staticClass:"hidden"},[a("q-td",{attrs:{colspan:"100%"}},[t._v(" ")])],1)],{props:t.localProps(e)})]}},{key:"bottom-row",fn:function(e){return[t._t("ft-bottom",[a("q-tr",{staticClass:"hidden"},[a("q-td",{attrs:{colspan:"100%"}},[t._v(" ")])],1)],{props:t.localProps(e)})]}},t.customLoading?{key:"loading",fn:function(){return[t._t("loading",[a("q-inner-loading",{attrs:{showing:""}})])]},proxy:!0}:null],null,!0)})],1)},Qi=[],Fi=a("278c"),Ii=a.n(Fi),Ri=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-tr",{staticClass:"table-filters"},t._l(t.props.cols,(function(e){return a("ThCustom",{key:e.name,staticClass:"q-py-xs",attrs:{props:t.props}},[a("div",{staticClass:"flex justify-between items-center no-wrap"},[a("span",{staticClass:"icon-wrapper",on:{click:function(a){e.sortable&&t.props.sort(e)}}},[e.sortable?a("IconCustom",{attrs:{props:t.iconProps(e),size:"1.1em"}}):t._e()],1),a("div",{staticClass:"text-wrapper",on:{click:function(a){e.sortable&&t.props.sort(e)}}},[t._v(t._s(e.label))]),e.type?a("span",{staticClass:"icon-wrapper",on:{click:function(a){t.show=e.name}}},[a("q-icon",{staticClass:"cursor-pointer",attrs:{color:t.filters[e.name]?"WB-primary":"grey-6",name:"fa fa-filter"}}),a("q-menu",{attrs:{value:t.show===e.name}},[a("q-card",{staticStyle:{"min-width":"300px"},attrs:{bordered:"",dark:!1}},[a("q-card-section",{staticClass:"q-py-sm"},[a("div",{staticClass:"row justify-between items-center"},[a("div",{staticClass:"flex justify-center items-center"},[a("div",{staticClass:"text-subtitle2"},[t._v(t._s(e.label))])]),a("div",{staticClass:"flex justify-center items-center"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1)])]),a("q-card-section",[["text","string"].includes(e.type)?a("StringInput",{attrs:{columns:t.columns,"column-name":e.name,"items-filtered":t.itemsFiltered,items:t.items,filters:t.filters},on:{setFilter:t.setFilter,resetFilter:t.resetFilter}}):t._e(),["range"].includes(e.type)?a("RangeInput",{attrs:{columns:t.columns,"column-name":e.name,"items-filtered":t.itemsFiltered,items:t.items,filters:t.filters},on:{setFilter:t.setFilter,resetFilter:t.resetFilter}}):t._e(),["date","datetime"].includes(e.type)?a("DateInput",{attrs:{columns:t.columns,"column-name":e.name,"column-type":e.type||"date","items-filtered":t.itemsFiltered,items:t.items,filters:t.filters},on:{setFilter:t.setFilter,resetFilter:t.resetFilter}}):t._e(),["select"].includes(e.type)?a("SelectInput",{attrs:{columns:t.columns,"column-name":e.name,"items-filtered":t.itemsFiltered,items:t.items,filters:t.filters},on:{setFilter:t.setFilter,resetFilter:t.resetFilter}}):t._e()],1),a("q-card-actions",{staticClass:"flex justify-end q-py-sm"},[a("q-btn",{attrs:{flat:"",dense:"",disable:!t.filters[e.name]},on:{click:function(a){return t.resetFilter(e.name)}}},[t._v("Сбросить")])],1)],1)],1)],1):a("span",{staticClass:"icon-wrapper"})])])})),1)},Ei=[],Li={name:"ThCustom",props:{props:Object,autoWidth:Boolean},render:function(t){if(!this.props)return t("td",{class:{"q-table-col-auto-width":this.autoWidth}},this.$slots.default);var e,a=this.$vnode.key,n=[].concat(this.$slots.default);if(a){if(e=this.props.colsMap[a],!e)return}else e=this.props.col;return t("th",{style:e.style,class:[e.__thClass,{"q-table-col-auto-width":this.autoWidth}]},n)}},Yi={name:"IconCustom",props:{props:Object,size:String},render:function(t){return t(ja["a"],{props:{name:this.props.name,color:this.props.color,size:this.size}})}},Hi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filter-string-input"},[a("q-input",{attrs:{placeholder:t.$t("hard.filterRow.value"),inverted:t.isActive,"bg-color":t.bgcolor,standout:"bg-gray-5 text-white",clearable:t.isClearable,dense:"",dark:!1},on:{input:t.onAutocompleteSearch,clear:t.onSearchClear},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1)},Ni=[],zi=a("2ef0"),Vi=a.n(zi),Gi={name:"StringInput",props:{columnName:{type:String},filters:{type:Object},columns:{type:Array,required:!0},items:{type:Array,required:!0},itemsFiltered:{type:Array,required:!0}},data:function(){return{query:null,list:[]}},created:function(){this.minLetters=3,this.debouncFilter=300,this.doDebouncedFilter=Vi.a.debounce(this.doFilter,this.debouncFilter)},mounted:function(){this.query=this.filters[this.columnName]||"",this.doRefreshList()},computed:{isActive:function(){return!!this.query&&this.query.length>=this.minLetters},filterFieldsWithoutSelf:function(){return this.getFilterFieldsWithoutSelf(this.filters)},bgcolor:function(){return this.getBgColor(this.isActive)},color:function(){return this.getColor(this.isActive)},isClearable:function(){return this.isActive}},watch:{isActive:function(){this.doDebouncedFilter()},query:function(t){this.isActive&&this.doDebouncedFilter(),t||this.onSearchClear()},filters:function(t,e){void 0===t[this.columnName]&&(this.query=null)}},methods:{getColor:function(t){return t?"white":"black"},getBgColor:function(t){return t?"WB-primary":"grey-2"},getFilterFieldsWithoutSelf:function(t){var e=Object.assign({},t);return delete e[this.columnName],e},doRefreshList:function(){var t=this,e=[];this.isActive&&(e=this.itemsFiltered.filter((function(e){return Object(U["k"])(e[t.columnName],t.query,"first")})).map((function(e){return e[t.columnName]}))),this.list=e},toLower:function(t){return Vi.a.trim(t+"").toLowerCase()},onAutocompleteSearch:function(t){var e=this;t=this.toLower(t);var a=this.itemsFiltered.filter((function(a){return Object(U["k"])(a[e.columnName],t,"first")})).map((function(t){return t[e.columnName]})),n=Vi.a.uniq(a);if(1===n.length)return[];var s=n.reduce((function(e,a){return e[a]=a.toLowerCase().indexOf(t),e}),{});n.sort(),n.sort((function(t,e){return s[t]-s[e]}));var i=n.map((function(e){var a=s[e];return e.substring(0,a)+'<span class="text-positive">'+e.substr(a,t.length)+"</span>"+e.substring(a+t.length)})),r=n.map((function(t,e){return{value:t,label:i[e]}}));return r},doFilter:function(){this.doEmitChange()},onSearchClear:function(){this.$emit("resetFilter",this.columnName)},doEmitChange:function(){var t=!!this.isActive&&this.toLower(this.query);t&&this.$emit("setFilter",z()({},this.columnName,t))}}},Ui=Gi,Zi=(a("8335"),Object(c["a"])(Ui,Hi,Ni,!1,null,null,null)),Ki=Zi.exports;d()(Zi,"components",{QInput:Ns["a"]});var Ji=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filter-select-input"},[a("div",{staticClass:"q-px-sm",attrs:{dense:""}},[a("q-checkbox",{attrs:{value:t.all,label:t.labelAll,dark:!1,color:"WB-primary"},on:{input:t.changeAll}})],1),a("q-separator"),a("q-list",{staticClass:"q-pt-none"},[a("q-scroll-area",{staticClass:"bg-grey-2",staticStyle:{height:"200px",width:"350px"}},[t._l(t.list,(function(e){return[a("q-item",{key:e.id,staticClass:"q-pl-sm",attrs:{dense:""}},[a("q-checkbox",{attrs:{color:t.countFiltered(e)>0?"WB-primary":"grey-5",val:e.label,label:(e.label||"<Пусто>")+" ("+t.countFiltered(e)+" из "+t.count(e)+")",dark:!1},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)]}))],2)],1),a("q-separator")],1)},Xi=[],tr={name:"SelectInput",props:{filters:{type:Object},columns:{type:Array},columnName:{type:String},items:{type:Array},itemsFiltered:{type:Array}},data:function(){return{selected:[],all:!1}},computed:{list:function(){var t=this,e=Object(zi["uniqBy"])(this.items,this.columnName);return Object(zi["sortBy"])(e.map((function(e){return z()({label:e[t.columnName],value:!!e[t.columnName]},t.columnName,e[t.columnName])})),[this.columnName])},labelAll:function(){return"Все (".concat(this.itemsFiltered.length," из ").concat(this.items.length,")")}},methods:{count:function(t){var e=this,a=this.items.filter((function(a){return a[e.columnName]===t[e.columnName]}));return a.length},countFiltered:function(t){var e=this,a=this.itemsFiltered.filter((function(a){return a[e.columnName]===t[e.columnName]}));return a.length},changeAll:function(t){this.all=t,!0===t?this.selected=this.list.map((function(t){return t.label})):!1===t&&(this.selected=[])}},watch:{selected:function(t,e){t.length&&(this.$emit("setFilter",z()({},this.columnName,t)),t.length===this.list.length?this.all=!0:this.all=null),!t.length&&e.length&&(this.all=!1,this.$emit("resetFilter",this.columnName))},filters:function(t){void 0===t[this.columnName]&&(this.selected=[])}},mounted:function(){void 0!==this.filters[this.columnName]&&(this.selected=this.filters[this.columnName])}},er=tr,ar=a("8f8e"),nr=Object(c["a"])(er,Ji,Xi,!1,null,"2fa5bdde",null),sr=nr.exports;d()(nr,"components",{QCheckbox:ar["a"],QSeparator:f["a"],QList:sa["a"],QScrollArea:Fe["a"],QItem:Ze["a"]});var ir=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filter-range-input"},[a("div",{staticClass:"row justify-between"},[t.hasNull?a("q-checkbox",{attrs:{label:"Не равно 0",dark:!1,color:"WB-primary"},on:{input:t.onInputNull},model:{value:t.notNull,callback:function(e){t.notNull=e},expression:"notNull"}}):t._e()],1),a("div",{staticClass:"row q-px-md"},[t.list.length?a("q-range",{attrs:{min:t.min,max:t.max,step:t.step,color:t.color,"drag-range":"",label:"",snap:"",dark:!1,color:"WB-primary"},on:{change:t.onInputRange},model:{value:t.range,callback:function(e){t.range=e},expression:"range"}}):t._e()],1),a("div",{staticClass:"row justify-between gutter-x-sm q-my-md"},[a("div",{staticClass:"col q-pr-sm"},[a("q-input",{staticClass:"filter-range-inputs__search",attrs:{type:"number",placeholder:t.min,"bg-color":t.colorValueMin,clearable:t.isClearableMin,standout:"bg-WB-primary text-white","no-icon":"",dark:!1},on:{clear:t.onValueMinClear,click:function(t){t.stopPropagation()},input:t.onInputRange},model:{value:t.range.min,callback:function(e){t.$set(t.range,"min",t._n(e))},expression:"range.min"}})],1),a("div",{staticClass:"col q-pl-sm"},[a("q-input",{staticClass:"filter-range-inputs__search filter-range-inputs__search-bottom",attrs:{type:"number",placeholder:t.max,"bg-color":t.colorValueMax,standout:"bg-WB-primary text-white",clearable:t.isClearableMax,"no-icon":"",dark:!1},on:{clear:t.onValueMaxClear,click:function(t){t.stopPropagation()},input:t.onInputRange},model:{value:t.range.max,callback:function(e){t.$set(t.range,"max",t._n(e))},expression:"range.max"}})],1)])])},rr=[];function or(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function lr(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?or(Object(a),!0).forEach((function(e){z()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):or(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var cr={name:"RangeInput",props:{columnName:{type:String},filters:{type:Object},columns:{type:Array,required:!0},items:{type:Array,required:!0},itemsFiltered:{type:Array,required:!0}},data:function(){return{range:{min:null,max:null},notNull:!1,list:[]}},created:function(){this.byStep=!1,this.debouncFilter=300,this.doDebouncedFilter=Vi.a.debounce(this.doFilter,this.debouncFilter),this.list=jt()(this.items),this.doRefreshList()},mounted:function(){void 0!==this.filters[this.columnName]&&(this.range.min=this.filters[this.columnName].min,this.range.max=this.filters[this.columnName].max)},computed:{min:function(){return this.hasValueList.length?Math.floor(Vi.a.min(this.hasValueList)):null},max:function(){return this.hasValueList.length?Math.ceil(Vi.a.max(this.hasValueList)):null},step:function(){var t=1;if(this.byStep){var e=this.max-this.min;e<1?t=e/10:e>10&&(t=Math.round(e/10))}return t},isActive:function(){return this.isActiveValueMin||this.isActiveValueMax},isActiveValueMin:function(){return null!==this.range.min&&!Vi.a.eq(1*this.range.min,this.min)},isActiveValueMax:function(){return null!==this.range.max&&!Vi.a.eq(1*this.range.max,this.max)},color:function(){return this.getColor(this.isActive)},colorValueMin:function(){return this.getColor(this.isActiveValueMin)},colorValueMax:function(){return this.getColor(this.isActiveValueMax)},isValid:function(){return null!=this.min&&null!=this.max&&Vi.a.gte(this.max,this.min+this.step)},isClearableMin:function(){return this.isActiveValueMin},isClearableMax:function(){return this.isActiveValueMax},hasNull:function(){var t=this,e=this.items.map((function(e){return e[t.columnName]})).filter((function(t){return 0===t||null===t||void 0===t}));return e.length},hasValueList:function(){var t=this,e=this.items.map((function(e){return e[t.columnName]?Number(e[t.columnName]):null})).filter((function(t){return!(null===t||void 0===t)}));return e}},watch:{isActive:function(t,e){e&&!t&&this.doEmitSearchClear()},min:function(){(null==this.range.min||Vi.a.lt(this.range.min,this.min))&&this.doSetWideMin(),void 0===this.min&&this.doEmitSearchClear()},max:function(){(null==this.range.max||Vi.a.gt(this.range.max,this.max))&&this.doSetWideMax(),void 0===this.max&&this.doEmitSearchClear()},filters:function(t){void 0===t[this.columnName]&&(this.range=Object.assign({},{min:null,max:null}),this.notNull=!1,this.list=jt()(this.items),this.doRefreshList())},isWide:function(){return!this.isActive},isValid:function(t){t||this.doEmitSearchClear()},"range.min":function(t){(Vi.a.lt(1*t,this.min)||Vi.a.gt(1*t,this.max))&&this.doSetWideMin()},"range.max":function(t){(Vi.a.lt(1*t,this.min)||Vi.a.gt(1*t,this.max))&&this.doSetWideMax()}},methods:{doRefreshList:function(){var t=this,e=this.list.length?jt()(this.items):[];this.list=Vi.a.uniq(e.filter((function(e){return null!==e[t.columnName]})).map((function(e){return e[t.columnName]}))),this.list.sort()},getColor:function(t){return t?"WB-primary":"faded"},doSetWideMax:function(){this.range.max=this.max,this.doEmitChange()},doSetWideMin:function(){this.range.min=this.min,this.doEmitChange()},doSetClearRange:function(){this.range.max=null,this.range.min=null,this.doEmitChange()},doFilter:function(){this.doEmitChange()},doEmitSearchClear:function(){this.doSetClearRange(),this.$emit("resetFilter",this.columnName)},onInputRange:function(t){null!==this.range.min&&null!==this.range.max&&this.doDebouncedFilter()},onInputNull:function(t){this.notNull=t,this.doDebouncedFilter()},doEmitChange:function(){var t=this.range,e=lr({notNull:this.notNull},t);this.isActive||this.notNull?this.$emit("setFilter",z()({},this.columnName,e)):this.isActive&&this.notNull||this.$emit("resetFilter",this.columnName)},onValueMinClear:function(){this.doSetWideMin(),this.isWide&&this.doEmitSearchClear()},onValueMaxClear:function(){this.doSetWideMax(),this.isWide&&this.doEmitSearchClear()}}},ur=cr,dr=a("7bbf"),mr=Object(c["a"])(ur,ir,rr,!1,null,null,null),pr=mr.exports;d()(mr,"components",{QCheckbox:ar["a"],QRange:dr["a"],QInput:Ns["a"]});var fr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filter-date-input"},[a("div",{staticClass:"row justify-between"},[t.hasNull?a("q-checkbox",{attrs:{label:"Не пустое",dark:!1},on:{input:t.onInputRange},model:{value:t.notNull,callback:function(e){t.notNull=e},expression:"notNull"}}):t._e()],1),a("div",{staticClass:"row justify-between q-gutter-sm"},[a("DateTimeInput",{staticClass:"col",attrs:{type:t.columnType,min:t.min,max:t.max,valueDefault:t.min,value:t.range.min,filters:t.currentFilters,purpose:"min"},on:{input:t.onInputRange,clear:t.onValueMinClear},model:{value:t.range.min,callback:function(e){t.$set(t.range,"min",e)},expression:"range.min"}}),a("DateTimeInput",{staticClass:"col",attrs:{type:t.columnType,min:t.min,max:t.max,valueDefault:t.max,value:t.range.max,filters:t.currentFilters,purpose:"max"},on:{input:t.onInputRange,clear:t.onValueMaxClear},model:{value:t.range.max,callback:function(e){t.$set(t.range,"max",e)},expression:"range.max"}})],1)])},hr=[],br=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filter-date-time-input"},[a("div",{staticClass:"row"},[a("q-input",{attrs:{placeholder:t.placeholderValue,color:t.color,"bg-color":t.bgcolor,clearable:t.isClearable,standout:"bg-gray-10 text-white","no-icon":"",dense:"",dark:!1},on:{clear:t.onValueClear,input:t.onInput},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{options:t.canChooseDates,mask:t.formatOuter,"default-year-month":t.getDefault(t.formatDate(t.valueData&&t.valueData._d,"YYYY/MM")),dark:!1,color:"WB-primary"},on:{input:t.onInputDate},model:{value:t.valueForQDatetime,callback:function(e){t.valueForQDatetime=e},expression:"valueForQDatetime"}})],1)],1)]},proxy:!0},"datetime"===t.type?{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{ref:"qTimeProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{format24h:"",mask:t.formatOuter,dark:!1,color:"WB-primary"},on:{input:t.onInputTime,dblclick:t.onInputTime},model:{value:t.valueForQDatetime,callback:function(e){t.valueForQDatetime=e},expression:"valueForQDatetime"}})],1)],1)]},proxy:!0}:null],null,!0),model:{value:t.valueForQSearch,callback:function(e){t.valueForQSearch=e},expression:"valueForQSearch"}})],1)])},gr=[],vr=a("3a60"),_r=hs["b"].formatDate,yr=hs["b"].extractDate,xr=hs["b"].isSameDate,Cr=hs["b"].adjustDate,$r={name:"FilterDateInput",props:{label:{type:String},type:{type:String},purpose:{type:String,required:!0},value:{type:String,default:null},valueDefault:{type:String},filters:{type:Object},min:{type:String},max:{type:String}},data:function(){return{valueData:this.value||this.valueDefault}},directives:{mask:vr["mask"]},created:function(){this.formatView="date"===this.type?"DD.MM.YYYY":"DD.MM.YYYY HH:mm:ss",this.formatOuter="YYYY-MM-DDTHH:mm:ssZ",this.mask={mask:["0D.1D.29DD 20:2D:DD"],tokens:{0:{pattern:/[0-3]/},1:{pattern:/[0,1]/},2:{pattern:/[1,2]/},9:{pattern:/[0,9]/},D:{pattern:/\d/}}}},mounted:function(){null==this.valueData&&void 0===this.filters&&this.doSetWide(),void 0!==this.filters&&this.filters.hasOwnProperty("min")&&this.filters.hasOwnProperty("max")&&(this.valueData=_r(this.filters[this.purpose],this.formatView))},computed:{placeholderValue:function(){return _r(this.valueData,this.formatView)},valueForQDatetime:{get:function(){return this.valueData},set:function(t){var e=new Date(t);"date"===this.type&&(e="min"===this.purpose?Cr(e,{hours:0,minutes:0,seconds:0}):Cr(e,{hours:23,minutes:59,seconds:59})),this.valueData=_r(e,this.formatOuter)}},valueForQSearch:{get:function(){return this.valueData&&this.valueData!==this.valueDefault?_r(yr(this.valueData,this.formatView),this.formatView)===this.valueData?this.valueData:_r(this.valueData,this.formatView):null},set:function(t){t&&19===t.length?this.valueData=_r(t,this.formatOuter):null===t&&this.doSetWide()}},minForQDatetime:function(){return this.min},maxForQDatetime:function(){return this.max},isActive:function(){return null!=this.valueData&&!xr(this.valueData,this.valueDefault,"second")},isWide:function(){return xr(this.valueData,this.valueDefault,"second")},color:function(){return this.getColor(this.isActive)},bgcolor:function(){return this.getBgColor(this.isActive)},isClearable:function(){return this.isActive}},watch:{filters:function(t,e){void 0===t&&(this.valueData=this.valueDefault)},valueDefault:function(){null==this.valueData&&this.doSetWide()},isValid:function(){this.isValid||this.doEmitSearchClear()}},methods:{formatDate:_r,getColor:function(t){return t?"white":"black"},getBgColor:function(t){return t?"WB-primary":"grey-2"},doSetWide:function(){this.valueData=this.valueDefault,this.doEmitChange()},doEmitSearchClear:function(){this.$emit("clear")},onInput:function(t){},onInputDate:function(t,e,a){this.$refs.qDateProxy.hide(),"date"===this.type?this.doEmitChange():this.$refs.qTimeProxy.show()},onInputTime:function(t,e,a){this.doEmitChange(),setTimeout(this.$refs.qTimeProxy.hide,250)},doEmitChange:function(){this.$emit("input",this.valueData)},onValueClear:function(){this.doSetWide()},canChooseDates:function(t){return t.includes(".")&&(t=t.split("."),t=t[2]+"/"+t[1]+"/"+t[0]),t>=_r(this.min,"YYYY/MM/DD")&&t<=_r(this.max,"YYYY/MM/DD")},getDefault:function(t){return t&&t.length>=7?_r(t,"YYYY/MM"):_r(new Date,"YYYY/MM")}}},Br=$r,qr=a("7cbe"),wr=a("52ee"),Wr=a("ca78"),kr=Object(c["a"])(Br,br,gr,!1,null,null,null),Dr=kr.exports;d()(kr,"components",{QInput:Ns["a"],QIcon:ja["a"],QPopupProxy:qr["a"],QDate:wr["a"],QTime:Wr["a"]});var Or=hs["b"].isValid,jr=hs["b"].formatDate,Sr=hs["b"].getMinDate,Pr=hs["b"].getMaxDate,Mr=hs["b"].isSameDate,Ar={name:"DateInput",props:{columnName:{type:String},columnType:{type:String},filters:{type:Object},columns:{type:Array,required:!0},items:{type:Array,required:!0},itemsFiltered:{type:Array,required:!0}},data:function(){return{range:{min:null,max:null},notNull:!1,list:[]}},components:{DateTimeInput:Dr},created:function(){this.debouncFilter=300,this.doDebouncedFilter=Vi.a.debounce(this.doFilter,this.debouncFilter),this.formatOuter="YYYY-MM-DDTHH:mm:ssZ",this.formatView="DD.MM.YYYY HH:mm:ss",this.list=this.items},computed:{rangeDefault:function(){return{notNull:!1,min:this.moment2formatOuter(this.min),max:this.moment2formatOuter(this.max)}},hasNull:function(){var t=this,e=this.list.map((function(e){return e[t.columnName]})).filter((function(t){return!t}));return e.length},hasDateList:function(){var t=this,e=this.list.map((function(e){return e[t.columnName]})).filter((function(t){return!!t})).sort((function(t,e){return t<e?-1:t>e?1:0})).map((function(t){var e=new Date;return Or(t)&&(e=new Date(t)),e}));return e},currentFilters:function(){return this.filters[this.columnName]},min:function(){return this.hasDateList.length?this.format2Date(Sr.apply(void 0,jt()(this.hasDateList))):null},max:function(){return this.hasDateList.length?this.format2Date(Pr.apply(void 0,jt()(this.hasDateList))):null},isActive:function(){return this.isActiveValueMin||this.isActiveValueMax},isActiveValueMin:function(){return null!==this.range.min&&!Mr(this.range.min,this.min,"day")},isActiveValueMax:function(){return null!==this.range.max&&!this.range.max.isSame(this.max,"day")},isValid:function(){return null!=this.min&&null!=this.max}},watch:{min:function(){void 0===this.min&&this.doEmitSearchClear()},max:function(){void 0===this.max&&this.doEmitSearchClear()},isValid:function(){this.isValid||this.doEmitSearchClear()},items:function(t){this.list=jt()(t),this.doRefreshList()},currentFilters:function(t,e){void 0===t&&(this.notNull=!1)}},methods:{format2Date:function(t){return jr(t,this.formatOuter)},doRefreshList:function(){var t=this;this.list.length||(this.list=this.list.map((function(e){return e[t.columnName]})),this.list.sort())},moment2formatOuter:function(t){return t?jr(t,this.formatOuter):""},getClearRange:function(){return{min:null,max:null}},doSetWideMax:function(){this.range.max=this.max,this.range.max&&this.doEmitChange()},doSetWideMin:function(){this.range.min=this.min,this.range.min&&this.doEmitChange()},doSetWideRange:function(){this.range.min=this.min,this.range.max=this.max,this.doEmitChange()},doSetClearRange:function(){this.range.min=null,this.range.max=null,this.doEmitChange()},doFilter:function(){this.doEmitChange()},doEmitSearchClear:function(){this.$emit("resetFilter",this.columnName)},onInputRange:function(){this.doDebouncedFilter()},doEmitChange:function(){var t=this.filters[this.columnName];null===this.range.min&&(this.range.min=t&&t.hasOwnProperty("min")?t.min:null),null===this.range.max&&(this.range.max=t&&t.hasOwnProperty("max")?t.max:null);var e={notNull:this.notNull,min:this.range.min?this.moment2formatOuter(this.range.min):this.moment2formatOuter(this.min),max:this.range.max?this.moment2formatOuter(this.range.max):this.moment2formatOuter(this.max)};JSON.stringify(e)!==JSON.stringify(this.rangeDefault)?this.$emit("setFilter",z()({},this.columnName,e)):this.doEmitSearchClear()},onValueMinClear:function(){this.doSetWideMin(),this.isActive||this.doEmitSearchClear()},onValueMaxClear:function(){this.doSetWideMax(),this.isActive||this.doEmitSearchClear()}}},Tr=Ar,Qr=Object(c["a"])(Tr,fr,hr,!1,null,null,null),Fr=Qr.exports;d()(Qr,"components",{QCheckbox:ar["a"]});var Ir={name:"TableFilters",components:{DateInput:Fr,DateTimeInput:Dr,StringInput:Ki,RangeInput:pr,IconCustom:Yi,SelectInput:sr,ThCustom:Li},props:{props:{type:Object,required:!0},filters:{type:Object,required:!0},items:{type:Array,required:!0},itemsFiltered:{type:Array,required:!0},columns:{type:Array,required:!0},column:{type:Object}},data:function(){return{show:null}},watch:{show:function(t){this.show===t&&(this.show=null)}},methods:{toggleFilters:function(t){this.show=t},iconProps:function(t){var e={name:"fa fa-sort",color:"grey"},a=t.__thClass.split(" "),n=a.includes("sort-desc"),s=a.includes("sorted");return s&&(e.name=n?"fa fa-sort-up":"fa fa-sort-down",e.color="black"),e},setFilter:function(t){this.$emit("setFilter",t)},resetFilter:function(t){this.$emit("resetFilter",t)}}},Rr=Ir,Er=(a("cd66"),a("bd08")),Lr=a("4e73"),Yr=Object(c["a"])(Rr,Ri,Ei,!1,null,"6a04ac5b",null),Hr=Yr.exports;function Nr(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function zr(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Nr(Object(a),!0).forEach((function(e){z()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Nr(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}d()(Yr,"components",{QTr:Er["a"],QIcon:ja["a"],QMenu:Lr["a"],QCard:m["a"],QCardSection:p["a"],QBtn:b["a"],QCardActions:h["a"]}),d()(Yr,"directives",{ClosePopup:Bn["a"]});var Vr=hs["b"].isValid,Gr={name:"FilteredTable",components:{TableFilters:Hr},props:{title:String,tableOptions:{type:Object,required:!0},items:{type:Array,required:!0},loading:Boolean,customLoading:{type:Boolean,required:!1,default:!1}},data:function(){return zr(zr({},this.tableOptions),{},{getShortDate:U["d"],filters:{},itemsFiltered:[]})},created:function(){this.debounceFilter=Object(j["a"])(this.doFilter,300)},watch:{items:{handler:function(t,e){this.itemsFiltered=jt()(t),t&&e&&t.length!==e.length?this.clearFilters():this.doFilter()},deep:!0,immediate:!0}},methods:{localProps:function(t){return zr(zr({},t),{},{filters:this.filters})},mySort:function(t,e,a){var n=this.columns.find((function(t){return t.name===e}));if(null===n||void 0===n.field)return t;var s=a?-1:1,i="function"===typeof n.field?function(t){return n.field(t)}:function(t){return t[n.field]};return t.sort((function(t,e){var a=i(t),r=i(e);if(null===a||void 0===a)return 1;if(null===r||void 0===r)return-1;if(n.sort)return n.sort(a,r)*s;if(Object(U["h"])(a)&&Object(U["h"])(r))return(a-r)*s;if(Vr(a)&&Vr(r))return Object(U["p"])(a,r)*s;if("boolean"===typeof a&&"boolean"===typeof r)return(t-e)*s;var o=[a,r].map((function(t){return(t+"").toLowerCase()})),l=Ii()(o,2);return a=l[0],r=l[1],a<r?-1*s:a===r?0:s}))},doFilter:function(){var t=this,e=this.items,a=this.filters,n=function(n){var s=t.columns.find((function(t){return t.name===n})).type;switch(s){case"number":case"range":e=e.filter((function(t){return Object(U["j"])(t[n],a[n])}));break;case"date":case"datetime":case"time":e=e.filter((function(t){return Object(U["i"])(t[n],a[n])}));break;case"select":e=e.filter((function(t){return a[n].includes(t[n])}));break;case"string":case"text":e=e.filter((function(t){return Object(U["k"])(t[n],a[n])}));break;default:break}};for(var s in a)n(s);this.itemsFiltered=e},setFilter:function(t){var e=Object.assign({},this.filters);this.filters=Object.assign({},e,t),this.debounceFilter()},resetFilter:function(t){var e=this.filters;void 0!==e[t]&&(delete e[t],this.filters=Object.assign({},e),this.debounceFilter())},clearFilters:function(){this.filters=Object.assign({},{})}}},Ur=Gr,Zr=(a("511a"),a("eaac")),Kr=a("db86"),Jr=Object(c["a"])(Ur,Ti,Qi,!1,null,"3f8248d8",null),Xr=Jr.exports;d()(Jr,"components",{QTable:Zr["a"],QTr:Er["a"],QTd:Kr["a"],QInnerLoading:Ys["a"]});var to=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-around items-center bottom-line"},[a("span",[t._v(t._s(t.$t("hard.table.bottom.count"))+": "),a("b",[t._v(t._s(t.infoBlock.size))])]),a("span",[t._v(t._s(t.$t("hard.table.bottom.summLoan"))+": "),a("b",[t._v(t._s(t.money(t.infoBlock.summLoan,!0)))])]),a("span",[t._v(t._s(t.$t("hard.table.bottom.summPercent"))+": "),a("b",[t._v(t._s(t.money(t.infoBlock.summPercent,!0)))])]),a("span",[t._v(t._s(t.$t("hard.table.bottom.avrDelay"))+": "),a("b",[t._v(t._s(t.infoBlock.avrDelay)+" дней")])]),a("span",[t._v(t._s(t.$t("hard.table.bottom.avrDebt"))+": "),a("b",[t._v(t._s(t.money(t.infoBlock.avrDebt,!0)))])]),a("span",[t._v(t._s(t.$t("hard.table.bottom.avrLoan"))+": "),a("b",[t._v(t._s(t.money(t.infoBlock.avrLoan,!0)))])])])},eo=[],ao={name:"HardTableBottomLine",props:{infoBlock:{type:Object,required:!0}},data:function(){return{money:U["l"]}}},no=ao,so=(a("4f27"),Object(c["a"])(no,to,eo,!1,null,"285539b9",null)),io=so.exports,ro=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table__top-buttons"},t._l(t.filters,(function(e,n){return a("FilterButton",{key:n,staticClass:"q-mr-sm",attrs:{name:e.name,label:e.label,active:t.$operatorWB.hard.activeTab,count:t.$operatorWB.hard.counts&&t.$operatorWB.hard.counts[e.name],disable:t.$operatorWB.hard.loading},on:{change:t.change}})})),1)},oo=[],lo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-btn",{attrs:{flat:t.active!==t.name,color:t.active===t.name?"WB-primary":"default",label:t.title,disable:t.disable,size:"sm"},on:{click:t.click}})},co=[],uo={name:"FilterButton",props:{name:{type:String,required:!0},label:{type:String,required:!0},active:{type:String,required:!1},disable:{type:Boolean,required:!1},count:{type:Number,required:!1}},computed:{title:function(){return this.label+(this.count?" ("+this.count+")":"")}},methods:{click:function(){this.$emit("change",this.name)}}},mo=uo,po=Object(c["a"])(mo,lo,co,!1,null,"d9236d4e",null),fo=po.exports;d()(po,"components",{QBtn:b["a"]});var ho={name:"FilterButtons",components:{FilterButton:fo},data:function(){return{filters:[{name:"all",label:this.$t("hard.filters.all")},{name:"new",label:this.$t("hard.filters.new")},{name:"unhandled",label:this.$t("hard.filters.unhandled")},{name:"promises",label:this.$t("hard.filters.promises")},{name:"modified",label:this.$t("hard.filters.modified")},{name:"agreements",label:this.$t("hard.filters.agreements")}]}},methods:{change:function(t){this.$emit("change",t)}}},bo=ho,go=Object(c["a"])(bo,ro,oo,!1,null,null,null),vo=go.exports,_o=hs["b"].isSameDate,yo={name:"HardTable",components:{FilterButtons:vo,HardTableBottomLine:io,FilteredTable:Xr,TextHighlight:Pi["a"]},data:function(){return{options:Ai,colorClass:fs["a"],queries:U["n"],openedNow:null}},computed:{items:function(){return this.$operatorWB.hard.hardList},visibleColumns:{get:function(){return this.options.visibleColumns},set:function(t){this.options=Object.assign({},this.options,{visibleColumns:t})}},translatedColumns:function(){return this.options.columns},infoBlock:function(){var t=0,e=0,a=0,n=0,s=0,i=this.$operatorWB.hard.hardList.length||0;return this.$operatorWB.hard.hardList&&this.$operatorWB.hard.hardList.length>0&&this.$operatorWB.hard.hardList.forEach((function(i){t+=+i.summLeft,e+=+i.summPercent,a+=+i.daysDelay,n+=+i.summTotal,s+=+i.amount})),{size:i,summLoan:t.toFixed(0),summPercent:e.toFixed(0),avrDelay:isFinite(a/i)?(a/i).toFixed(0):0,avrDebt:isFinite(n/i)?(n/i).toFixed(0):0,avrLoan:isFinite(s/i)?(s/i).toFixed(0):0}}},methods:{isOpenedToday:function(t){return _o(t.openedAt,new Date,"day")},lastOpened:function(t){return this.openedNow===t.id},onRowClick:function(t){this.$operatorWB.hard.loading||(this.openedNow=t.id,this.$operatorWB.hard.setOpened(t.id),this.$operatorWB.layout.openClientCard({clientId:t.id,source:"hardList",cardType:"classic"}))},changeActiveTab:function(t){this.$operatorWB.hard.setActiveTab(t),this.$operatorWB.hard.getHardList()},openCard:function(t){alert(JSON.stringify(t,null,4))}},created:function(){var t=G["a"].getItem("hard-list-columns");t&&(this.options=Object.assign({},this.options,{visibleColumns:t})),this.$operatorWB.hard.loading=!0,this.$operatorWB.hard.setActiveTab("all"),this.$operatorWB.hard.getHardList()},watch:{visibleColumns:function(t){G["a"].set("hard-list-columns",t)}}},xo=yo,Co=Object(c["a"])(xo,ji,Si,!1,null,"230d7a0c",null),$o=Co.exports;d()(Co,"components",{QTr:Er["a"],QTd:Kr["a"],QTooltip:$n["a"],QSelect:Jn["a"]});var Bo={name:"Hard",components:{HardTable:$o},created:function(){var t=this;!this.$operatorWB.layout.cancelWBOperatorDblClickNotify&&this.$q.platform.is.desktop&&Object(U["m"])({message:this.$t("wb.notify.dblClick"),color:this.$app.layout.activeColor,textColor:this.$app.layout.activeTextColor,icon:"mouse",timeout:8e3},{label:this.$t("notify.dontShowAgain"),color:this.$app.layout.activeTextColor,handler:function(){G["a"].set("cancelWBOperatorDblClickNotify",!0),t.$operatorWB.layout.cancelWBOperatorDblClickNotify=!0}})}},qo=Bo,wo=Object(c["a"])(qo,Di,Oi,!1,null,"75bd677a",null),Wo=wo.exports;d()(wo,"components",{QCard:m["a"]});var ko=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"card brx5 pretty-table q-pa-xs"},[a("PaymentsTable")],1)},Do=[],Oo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row items-center"},[a("span",{staticClass:"q-mr-sm"},[t._v(t._s(t.$t("global.date.from"))+":")]),a("q-input",{staticClass:"comments__calc-date date-picker q-mr-md",attrs:{format:t.format,dark:!1,dense:"",outlined:"",readonly:""},model:{value:t.fromVal,callback:function(e){t.fromVal=e},expression:"fromVal"}},[a("q-popup-proxy",{ref:"qDateProxyFrom",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{options:t.canChooseDates,mask:t.format,color:"WB-primary",dark:!1},on:{input:function(){return t.$refs.qDateProxyFrom.hide()}},model:{value:t.fromVal,callback:function(e){t.fromVal=e},expression:"fromVal"}})],1),a("template",{slot:"append"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}})],1)],2),a("span",{staticClass:"q-mr-sm"},[t._v(t._s(t.$t("global.date.to"))+":")]),a("q-input",{staticClass:"comments__calc-date date-picker q-mr-md",attrs:{format:t.format,dark:!1,dense:"",outlined:"",readonly:""},model:{value:t.toVal,callback:function(e){t.toVal=e},expression:"toVal"}},[a("q-popup-proxy",{ref:"qDateProxyTo",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{options:t.canChooseDates,mask:t.format,color:"WB-primary",dark:!1},on:{input:function(){return t.$refs.qDateProxyTo.hide()}},model:{value:t.toVal,callback:function(e){t.toVal=e},expression:"toVal"}})],1),a("template",{slot:"append"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}})],1)],2),a("q-btn",{attrs:{label:t.$t("global.buttons.load"),size:"sm",color:"WB-primary"},on:{click:t.submit}})],1)},jo=[],So=hs["b"].formatDate,Po=hs["b"].extractDate,Mo={name:"PeriodSelector",props:{min:{type:Date,required:!0},max:{type:Date,required:!0},from:{type:Date,required:!0},to:{type:Date,required:!0},format:{type:String,default:"DD.MM.YYYY"}},computed:{fromVal:{get:function(){return So(this.from,this.format)},set:function(t){this.$emit("change","from",Po(t,this.format))}},toVal:{get:function(){return So(this.to,this.format)},set:function(t){this.$emit("change","to",Po(t,this.format))}}},methods:{submit:function(){this.$emit("submit")},canChooseDates:function(t){return t.includes(".")&&(t=t.split("."),t="20"+t[2]+"/"+t[1]+"/"+t[0]),t>=So(this.min,"YYYY/MM/DD")&&t<=So(this.max,"YYYY/MM/DD")}}},Ao=Mo,To=Object(c["a"])(Ao,Oo,jo,!1,null,"e17e4e0a",null),Qo=To.exports;d()(To,"components",{QInput:Ns["a"],QPopupProxy:qr["a"],QDate:wr["a"],QIcon:ja["a"],QBtn:b["a"]});var Fo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pretty-table__wrapper q-pa-xs"},[a("FilteredTable",{attrs:{items:t.items,"table-options":t.options,loading:t.$operatorWB.payments.loading,title:"Платежи"},scopedSlots:t._u([{key:"ft-top-row",fn:function(e){return[a("q-tr",{staticClass:"total bg-grey-3"},[a("q-td",{staticClass:"columns",attrs:{colspan:"2"}},[t._v("Итого:")]),a("q-td",{staticClass:"columns"},[t._v(t._s(t.money(t.total(e.items).paid)))]),a("q-td",{staticClass:"columns"},[t._v(t._s(t.money(t.total(e.items).debt)))]),a("q-td",{staticClass:"columns"},[t._v(t._s(t.total(e.items).delay))]),t.$operatorWB.user.isUserHaveRoles("operatorSoft")?a("q-td",{staticClass:"columns"},[t._v(" ")]):t._e()],1)]}},{key:"ft-filters",fn:function(e){return[a("div",{staticClass:"row items-center"},[a("PeriodSelector",{staticClass:"table__top-title",attrs:{from:t.$operatorWB.payments.period.from,to:t.$operatorWB.payments.period.to,min:t.$operatorWB.payments.period.min,max:t.$operatorWB.payments.period.max},on:{change:t.$operatorWB.payments.setPaymentsPeriods,submit:t.$operatorWB.payments.getPayments}})],1)]}},{key:"ft-body",fn:function(e){return[a("q-tr",{staticClass:"pretty-table__row cursor-pointer",attrs:{props:e.props,"data-prop":e.props},nativeOn:{dblclick:function(a){!t.$operatorWB.payments.loading&&t.openModal(e.props.row)}}},t._l(e.props.cols,(function(n){return!t.$operatorWB.user.isUserHaveRoles("operatorSoft")&&n.name,a("q-td",{key:n.name,staticClass:"columns",attrs:{props:e.props,"row-key":"clientId"}},[["string","text"].includes(n.type)?[a("TextHighlight",{attrs:{queries:t.queries(e.props.filters,n.name,n.value)}},[t._v(t._s(n.value))])]:"datetime"===n.type?[n.value?a("span",[t._v(t._s(n.value.split(" ")[0])+"\n "),a("small",{staticClass:"text-blue-grey-9"},[t._v(t._s(n.value.split(" ")[1]))])]):t._e()]:[a("span",[t._v(t._s(n.value))])]],2)})),1)]}}])})],1)},Io=[],Ro={columns:[{name:"name",label:"ФИО",align:"left",field:"name",sortable:!0,type:"text"},{name:"date",label:"Дата",align:"center",field:"date",format:function(t){return Object(U["c"])(t)},sortable:!0,style:"width: 10%",type:"datetime"},{name:"paid",label:"Погашено",align:"right",field:"paid",format:function(t){return Object(U["l"])(t)},sortable:!0,style:"width: 10%",type:"range"},{name:"currentDebt",label:"Общий долг",align:"right",field:"currentDebt",format:function(t){return Object(U["l"])(t)},sortable:!0,style:"width: 10%",type:"range"},{name:"delay",label:"Дней просрочки",align:"right",field:"delay",sortable:!0,style:"width: 10%",type:"range"},{name:"group",label:"Группа",align:"left",field:"group",sortable:!0,style:"width: 5%",type:"select"}],separator:"horizontal",pagination:{sortBy:"date",descending:!0,page:1,rowsPerPage:25}};function Eo(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function Lo(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Eo(Object(a),!0).forEach((function(e){z()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Eo(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Yo={name:"PaymentsTable",components:{FilteredTable:Xr,PeriodSelector:Qo,TextHighlight:Pi["a"]},data:function(){return{options:Lo({},Ro),money:U["l"],queries:U["n"]}},computed:{items:function(){return jt()(this.$operatorWB.payments.list).map((function(t){return{clientId:t.clientId,delay:t.delay,name:t.clientName,currentDebt:t.currentDebt,date:t.payment.paidAt,paid:t.payment.amount,group:t.group?t.group.name:null}}))}},methods:{openModal:function(t){this.$operatorWB.layout.openClientCard({clientId:t.clientId,source:"paymentsList",cardType:"classic"})},total:function(t){return jt()(t).reduce((function(t,e){return t.paid+=e.paid,t.debt+=e.currentDebt,t.delay=e.delay>t.delay?e.delay:t.delay,t}),{debt:0,delay:0,paid:0})}},mounted:function(){this.$operatorWB.user.rights.payments&&this.$operatorWB.payments.getPayments();var t=jt()(Ro.columns);this.$operatorWB.user.isUserHaveRoles("operatorSoft")||t.splice(-1,1),this.options.columns=jt()(t)}},Ho=Yo,No=Object(c["a"])(Ho,Fo,Io,!1,null,"0746f498",null),zo=No.exports;d()(No,"components",{QTr:Er["a"],QTd:Kr["a"]});var Vo={name:"PaymentsReport",components:{PaymentsTable:zo,PeriodSelector:Qo},data:function(){return{getQuarter:fs["f"],getBeforeQuarterStart:fs["e"]}}},Go=Vo,Uo=Object(c["a"])(Go,ko,Do,!1,null,"40b43cbc",null),Zo=Uo.exports;d()(Uo,"components",{QCard:m["a"]});var Ko=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modals"},[t.$operatorWB.layout.clientCardModalOpened?a("ClientCardModal"):t._e()],1)},Jo=[],Xo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{ref:"clientCardModalRef",staticClass:"client-card-modal",attrs:{"content-class":"operatorWB__dialog operatorWB__card-dialog","no-esc-dismiss":"",maximized:""},model:{value:t.$operatorWB.layout.clientCardModalOpened,callback:function(e){t.$set(t.$operatorWB.layout,"clientCardModalOpened",e)},expression:"$operatorWB.layout.clientCardModalOpened"}},[a("q-layout",{ref:"layoutForDeleteTabindex",staticClass:"full-width flex items-end",staticStyle:{height:"calc(100vh - 82px)",width:"100vw",overflow:"auto !important"},attrs:{container:""}},[a("ClientCard",{staticClass:"full-width"})],1)],1)},tl=[],el=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-card"},[a("q-card",{staticClass:"bg-WB-dark client-card brs5 shadow-up-2"},[a("q-card-section",{staticClass:"q-pa-none client-card__title"},[a("ClientHeader")],1),a("q-card-section",{staticClass:"q-pa-none client-card__main"},[a("Borrower"),"half"===t.size?a("Communication"):t._e(),"communications"===t.view?a("CommunicationsHistory"):t._e(),"accruals"===t.view?a("AccrualsHistory"):t._e(),"payments"===t.view?a("PaymentsHistory"):t._e(),"loans"===t.view?a("LoansHistory"):t._e(),"promises"===t.view?a("PromisesHistory"):t._e(),"agreements"===t.view?a("AgreementsHistory"):t._e(),"purchases"===t.view?a("PurchasesHistory"):t._e()],1)],1)],1)},al=[],nl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[a("div",{staticClass:"card__header flex items-center justify-between q-pa-none"},[a("div",{staticClass:"q-pa-none flex items-center justify-between"},[t.$operatorWB.layout.isApplicationCard?[a("div",{staticClass:"card__header-text card__header-text_bordered q-pr-md"},[a("span",[t._v("Заявка №")]),a("span",[t._v(t._s(t.$operatorWB.applications.get("item.externalId")))])]),a("div",{staticClass:"card__header-text card__header-text_bordered q-px-md"},[a("span",{staticClass:"text-profile"},[t._v("Статус:")]),a("span",{class:{"text-positive":1300===t.$operatorWB.applications.get("item.status.code"),"text-negative":1400===t.$operatorWB.applications.get("item.status.code")}},[t._v(t._s(t.$operatorWB.applications.get("item.status.description"))+" ("+t._s(t.$operatorWB.applications.get("item.status.code"))+")")])]),a("div",{staticClass:"card__header-text card__header-text_bordered q-px-md"},[a("span",{staticClass:"text-profile"},[t._v("Ответственный:")]),a("Underwriter")],1)]:[t.loan?[t.loan.hasOwnProperty("contract")?a("div",{staticClass:"card__header-text card__header-text_bordered q-pr-md"},[a("span",[t._v(t._s(t.$t("clients.card.header.contract"))+":")]),a("span",[t._v("№ "+t._s(t.loan.contract))])]):t._e(),"pos"===t.loan.product?a("div",{staticClass:"card__header-text card__header-text_bordered q-pr-md"},[a("span",[t._v(t._s(t.$t("clients.card.header.client"))+":")]),a("span",[t._v(t._s(t.client&&t.client.login))])]):t._e(),t.loan.hasOwnProperty("portfolio")?a("div",{staticClass:"card__header-text card__header-text_bordered q-px-md"},[a("span",{staticClass:"text-profile"},[t._v(t._s(t.$t("clients.card.header.portfolio"))+":")]),a("Portfolio")],1):t._e(),t.loan.hasOwnProperty("status")?a("div",{staticClass:"card__header-text card__header-text_bordered q-px-md"},[a("span",{staticClass:"text-profile"},[t._v(t._s(t.$t("clients.card.header.statusOfContract"))+":")]),a("span",[t._v(" "+t._s(t.loan.status.message))])]):t._e(),t.loan?a("div",{staticClass:"card__header-text card__header-text_bordered q-px-md"},[a("span",{staticClass:"text-profile"},[t._v(t._s(t.$t("clients.card.header.agreement"))+":")]),t.loan.activeAgreement?["installment"===t.loan.activeAgreement.type?a("span",[t._v(t._s(t.$t("loans.agreements.installment")))]):"renewal"===t.loan.activeAgreement.type?a("span",[t._v(t._s(t.$t("loans.agreements.renewal")))]):a("span",[t._v(t._s(t.$t("loans.agreements.additionalAgreement")))])]:[a("span",[t._v(t._s(t.$t("loans.agreements.missing")))])]],2):t._e(),t.client&&t.client.hasOwnProperty("communications")&&t.client.communications.length?a("div",{staticClass:"card__header-text card__header-text_pad"},[a("span",{staticClass:"text-profile"},[t._v(t._s(t.$t("clients.card.header.lastCommunication"))+":")]),a("q-icon",{staticClass:"q-ml-xs",attrs:{name:"assignment",size:"25px"}},[a("q-tooltip",{staticStyle:{"min-width":"100px","max-width":"500px"},attrs:{anchor:"bottom right",self:"top right"}},[a("div",{staticClass:"q-pa-none"},[a("span",[t._v(t._s(t.$t("clients.card.header.lastCommunicationDetails.operator"))+": ")]),a("span",[t._v(t._s(t.$operatorWB.clients.currentAssigned||t.$t("clients.card.header.unknown")))])]),a("div",{staticClass:"q-pa-none"},[a("span",[t._v(t._s(t.$t("clients.card.header.lastCommunicationDetails.status"))+": ")]),a("span",[t._v(t._s(t.$t("communications.status."+t.$operatorWB.clients.currentLastCommunicationStatus)))])]),a("div",{staticClass:"q-pa-none"},[a("span",[t._v(t._s(t.$t("clients.card.header.lastCommunicationDetails.result"))+": ")]),["smsToClient","emailToClient"].includes(t.$operatorWB.clients.currentLastCommunicationStatus)?a("span",[t._v(t._s("smsToClient"===t.$operatorWB.clients.currentLastCommunicationStatus?t.$t("communications.sms.templates."+t.$operatorWB.clients.currentLastCommunicationResult):t.$t("communications.email.templates."+t.$operatorWB.clients.currentLastCommunicationResult)))]):a("span",[t._v(t._s(t.$t("communications.result."+t.$operatorWB.clients.currentLastCommunicationResult)))])])])],1)],1):t._e()]:t._e()]],2),t.$operatorWB.layout.isApplicationCard?a("div",{staticClass:"q-pa-none flex items-center justify-end"},[a("q-btn",{staticClass:"q-ml-md",attrs:{label:"Открыть классическую карту",color:"green","text-color":"black",size:"12px",dense:""},on:{click:function(e){return t.$operatorWB.layout.openClientCard({clientId:t.client.id,source:"applicationCardHeader",cardType:"classic"})}}})],1):a("div",{staticClass:"q-pa-none flex items-center justify-between"},[a("div",{staticClass:"card__header-text q-px-md"},[t._v(t._s(t.$t("clients.card.header.totalDebt"))+":"),a("span",{staticClass:"info"},[t._v(t._s(t.money(t.$operatorWB.clients.currentFullDebt,!0)))])]),t._l(t.$operatorWB.clients.currentLoansDebt,(function(e){return a("q-radio",{key:e.id,staticClass:"card__header-radio q-pa-sm",attrs:{val:e.id,color:"green",name:"money",label:t.loanProduct(e),dense:"",dark:""},on:{input:function(a){return t.checkSmsForm(e.product)}},model:{value:t.$operatorWB.loans.current,callback:function(e){t.$set(t.$operatorWB.loans,"current",e)},expression:"$operatorWB.loans.current"}})}))],2)])])},sl=[],il=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"portfolio",class:t.$operatorWB.user.isUserSupervisor?"cursor-pointer":""},[t._v(t._s(t.currentPortfolio)),t.$operatorWB.user.isUserSupervisor?a("SubMenu",{attrs:{label:"Выберите новый портфель"},on:{openDialog:function(e){t.showPortfolioDialog=!0}}}):t._e(),a("ChooseDialog",{attrs:{show:t.showPortfolioDialog,title:"Выбор нового портфеля",optionsForSelect:t.groupsForSelect,placeholder:"Начните набирать название портфеля"},on:{close:function(e){t.showPortfolioDialog=!1},openAreYouSureDialog:t.openAreYouSureDialog}}),a("AreYouSureDialog",{attrs:{show:t.showAreYouSureDialog,item:t.newGroup,question:"Вы уверены, что хотите изменить портфель текущего займа на <strong style='color: red'>"+t.newGroup.label+"</strong>?",func:t.$operatorWB.loans.changePortfolio,loading:t.$operatorWB.loans.loading},on:{close:function(e){t.showAreYouSureDialog=!1},closeParent:function(e){t.showPortfolioDialog=!1}}})],1)},rl=[],ol=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-menu",{ref:"qMenu",attrs:{"touch-position":""}},[a("q-btn",{attrs:{label:t.label,color:"WB-primary"},on:{click:t.openDialog}})],1)},ll=[],cl={name:"SubMenu",props:{label:{type:String,default:""}},data:function(){return{dialog:!1}},computed:{},methods:{openDialog:function(){this.$refs.qMenu.hide(),this.$emit("openDialog")}}},ul=cl,dl=Object(c["a"])(ul,ol,ll,!1,null,"6aa03f0c",null),ml=dl.exports;d()(dl,"components",{QMenu:Lr["a"],QBtn:b["a"]});var pl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{attrs:{value:t.show},on:{hide:t.closeDialog}},[a("q-card",{staticClass:"modal-content"},[a("q-card-section",[a("div",{staticClass:"font-size-large"},[t._v(t._s(t.title))])]),t.$operatorWB.layout.isApplicationCard&&t.$operatorWB.user.profile.userId!==(t.$operatorWB.applications.get("item.underwriter")&&t.$operatorWB.applications.get("item.underwriter.id"))?a("q-card-section",{staticClass:"flex justify-center"},[a("q-btn",{attrs:{label:"Назначить ответственным себя",color:"WB-primary"},on:{click:t.makeMyselfUnderwriter}})],1):t._e(),a("q-card-section",[a("q-select",{staticClass:"min-w-300px",attrs:{options:t.options,placeholder:t.placeholder,loading:t.$operatorWB.user.loading.groups,"bg-color":"WB-primary","use-input":"","hide-selected":"","fill-input":"","hide-dropdown-icon":"",dense:"","options-dense":"",standout:"",clearable:""},on:{filter:t.filterFn},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn-group",{staticClass:"modal__buttons w100p flex justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"modal__btn",attrs:{label:"Отмена"}}),a("q-btn",{staticClass:"modal__btn",attrs:{label:"Изменить",disable:!t.model},on:{click:t.openAreYouSureDialog}})],1)],1)],1)],1)},fl=[],hl={name:"ChooseDialog",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},optionsForSelect:{type:Array,default:function(){return[]}},placeholder:{type:String,default:""}},data:function(){return{dialog:!1,model:null,options:[]}},methods:{closeDialog:function(){this.model=null,this.$emit("close")},filterFn:function(t,e,a){var n=this;return Gn()(zn.a.mark((function a(){return zn.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n.options=n.optionsForSelect.filter((function(e){return e.label.toLowerCase().includes(t.toLowerCase())})),e();case 2:case"end":return a.stop()}}),a)})))()},openAreYouSureDialog:function(){this.$emit("openAreYouSureDialog",this.model)},makeMyselfUnderwriter:function(){this.model={label:this.$operatorWB.user.fullNameByLastName,value:this.$operatorWB.user.profile.userId},this.openAreYouSureDialog()}}},bl=hl,gl=(a("a700"),Object(c["a"])(bl,pl,fl,!1,null,"27d1a42a",null)),vl=gl.exports;d()(gl,"components",{QDialog:$t["a"],QCard:m["a"],QCardSection:p["a"],QBtn:b["a"],QSelect:Jn["a"],QCardActions:h["a"],QBtnGroup:Za["a"]}),d()(gl,"directives",{ClosePopup:Bn["a"]});var _l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{ref:"areYouSureDialog",attrs:{value:t.show,persistent:""},on:{hide:function(e){return t.$emit("close")}}},[a("q-card",{staticClass:"modal-content"},[a("q-card-section",{staticClass:"q-pb-none"},[a("div",{staticClass:"modal__title q-mb-sm",domProps:{innerHTML:t._s(t.question)}})]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn-group",{staticClass:"modal__buttons w100p flex justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"modal__btn",attrs:{label:"Нет, отменить",loading:t.loading,disable:t.loading}}),a("q-btn",{staticClass:"modal__btn",attrs:{label:"Да, уверен",loading:t.loading,disable:t.loading},on:{click:t.doAction}})],1)],1)],1)],1)},yl=[],xl={name:"AreYouSureDialog",props:{show:{type:Boolean,default:!1},item:{type:Object,required:!0},question:{type:String,required:!0},func:{type:Function,required:!0},loading:{type:Boolean,default:!1}},methods:{doAction:function(){var t=this;return Gn()(zn.a.mark((function e(){return zn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.func(t.item);case 2:t.$refs.areYouSureDialog.hide(),t.$emit("closeParent");case 4:case"end":return e.stop()}}),e)})))()}}},Cl=xl,$l=(a("86d8"),Object(c["a"])(Cl,_l,yl,!1,null,"7918be2d",null)),Bl=$l.exports;d()($l,"components",{QDialog:$t["a"],QCard:m["a"],QCardSection:p["a"],QCardActions:h["a"],QBtnGroup:Za["a"],QBtn:b["a"]}),d()($l,"directives",{ClosePopup:Bn["a"]});var ql={name:"Portfolio",components:{AreYouSureDialog:Bl,ChooseDialog:vl,SubMenu:ml},data:function(){return{showPortfolioDialog:!1,showAreYouSureDialog:!1,newGroup:{}}},computed:{loan:function(){return this.$operatorWB.loans.currentLoan},currentPortfolio:function(){return this.$operatorWB.clients.currentLoansDebt.length>0&&this.loan&&this.loan.hasOwnProperty("portfolio")?this.loan.portfolio:this.$t("loans.portfolio.unknown")},groupsForSelect:function(){return this.$operatorWB.user.groups&&this.$operatorWB.user.groups.length?this.$operatorWB.user.groups.map((function(t){return{label:t.name,value:t.id}})):[]}},methods:{openAreYouSureDialog:function(t){this.newGroup=t,this.showAreYouSureDialog=!0}}},wl=ql,Wl=Object(c["a"])(wl,il,rl,!1,null,"2cec85d4",null),kl=Wl.exports,Dl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"underwriter cursor-pointer"},[t._v(t._s(t.$operatorWB.applications.get("item.underwriter")&&t.$operatorWB.applications.get("item.underwriter.fullName")||"не назначен")),a("SubMenu",{attrs:{label:"Изменить ответственного"},on:{openDialog:function(e){t.showUnderwritersDialog=!0}}}),a("ChooseDialog",{attrs:{show:t.showUnderwritersDialog,title:"Выбор ответственного по заявке",optionsForSelect:t.underwritersForSelect,placeholder:"Начните набирать фамилию андеррайтера"},on:{close:function(e){t.showUnderwritersDialog=!1},openAreYouSureDialog:t.openAreYouSureDialog}}),a("AreYouSureDialog",{attrs:{show:t.showAreYouSureDialog,item:t.newUnderwriter,question:"Вы уверены, что хотите изменить ответственного на <strong style='color: red'>"+t.newUnderwriter.label+"</strong>?",func:t.changeUnderwriter,loading:t.$operatorWB.applications.get("loading.item")},on:{close:function(e){t.showAreYouSureDialog=!1},closeParent:function(e){t.showUnderwritersDialog=!1}}})],1)},Ol=[],jl={name:"Underwriter",components:{AreYouSureDialog:Bl,ChooseDialog:vl,SubMenu:ml},data:function(){return{showUnderwritersDialog:!1,showAreYouSureDialog:!1,newUnderwriter:{}}},computed:{underwritersForSelect:function(){return this.$operatorWB.user.allEmployeesUnder&&this.$operatorWB.user.allEmployeesUnder.length?this.$operatorWB.user.allEmployeesUnder.map((function(t){return{label:t.fullName,value:t.id}})):[]}},methods:{openAreYouSureDialog:function(t){this.newUnderwriter=t,this.showAreYouSureDialog=!0},changeUnderwriter:function(t){this.$operatorWB.applications.changeUnderwriter({applicationId:this.$operatorWB.applications.get("item.id"),underwriterId:t.value})}}},Sl=jl,Pl=Object(c["a"])(Sl,Dl,Ol,!1,null,"5419dc31",null),Ml=Pl.exports,Al={name:"ClientCardHeader",components:{Underwriter:Ml,Portfolio:kl},data:function(){return{money:U["l"]}},computed:{loan:function(){return this.$operatorWB.loans.currentLoan},client:function(){return this.$operatorWB.clients.currentClient}},methods:{loanProduct:function(t){return t&&this.$t("loans.product."+t.product)+": "+Object(U["l"])(t.total,!0)},checkSmsForm:function(t){"pos"===t&&(this.$operatorWB.communication.currentForm="result")}}},Tl=Al,Ql=Object(c["a"])(Tl,nl,sl,!1,null,"3fbc8c9e",null),Fl=Ql.exports;d()(Ql,"components",{QIcon:ja["a"],QTooltip:$n["a"],QBtn:b["a"],QRadio:Fs["a"]});var Il=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"column borrower ovh card-block"},[a("div",{staticClass:"row profile-block q-ml-xs"},[a("div",{staticClass:"col main",class:t.$operatorWB.layout.isApplicationCard?"q-pr-sm":""},[a("Profile",{attrs:{client:t.clientInfo}})],1),t.$operatorWB.layout.isApplicationCard?t._e():a("div",{staticClass:"col debt q-mr-xs"},[a("Debt")],1)])])},Rl=[],El=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"card brs5 ovh profile-block q-ml-xs"},[a("q-card-section",{staticClass:"q-pa-none"},[a("div",{staticClass:"card__title flex justify-between items-center"},[a("div",{staticClass:"card__title-left flex"},[a("div",{staticClass:"card__title-loaner"},[t._v(t._s(t.$t("clients.card.main.borrower")))]),t.client?a("Clock",{staticClass:"card__title-city",attrs:{timeZone:t.client.timeZone}}):t._e()],1),a("div",{staticClass:"card__title-right flex"},[a("div",{staticClass:"q-pa-none"},[a("span",{staticClass:"q-mr-sm"},[t._v(t._s(t.$t("clients.card.main.lastLogin"))+":")]),a("strong",{staticClass:"text-amber-9"},[t._v(t._s(t.clientLastLogin))])])])])]),t.client?a("q-card-section",{staticClass:"card__content q-pa-none"},[a("div",{staticClass:"card__profile flex"},[a("div",{staticClass:"card__profile-left"},[a("div",{staticClass:"card__row flex items-center justify-between"},[a("div",{staticClass:"card__row-left"},[t._v(t._s(t.$t("clients.labels.name")))]),a("div",{staticClass:"card__row-right name"},[a("q-icon",{attrs:{name:t.clientGenderClass,color:t.clientGenderColor}}),t.currentCard&&t.currentCard.isEditing?[a("div",{staticClass:"flex justify-between items-center full-width"},[a("q-input",{staticClass:"input-for-profile",attrs:{outlined:"",color:"WB-warning-color",placeholder:"Фамилия"},model:{value:t.client.lastName,callback:function(e){t.$set(t.client,"lastName",e)},expression:"client.lastName"}}),a("q-input",{staticClass:"input-for-profile",attrs:{outlined:"",color:"WB-warning-color",placeholder:"Имя"},model:{value:t.client.firstName,callback:function(e){t.$set(t.client,"firstName",e)},expression:"client.firstName"}}),a("q-input",{staticClass:"input-for-profile",attrs:{outlined:"",color:"WB-warning-color",placeholder:"Отчество"},model:{value:t.client.middleName,callback:function(e){t.$set(t.client,"middleName",e)},expression:"client.middleName"}})],1)]:[a("span",[t._v(t._s(t.clientName))])]],2)]),a("div",{staticClass:"card__row flex items-center justify-between"},[a("div",{staticClass:"card__row-left"},[t._v(t._s(t.$t("clients.labels.birthDate")))]),a("div",{staticClass:"card__row-right"},[t.currentCard&&t.currentCard.isEditing?[a("div",{staticClass:"flex justify-between"},[a("q-input",{staticClass:"date-picker input-for-profile",attrs:{format:"DD.MM.YYYY",outlined:"",readonly:""},model:{value:t.birthDate,callback:function(e){t.birthDate=e},expression:"birthDate"}},[a("template",{slot:"append"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy2",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{"default-year-month":t.defaultDate(t.birthDate),mask:"DD.MM.YYYY"},on:{input:function(e){return t.hideQDate("qDateProxy2","birthDate")}},model:{value:t.birthDate,callback:function(e){t.birthDate=e},expression:"birthDate"}})],1)],1)],1)],2),a("div",{staticClass:"text-center"},[t._v("полных лет "+t._s(t.yearsFromNow))])],1)]:[a("span",[t._v(t._s(t.clientBirthDate)+" (полных лет "+t._s(t.client.age)+")")])]],2)]),a("div",{staticClass:"card__row mh40 flex justify-between"},[a("div",{staticClass:"card__row-left"},[t._v(t._s(t.$t("clients.labels.address")))]),a("div",{staticClass:"card__row-right flex"},[t.currentCard&&t.currentCard.isEditing?[a("div",{staticClass:"flex justify-between items-start full-width"},[a("q-input",{staticClass:"input-for-profile smaller-input",attrs:{type:"number",outlined:"",color:"WB-warning-color",placeholder:"Индекс"},model:{value:t.client.homeAddress&&t.client.homeAddress.postalCode,callback:function(e){t.$set(t.client.homeAddress&&t.client.homeAddress,"postalCode",e)},expression:"client.homeAddress && client.homeAddress.postalCode"}}),a("q-input",{staticClass:"input-for-profile smaller-input",attrs:{outlined:"",color:"WB-warning-color",placeholder:"Город"},model:{value:t.client.homeAddress&&t.client.homeAddress.city,callback:function(e){t.$set(t.client.homeAddress&&t.client.homeAddress,"city",e)},expression:"client.homeAddress && client.homeAddress.city"}}),a("q-input",{staticClass:"input-for-profile smaller-input",attrs:{outlined:"",color:"WB-warning-color",placeholder:"Улица"},model:{value:t.client.homeAddress&&t.client.homeAddress.street,callback:function(e){t.$set(t.client.homeAddress&&t.client.homeAddress,"street",e)},expression:"client.homeAddress && client.homeAddress.street"}})],1),a("div",{staticClass:"flex justify-between items-end full-width"},[a("q-input",{staticClass:"input-for-profile smaller-input",attrs:{outlined:"",color:"WB-warning-color",placeholder:"Дом"},model:{value:t.client.homeAddress&&t.client.homeAddress.house,callback:function(e){t.$set(t.client.homeAddress&&t.client.homeAddress,"house",e)},expression:"client.homeAddress && client.homeAddress.house"}}),a("q-input",{staticClass:"input-for-profile smaller-input",attrs:{outlined:"",color:"WB-warning-color",placeholder:"Строение"},model:{value:t.client.homeAddress&&t.client.homeAddress.building,callback:function(e){t.$set(t.client.homeAddress&&t.client.homeAddress,"building",e)},expression:"client.homeAddress && client.homeAddress.building"}}),a("q-input",{staticClass:"input-for-profile smaller-input",attrs:{outlined:"",color:"WB-warning-color",placeholder:"Квартира"},model:{value:t.client.homeAddress&&t.client.homeAddress.flat,callback:function(e){t.$set(t.client.homeAddress&&t.client.homeAddress,"flat",e)},expression:"client.homeAddress && client.homeAddress.flat"}})],1)]:[a("span",[t._v(t._s(t.clientAddress))])]],2)]),a("div",{staticClass:"card__row mh40 flex justify-between",class:t.currentCard&&t.currentCard.isEditing?"xs-padding":""},[a("div",{staticClass:"card__row-left flex items-center"},[t._v(t._s(t.$t("clients.labels.passport")))]),a("div",{staticClass:"card__row-right"},[t.currentCard&&t.currentCard.isEditing?[a("div",{staticClass:"flex justify-between items-center full-width full-height"},[a("div",{staticClass:"q-pa-none"},[a("div",{staticClass:"text-WB-text-profile-color font-size-sm q-pb-xs"},[t._v("Серия и номер")]),a("q-input",{staticClass:"input-for-profile",attrs:{type:"number",outlined:"",color:"WB-warning-color"},model:{value:t.client.passport.number,callback:function(e){t.$set(t.client.passport,"number",e)},expression:"client.passport.number"}})],1),a("div",{staticClass:"q-pa-none"},[a("div",{staticClass:"text-WB-text-profile-color font-size-sm q-pb-xs"},[t._v("Дата выдачи")]),a("q-input",{staticClass:"date-picker input-for-profile",attrs:{format:"DD.MM.YYYY",outlined:"",readonly:""},model:{value:t.issuedAt,callback:function(e){t.issuedAt=e},expression:"issuedAt"}},[a("template",{slot:"append"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy4",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{"default-year-month":t.defaultDate(t.issuedAt),mask:"DD.MM.YYYY"},on:{input:function(e){return t.hideQDate("qDateProxy4")}},model:{value:t.issuedAt,callback:function(e){t.issuedAt=e},expression:"issuedAt"}})],1)],1)],1)],2)],1),a("div",{staticClass:"q-pa-none"},[a("div",{staticClass:"text-WB-text-profile-color font-size-sm q-pb-xs"},[t._v("Код подразделения")]),a("q-input",{staticClass:"input-for-profile",attrs:{outlined:"",color:"WB-warning-color"},model:{value:t.client.passport.dept,callback:function(e){t.$set(t.client.passport,"dept",e)},expression:"client.passport.dept"}})],1)])]:[a("span",[t._v(t._s(t.clientPassport))])]],2)]),a("div",{staticClass:"card__row flex justify-between"},[a("div",{staticClass:"card__row-left"},[t._v(t._s(t.$t("clients.labels.phone")))]),a("div",{staticClass:"card__row-right"},[t.isApplicationCard?[a("div",{staticClass:"phone-for-application"},[t._v(t._s(t.client.phone))])]:[a("Phones",{attrs:{profile:t.client.profile}})]],2)]),a("div",{staticClass:"card__row flex items-center justify-between"},[a("div",{staticClass:"card__row-left"},[t._v(t._s(t.$t("clients.labels.email")))]),t.isApplicationCard?[a("div",{staticClass:"card__row-right flex justify-between items-center email-for-application"},[t._v(t._s(t.client.email))])]:[a("Emails",{attrs:{client:t.client}})]],2),a("div",{staticClass:"card__row card__row-children flex items-center justify-between"},[a("div",{staticClass:"card__row-left"},[t._v(t._s(t.$t("clients.labels.marital")))]),a("div",{staticClass:"card__row-right flex justify-between items-center"},[a("div",{staticClass:"card__married"},[t._v(t._s(t.clientMartial))]),a("div",{staticClass:"card__children"},[t._v(t._s(t.$t("clients.labels.children")))]),a("div",{staticClass:"card__children-amount"},[t._v(t._s(t.children))])])]),a("div",{staticClass:"card__row flex items-center justify-between"},[a("div",{staticClass:"card__row-left"},[t._v(t._s(t.$t("clients.labels.education")))]),a("div",{staticClass:"card__row-right"},[t._v(t._s(t.clientEducation))])]),a("div",{staticClass:"card__row flex items-center card__socials justify-between"},[a("div",{staticClass:"card__row-left"},[t._v(t._s(t.$t("clients.labels.socialNetworks")))]),a("SocialNetworks",{attrs:{client:t.client}})],1)]),a("div",{staticClass:"card__profile-right"},[a("div",{staticClass:"card__right-block flex"},[a("div",{staticClass:"card__right-info"},[a("div",{staticClass:"card__row mh40 flex"},[a("div",{staticClass:"card__row-left"},[t._v(t._s(t.$t("clients.labels.secretPhrase")))]),a("div",{staticClass:"card__row-right"},[a("span",{staticClass:"card__secret-question q-mb-xs"},[t._v(t._s(t.client.secretCustomQuestion||t.client.secret&&t.client.secret.type))]),a("div",{staticClass:"card__secret-answer"},[t._v(t._s(t.client.secret&&t.client.secret.answer))])])]),a("div",{staticClass:"card__row flex"},[a("div",{staticClass:"card__row-left"},[t._v(t._s(t.$t("clients.labels.employment")))]),a("div",{staticClass:"card__row-right"},[a("span",{class:t.client.workAddress?"link":""},[a("span",{domProps:{innerHTML:t._s(t.client.employerName)}}),a("q-tooltip",[a("span",[t._v(t._s(t.client.workAddress&&(t.client.workAddress.fullByGuid||t.client.workAddress.fullAddress)||t.workAddress))])])],1)])]),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left"},[t._v(t._s(t.$t("clients.labels.industry")))]),a("div",{staticClass:"card__row-right"},[t._v(t._s(t.client.employerIndustry))])]),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left"},[t._v(t._s(t.$t("clients.labels.position")))]),a("div",{staticClass:"card__row-right"},[t._v(t._s(t.client.position||t.client.employmentType))])]),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left"},[t._v(t._s(t.$t("clients.labels.income")))]),a("div",{staticClass:"card__row-right"},[t._v(t._s(t.money(t.client.monthlyIncome,!0)))])]),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left"},[t._v(t._s(t.$t("clients.labels.account")))]),a("div",{staticClass:"card__row-right min-w-200px max-w-300px"},[t.currentCard&&t.currentCard.isEditing?[a("q-select",{staticClass:"select-for-profile",attrs:{options:t.paymentSystemOptions,color:"WB-warning-color","options-dense":"",outlined:""},scopedSlots:t._u([{key:"option",fn:function(e){return[a("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[a("q-item-section",[a("q-item-label",{domProps:{innerHTML:t._s(e.opt.label)}}),a("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.opt.description))])],1)],1)]}}],null,!1,1790516853),model:{value:t.$operatorWB.communication.paymentSystemSelect,callback:function(e){t.$set(t.$operatorWB.communication,"paymentSystemSelect",e)},expression:"$operatorWB.communication.paymentSystemSelect"}})]:[a("span",[t._v(t._s(t.paymentSystem))])]],2)]),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left"},[t._v(t._s(t.$t("clients.labels.additional")))]),t.isApplicationCard?a("div",{staticClass:"card__row-right"},[a("span",{staticClass:"link",on:{click:function(e){return t.setView("relations")}}},[t._v("Связи данных "+t._s(t.$operatorWB.clients.currentRelations&&t.$operatorWB.clients.currentRelations.length?"("+t.$operatorWB.clients.currentRelations.length+")":""))]),a("span",[t._v("   ")]),a("span",{staticClass:"link",on:{click:function(e){return t.setView("creditHistory")}}},[t._v("Кредитная история "+t._s(t.$operatorWB.clients.currentCreditHistory&&t.$operatorWB.clients.currentCreditHistory.length?"("+t.$operatorWB.clients.currentCreditHistory.length+")":""))])]):a("div",{staticClass:"card__row-right"},[t.client.files?a("span",{staticClass:"card__link-file link"},[t._v(t._s(t.$t("clients.labels.attachments"))+" ("+t._s(t.client.files&&t.client.files.length)+")")]):t._e()])]),!t.isApplicationCard||t.currentCard&&t.currentCard.isEditing?t._e():a("div",{staticClass:"card__row flex items-center"},[a("q-btn",{staticClass:"full-width",attrs:{label:"Изменить регистрационные данные заёмщика",color:"WB-primary"},on:{click:function(e){t.currentCard.isEditing=!t.currentCard.isEditing}}})],1)]),t.loan&&"pos"===t.loan.product?a("POS"):a("Loan")],1),t.isApplicationCard?t._e():a("Reliability")],1)])]):t._e()],1)},Ll=[],Yl=a("bba4"),Hl=a.n(Yl),Nl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card__right-block card__reliability"},[a("div",{staticClass:"card__row flex items-center card__reliability-block"},[a("div",{staticClass:"card__row-left card__reliability-left text-left card__reliability-text"},[t._v(t._s(t.$t("clients.reliability.info")))]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.currentClient&&t.currentClient.blacklisted,expression:"currentClient && currentClient.blacklisted"}],staticClass:"card__row-right card__reliability-right text-right danger"},[a("b",[t._v(t._s(t.$t("clients.reliability.blacklist")))])])]),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left card__reliability-left text-left"},[t._v(t._s(t.$t("clients.reliability.amount"))),a("span",{staticClass:"card__reliability-text card__reliability-amount"},[t._v(t._s(t.$operatorWB.clients.currentLoansHistory&&t.$operatorWB.clients.currentLoansHistory.length))])]),a("div",{staticClass:"card__row-right card__reliability-right text-right"},[a("span",{staticClass:"card__reliability-link link",on:{click:function(){return t.setView("loans")}}},[t._v(t._s(t.$t("clients.reliability.history")))])])]),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left card__reliability-left text-left"},[t._v(t._s(t.$t("clients.reliability.promises")))]),a("div",{staticClass:"card__row-right card__reliability-right text-right"},[a("div",{staticClass:"card__reliability-promises flex justify-end"},[a("div",{staticClass:"card__reliability-give"},[t._v(t._s(t.$t("clients.reliability.given"))),a("span",{staticClass:"card__reliability-amount card__reliability-text"},[t._v(t._s(t.reliability&&t.reliability.promises.total))])]),a("div",{staticClass:"card__reliability-done"},[t._v(t._s(t.$t("clients.reliability.done"))),a("span",{staticClass:"card__reliability-amount card__reliability-text"},[t._v(t._s(t.reliability&&t.reliability.promises.fulfilled))])])])])]),a("div",{staticClass:"card__row card__reliability-legends flex"},[a("div",{staticClass:"card__row-left card__reliability-left card__reliability-left_w80p"},[t._v(t._s(t.$t("clients.reliability.legend"))),a("div",{staticClass:"card__reliability-days flex items-center"},[a("div",{staticClass:"card__reliability-item flex"},[a("span",{staticClass:"card__reliability-color brs2 legend red"}),a("span",{staticClass:"card__reliability-desc"},[t._v("- "+t._s(t.$t("clients.reliability.colors.danger")))])]),a("div",{staticClass:"card__reliability-item flex"},[a("span",{staticClass:"card__reliability-color brs2 legend orange"}),a("span",{staticClass:"card__reliability-desc"},[t._v("- "+t._s(t.$t("clients.reliability.colors.warning")))])]),a("div",{staticClass:"card__reliability-item flex"},[a("span",{staticClass:"card__reliability-color brs2 legend green"}),a("span",{staticClass:"card__reliability-desc"},[t._v("- "+t._s(t.$t("clients.reliability.colors.info")))])])])]),a("div",{staticClass:"card__row-right card__reliability-right card__reliability-right_w20p flex justify-end"},t._l(t.legends,(function(t,e){return a("div",{key:e,staticClass:"card__reliability-color brs2 legend",class:t})})),0)])])},zl=[],Vl={name:"Reliability",computed:{currentClient:function(){return this.$operatorWB.clients.currentClient},legends:function(){var t=this,e=this.$operatorWB.clients.currentLoansHistory;return e.reverse().slice(0,10).map((function(e){return t.colorClass(e.max_delay)}))},reliability:function(){return this.currentClient&&this.currentClient.reliability}},methods:{setView:function(t){this.$operatorWB.layout.view=t}},data:function(){return{colorClass:fs["a"]}}},Gl=Vl,Ul=Object(c["a"])(Gl,Nl,zl,!1,null,"289ce76a",null),Zl=Ul.exports,Kl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loan?a("div",{staticClass:"card__right-loan full-height",class:t.isApplicationCard?"wide-loan":""},[a("div",{staticClass:"card__row flex items-center bg-profile"},[a("div",{staticClass:"card__row-left card__loan-left text-left card__loan-text"},[t._v("Данные по "+t._s(t.isApplicationCard?"заявке":"займу"))]),t.isApplicationCard?t._e():a("div",{staticClass:"card__row-right card__loan-right text-right info"},[a("b",[t._v("Основной")])])]),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left card__loan-left text-left"},[t._v("Сумма займа")]),a("div",{staticClass:"card__row-right card__loan-right text-right info"},[a("b",[t._v(t._s(t.money(t.loan.amount,!0)))])])]),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left card__loan-left text-left"},[t._v("Срок")]),a("div",{staticClass:"card__row-right card__loan-right text-right"},[t._v(t._s(t.loan.duration||t.loan.term)+" дней")])]),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left card__loan-left text-left"},[t._v("Ставка (%)")]),a("div",{staticClass:"card__row-right card__loan-right text-right"},[a("span",{staticClass:"link"},[t._v(t._s(t.isApplicationCard?100*t.loan.baseRate:t.loanRates.current)+"%"),t.isApplicationCard?t._e():a("RateList",{attrs:{rate:t.loanRates,delay:t.$operatorWB.loans.currentDelay}})],1)])]),t.isApplicationCard?t._e():a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left card__loan-left text-left"},[t._v("Дата выдачи")]),a("div",{staticClass:"card__row-right card__loan-right text-right"},[t._v(t._s(t.getShortDate(t.loan.issueDate)))])]),t.isApplicationCard?t._e():a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left card__loan-left text-left"},[t._v("Срок до")]),a("div",{staticClass:"card__row-right card__loan-right text-right"},[t._v(t._s(t.getShortDate(t.loan.maturityDate)))])]),t.isApplicationCard?a("div",{staticClass:"card__row flex items-center"},[t._m(0),a("div",{staticClass:"card__row-right card__loan-right text-right info"},[t._v(t._s(t.money(t.loan.maxAmount,!0)))])]):a("div",{staticClass:"card__row flex items-center card__right-product"},[a("div",{staticClass:"card__row-left card__loan-left text-left"},[t._v("Продукт")]),a("div",{staticClass:"card__row-right card__loan-right text-right"},[t._v(t._s(t.$t("loans.product."+t.loan.product)))])]),t.isApplicationCard?a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left card__reliability-left text-left"},[t._v(t._s(t.$t("clients.reliability.amount"))),a("span",{staticClass:"card__reliability-text card__reliability-amount"},[t._v(t._s(t.$operatorWB.clients.currentLoansHistory&&t.$operatorWB.clients.currentLoansHistory.length))])]),a("div",{staticClass:"card__row-right card__reliability-right text-right"},[a("span",{staticClass:"card__reliability-link link",on:{click:function(){return t.setView("loans")}}},[t._v(t._s(t.$t("clients.reliability.history")))])])]):t._e(),t.isApplicationCard?a("div",{staticClass:"card__row flex items-center bg-blue-2"},[a("div",{staticClass:"card__row-left card__loan-left text-left card__loan-text"},[t._v("Результат анализа данных")]),a("q-scroll-area",{staticClass:"q-mt-sm full-width analysis-result"},[a("div",[t._v(t._s(t.loan.analytics))])])],1):t._e()]):t._e()},Jl=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card__row-left card__loan-left text-left"},[a("div",{staticClass:"text-black"},[t._v("Максимальная сумма")])])}],Xl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-tooltip",{attrs:{anchor:t.$operatorWB.layout.isApplicationCard?"top left":"top middle",self:t.$operatorWB.layout.isApplicationCard?"bottom right":"bottom middle"}},[a("div",{staticClass:"tooltip-rates brs5"},[a("div",{staticClass:"tooltip-rates__row flex"},[a("div",{staticClass:"tooltip-rates__type"},[t._v(t._s(t.$t("clients.rate.base")))]),a("div",{staticClass:"tooltip-rates__amount"},[t._v(t._s(t.rate&&t.rate.base)+"%")])]),a("div",{staticClass:"tooltip-rates__row flex"},[a("div",{staticClass:"tooltip-rates__type"},[t._v(t._s(t.$t("clients.rate.current")))]),a("div",{staticClass:"tooltip-rates__amount"},[t._v(t._s(t.rate&&t.rate.current)+"%")])]),a("div",{staticClass:"flex"},[a("div",{staticClass:"tooltip-rates__type"},[t._v(t._s(t.$t("clients.rate.annual")))]),a("div",{staticClass:"tooltip-rates__amount"},[t._v(t._s(t.rate&&t.rate.annual)+"%")])])])])},tc=[],ec={name:"RateList",props:{rate:{type:Object}}},ac=ec,nc=Object(c["a"])(ac,Xl,tc,!1,null,"77308a32",null),sc=nc.exports;d()(nc,"components",{QTooltip:$n["a"]});var ic={name:"Loan",components:{RateList:sc},data:function(){return{money:U["l"],getShortDate:U["d"]}},computed:{isApplicationCard:function(){return this.$operatorWB.layout.isApplicationCard},loan:function(){return this.isApplicationCard?this.$operatorWB.applications.get("item"):this.$operatorWB.loans.currentLoan||null},loanRates:function(){if(!this.loan)return{base:0,current:0,annual:0};if(this.isApplicationCard)return{current:this.loan.baseRate};var t=this.loan.rate,e=t.base,a=t.current,n=t.annual;0!==e&&(e*=100),0!==a&&(a*=100),0!==n&&(n*=100);var s=0===a&&this.$operatorWB.loans.currentDelay>0?1:a;return{base:Number(e).toFixed(2),current:Number(s).toFixed(2),annual:Number(s>0?365*s:n).toFixed(2)}}},methods:{setView:function(t){this.$operatorWB.layout.view=t}}},rc=ic,oc=(a("5af3"),Object(c["a"])(rc,Kl,Jl,!1,null,"ac5c97ea",null)),lc=oc.exports;d()(oc,"components",{QScrollArea:Fe["a"]});var cc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.client,expression:"client"}],staticClass:"card__row-right flex justify-between items-center"},[t._l(t.emails,(function(e){return[a("span",{staticClass:"card__link-email"},[t._v(t._s(e))])]})),a("q-btn",{attrs:{icon:"add",color:"green-8",dense:"",outline:""},on:{click:t.showModal}}),[a("q-dialog",{attrs:{"content-style":"z-index: 6100;"},model:{value:t.isOpened,callback:function(e){t.isOpened=e},expression:"isOpened"}},[a("q-card",{staticClass:"modal-content modal-email"},[a("q-card-section",[a("div",{staticClass:"modal__title q-mb-sm"},[t._v("E-mail")])]),a("q-card-section",[a("q-input",{staticClass:"modal__input",attrs:{type:"email",placeholder:"pochta@pochta.ru","bg-color":"white",outlined:"",dense:"",dark:!1,color:"WB-primary"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn-group",{staticClass:"modal__buttons w100p flex justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"modal__btn",attrs:{label:t.$t("modals.buttons.cancel")}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"modal__btn",attrs:{label:t.$t("modals.buttons.save")},on:{click:function(e){return t.$operatorWB.communication.save()}}})],1)],1)],1)],1)]],2)},uc=[],dc={name:"Emails",props:{client:Object},data:function(){return{email:null,isOpened:!1}},computed:{emails:function(){return this.client&&this.client.emails||[]}},methods:{showModal:function(){this.isOpened=!this.isOpened}}},mc=dc,pc=(a("d97f"),Object(c["a"])(mc,cc,uc,!1,null,"300873a6",null)),fc=pc.exports;d()(pc,"components",{QBtn:b["a"],QDialog:$t["a"],QCard:m["a"],QCardSection:p["a"],QInput:Ns["a"],QCardActions:h["a"],QBtnGroup:Za["a"]}),d()(pc,"directives",{ClosePopup:Bn["a"]});var hc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card__phone"},[a("div",{staticClass:"card__phone-list"},[t._l(t.phones,(function(e){return a("div",{key:e.id,staticClass:"flex items-center card__phone-item",class:t.isCurrent(e.number)&&"current"},[a("span",{staticClass:"card__phone-type"},[t._v(t._s(t.$t("clients.phns."+e.type)))]),t._v(t._s(e.number)+" "),a("span",{staticClass:"card__phone-type",domProps:{innerHTML:t._s(e.owner)}}),e.blocked?a("q-icon",{staticClass:"q-mx-sm",attrs:{name:"not_interested",color:"negative"}},[a("q-tooltip",{attrs:{anchor:"bottom left",self:"bottom left"}},[e.blocked?a("span",[t._v(t._s(t.$t("tooltips.phoneStatus.blocked")))]):t._e()])],1):t._e()],1)})),a("div",{staticClass:"card__phone-numbers"},[a("span",{staticClass:"card__phones-all link"},[t._v(t._s(t.$t("clients.labels.allPhones"))+" ("+t._s(t.$operatorWB.clients.currentPhones.length)+")"),a("PhonesList",{attrs:{phones:t.$operatorWB.clients.currentPhones}})],1)])],2),a("q-btn",{attrs:{icon:"add",color:"green-8",dense:"",outline:""},on:{click:function(e){t.$operatorWB.layout.phoneModalOpened=!0}}}),a("PhoneManagerModal",{attrs:{opened:t.isOpened}})],1)},bc=[],gc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-tooltip",{attrs:{anchor:"top left",self:"bottom left"}},[a("div",{staticClass:"tooltip-phones brs5 q-pa-none q-ma-none"},t._l(t.phones,(function(e){return a("div",{key:e.id,staticClass:"tooltip-phones__row flex"},[a("div",{staticClass:"tooltip-phones__type"},[t._v(t._s(t.$t("clients.phns."+e.type)))]),a("div",{staticClass:"tooltip-phones__number"},[t._v(t._s(e.number))]),a("div",{staticClass:"tooltip-phones__owner",domProps:{innerHTML:t._s(e.owner)}}),a("div",{staticClass:"q-ml-sm danger"},[e.blocked||!e.autodial?a("q-icon",{staticClass:"q-mx-sm",attrs:{name:"not_interested",color:"negative"}}):t._e()],1)])})),0)])},vc=[],_c={name:"PhonesList",props:{phones:{type:Array,default:function(){return[]}}}},yc=_c,xc=Object(c["a"])(yc,gc,vc,!1,null,"638c6cdf",null),Cc=xc.exports;d()(xc,"components",{QTooltip:$n["a"],QIcon:ja["a"]});var $c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{attrs:{"content-class":"operatorWB__dialog","content-style":"z-index: 6100;"},model:{value:t.$operatorWB.layout.phoneModalOpened,callback:function(e){t.$set(t.$operatorWB.layout,"phoneModalOpened",e)},expression:"$operatorWB.layout.phoneModalOpened"}},[a("q-card",{staticClass:"phone-manager__card modal-content phone-manager brs6 ovh"},[a("q-card-section",{staticClass:"phone-manager__content"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"close-button q-mr-sm",attrs:{flat:"",round:"",dense:"",icon:"close"}}),a("FullPhoneList")],1),a("q-card-section",{staticClass:"phone-manager__footer"},[a("PhoneForm")],1)],1)],1)},Bc=[],qc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.clientPhones?a("div",{staticClass:"phone-list"},[a("q-table",{staticClass:"my-sticky-header-table",staticStyle:{height:"700px"},attrs:{dark:!0,flat:"",data:t.clientPhones,columns:t.columns,"row-key":"id",pagination:t.pagination,"hide-bottom":"",separator:"none"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e,"data-prop":e}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,class:t.cssClass(n.name),attrs:{props:e}},["number"===n.name?[a("span",{staticClass:"phone-manager_color-grey phone-type"},[t._v(t._s(t.$t("clients.phns."+n.value.type)))]),a("span",[t._v(t._s(n.value.number))])]:"operator"===n.name?[t._v(t._s(n.value&&n.value.fullName||"-"))]:"comment"===n.name?[t.isEditing(e.row)?a("form",{staticClass:"item edit",on:{submit:function(a){return a.preventDefault(),t.saveComment(e.row)}}},[a("q-input",{attrs:{name:"comment",placeholder:"Введите комментарий",dark:!1,color:"WB-primary"},model:{value:t.editing.comment,callback:function(e){t.$set(t.editing,"comment",e)},expression:"editing.comment"}}),a("q-btn",{staticClass:"button",attrs:{type:"submit",flat:"",size:"sm"}},[a("q-icon",{staticClass:"far fa-save"})],1)],1):a("div",{staticClass:"item view"},[a("span",[t._v(t._s(t._f("truncate")(n.value))),t.showTooltip(n.value)?a("q-tooltip",[t._v(t._s(n.value))]):t._e()],1),t.editing?t._e():a("q-btn",{staticClass:"button",attrs:{flat:"",size:"sm"},on:{click:function(a){return a.preventDefault(),t.editItem(e.row)}}},[a("q-icon",{staticClass:"far fa-edit"})],1)],1)]:"status"===n.name?[t._v(t._s(t.lastStatus(e.row)))]:"calls"===n.name?[t._v(t._s(t.countCalls(e.row)))]:[a("span",{domProps:{innerHTML:t._s(n.value)}})]],2)})),1)]}}],null,!1,1551172434)})],1):t._e()},wc=[],Wc={name:"FullPhoneList",data:function(){return{editing:null,dialog:null,columns:[{name:"source",required:!0,label:"Источник",align:"left",field:"source",sortable:!1},{name:"number",required:!0,label:"Номер",align:"left",field:"phone"},{name:"name",required:!0,label:"ФИО",align:"left",field:"owner"},{name:"status",required:!0,label:"Статус",align:"left",field:"status"},{name:"calls",required:!0,label:"Звонков",align:"center",field:"calls"},{name:"comment",required:!0,label:"Комментарий",align:"left",field:"comment"},{name:"operator",required:!0,label:"Сотрудник",align:"left",field:"operator"}],pagination:{page:1,rowsPerPage:0}}},computed:{client:function(){return this.$operatorWB.clients.currentClient},clientPhones:function(){return this.$operatorWB.clients.currentPhones.map((function(t){return Object.assign(t,{phone:{type:t.type,number:t.number}})}))},clientCardModalOpened:function(){return this.$operatorWB.layout.clientCardModalOpened},communications:function(){return this.client.communications||[]},autodial:function(){return this.client.phones.reduce((function(t,e){return t["".concat(e.id)]=e.autodial,t}),{})}},filters:{truncate:function(t){return t?(t.length>30&&(t=t.substr(0,30),t+="..."),t):""}},methods:{showTooltip:function(t){return t&&t.length>30},lastStatus:function(t){var e=this.communications.filter((function(e){return!!(e.channel&&e.channel.phone&&e.channel.phone.hasOwnProperty("number"))&&e.channel.phone.number===t.phone.number})),a=e.sort((function(t,e){return t.contactedAt<e.contactedAt}))[0];return a&&this.$t("communications.status."+a.status)},countCalls:function(t){var e=this.communications.filter((function(e){return!!(e.channel&&e.channel.phone&&e.channel.phone.hasOwnProperty("number"))&&e.channel.phone.number===t.phone.number}));return e.length||""},cssClass:function(t){return"phone-manager__"+t},isEditing:function(t){return this.editing&&this.editing.id===t.id},editItem:function(t){this.editing=t},saveComment:function(t){this.$operatorWB.clients.editPhone({id:this.editing.id,comment:this.editing.comment}),this.editing=null}},watch:{clientCardModalOpened:function(t,e){t||this.dialog&&this.dialog.close()}}},kc=Wc,Dc=(a("a279"),Object(c["a"])(kc,qc,wc,!1,null,"fdddcbec",null)),Oc=Dc.exports;d()(Dc,"components",{QTable:Zr["a"],QTr:Er["a"],QTd:Kr["a"],QInput:Ns["a"],QBtn:b["a"],QIcon:ja["a"],QTooltip:$n["a"]});var jc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"modal-phone",on:{submit:function(e){return e.preventDefault(),t.addPhone(e)}}},[a("div",{staticClass:"row gutter-sm items-center"},[a("q-input",{staticClass:"col q-px-xs q-py-sm",attrs:{type:"tel",maxlength:"11",placeholder:"+7 (978) 654-3210",label:t.$t("clients.phoneForm.number"),rules:[function(e){return!t.isAddedPhone(e)||"Телефон уже добавлен"}],orientation:"vertical",outlined:"",dense:"","bg-color":"white",dark:!1,color:"WB-primary"},model:{value:t.formated,callback:function(e){t.formated=e},expression:"formated"}}),a("q-input",{staticClass:"col q-px-xs q-py-sm",attrs:{type:"text",placeholder:t.$t("clients.phoneForm.owner"),label:t.$t("clients.phoneForm.owner"),orientation:"vertical",outlined:"",dense:"","bg-color":"white",dark:!1,color:"WB-primary"},model:{value:t.form.owner,callback:function(e){t.$set(t.form,"owner",e)},expression:"form.owner"}}),a("q-input",{staticClass:"col q-px-xs q-py-sm",attrs:{type:"text",placeholder:t.$t("clients.phoneForm.comment"),label:t.$t("clients.phoneForm.comment"),orientation:"vertical",outlined:"",dense:"","bg-color":"white",dark:!1,color:"WB-primary"},model:{value:t.form.comment,callback:function(e){t.$set(t.form,"comment",e)},expression:"form.comment"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"modal__btn min-h-40px",attrs:{color:"WB-primary",type:"submit",disable:!t.form.number||t.form.number.length<11||t.isAddedPhone(t.form.number),loading:t.$operatorWB.clients.loading.phone}},[t._v(t._s(t.$t("modals.buttons.save"))),a("q-spinner",{attrs:{slot:"loading",size:"20px"},slot:"loading"})],1)],1)])},Sc=[],Pc=(a("a481"),function(){return{type:"mobile",number:null,owner:null,comment:null}}),Mc={name:"PhoneForm",props:["opened","loading"],directives:{mask:vr["mask"]},data:function(){return{options:[{label:this.$t("clients.phones.mobile"),value:"mobile"},{label:this.$t("clients.phones.work"),value:"work"},{label:this.$t("clients.phones.home"),value:"home"}],form:Pc()}},computed:{formated:{get:function(){return this.form.number},set:function(t){var e=t.replace(/[\s+\-()]*/gi,""),a=e.substr(0,1);"8"===a&&(e="7"+e.slice(1)),["8","7"].includes(a)||(e="7"+e),this.$nextTick((function(){this.form.type="additional",this.form.number=e}))}}},methods:{addPhone:function(){var t=this;this.$operatorWB.clients.addPhone(this.form).then((function(e){e&&(t.form=Object.assign({},Pc()))}))},close:function(){this.$emit("close")},isAddedPhone:function(t){return!!this.$operatorWB.clients.currentPhones.find((function(e){return e.number===t}))}}},Ac=Mc,Tc=(a("6264"),Object(c["a"])(Ac,jc,Sc,!1,null,"73f54752",null)),Qc=Tc.exports;d()(Tc,"components",{QInput:Ns["a"],QBtn:b["a"],QSpinner:Hs["a"]}),d()(Tc,"directives",{ClosePopup:Bn["a"]});var Fc={name:"PhoneManagerModal",props:["opened","loading","phones"],components:{FullPhoneList:Oc,PhoneForm:Qc},directives:{mask:vr["mask"]},data:function(){return{options:[{label:this.$t("clients.phones.mobile"),value:"mobile"},{label:this.$t("clients.phones.work"),value:"work"},{label:this.$t("clients.phones.home"),value:"home"}]}},computed:{clientPhonesFull:function(){var t=this.$operatorWB.clients.currentClient.phones;return t&&t.map((function(t){return Object.assign(t,{phone:{type:t.type,number:t.number}})}))||[]}},methods:{close:function(){this.$emit("close")}}},Ic=Fc,Rc=(a("7c25"),Object(c["a"])(Ic,$c,Bc,!1,null,"5a448fa2",null)),Ec=Rc.exports;d()(Rc,"components",{QDialog:$t["a"],QCard:m["a"],QCardSection:p["a"],QBtn:b["a"]}),d()(Rc,"directives",{ClosePopup:Bn["a"]});var Lc=a("1732"),Yc={name:"Phones",components:{PhonesList:Cc,PhoneManagerModal:Ec},props:{profile:{type:Object}},data:function(){return{options:[{label:this.$t("clients.phones.mobile"),value:"mobile"},{label:this.$t("clients.phones.work"),value:"work"},{label:this.$t("clients.phones.home"),value:"home"}],number:"",isOpened:!1,form:{type:"mobile",number:null,owner:null,comment:null,source:"Profile",autodial:!0}}},computed:{phones:function(){var t=[];return t=this.profile?[{id:Object(Lc["a"])(),number:this.profile.phone}]:this.$operatorWB.clients.currentPhones.slice(0,2),t}},methods:{isCurrent:function(t){return t.substring(1)===(this.$operatorWB.calls.currentCall&&this.$operatorWB.calls.currentCall.phone_number||this.number).substring(1)}},watch:{currentCall:function(t){t&&(this.number=this.$operatorWB.calls.currentCall.phone_number)}}},Hc=Yc,Nc=(a("9bc1"),Object(c["a"])(Hc,hc,bc,!1,null,"04640fe3",null)),zc=Nc.exports;d()(Nc,"components",{QIcon:ja["a"],QTooltip:$n["a"],QBtn:b["a"]});var Vc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"clock"},[a("q-icon",{attrs:{name:"access_time"}},[a("q-tooltip",[t._v("Время клиента")])],1),a("div",{staticClass:"time"},[a("CustomClock",{attrs:{timezone:t.timeZone}})],1),a("div",{staticClass:"timezone"},[t._v("("+t._s(t.timeZoneName)+")")])],1)},Gc=[],Uc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{style:"font-size: "+t.size+"em",attrs:{id:"clock"}},[a("span",{staticClass:"time"},[t._v(t._s(t.time))])])},Zc=[],Kc={name:"CustomClock",props:{hideDate:{type:Boolean},timezone:{type:Number},size:{type:Number,default:1}},data:function(){return{time:"",date:"",week:["вс","пн","вт","ср","чт","пт","сб"],timerId:0}},created:function(){this.timerId=setInterval(this.updateTime,1e3),this.updateTime()},beforeDestroy:function(){clearTimeout(this.timerId)},methods:{updateTime:function(){var t=new Date,e=t.getTimezoneOffset();if(void 0!==this.timezone){var a=-1*this.timezone*60,n=60*(a-e)*1e3;t.setTime(t.getTime()-n)}this.time=this.zeroPadding(t.getHours(),2)+":"+this.zeroPadding(t.getMinutes(),2)+":"+this.zeroPadding(t.getSeconds(),2),this.date=this.zeroPadding(t.getFullYear(),4)+"-"+this.zeroPadding(t.getMonth()+1,2)+"-"+this.zeroPadding(t.getDate(),2)+" "+this.week[t.getDay()]},zeroPadding:function(t,e){for(var a="",n=0;n<e;n++)a+="0";return(a+t).slice(-e)}}},Jc=Kc,Xc=Object(c["a"])(Jc,Uc,Zc,!1,null,"b144e550",null),tu=Xc.exports,eu={name:"Clock",components:{CustomClock:tu},props:{timeZone:{type:Number,required:!1}},computed:{timeZoneName:function(){return Object(U["f"])(this.timeZone)}}},au=eu,nu=(a("4cb1"),Object(c["a"])(au,Vc,Gc,!1,null,"7651fa3e",null)),su=nu.exports;d()(nu,"components",{QIcon:ja["a"],QTooltip:$n["a"]});var iu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card__row-right flex justify-between items-center"},[a("div",{staticClass:"socials"},[a("q-list",{staticClass:"socials__list no-border flex items-center q-pa-none"},t._l(t.socials,(function(t){return a("q-item",{key:t.value,staticClass:"socials__item q-pa-none"},[a("a",{staticClass:"socials__link",attrs:{href:t.link,title:t.value,target:"_blank",rel:"noopener"}},[a("svg",{staticClass:"socials__icon",attrs:{width:"25",height:"25"}},[a("image",{attrs:{href:t.path}})])])])})),1)],1),t.$operatorWB.layout.isApplicationCard?t._e():a("q-btn",{attrs:{icon:"add",color:"green-8",dense:"",outline:""},on:{click:t.showModal}}),[a("q-dialog",{attrs:{"content-style":"z-index: 6100;"},model:{value:t.isOpened,callback:function(e){t.isOpened=e},expression:"isOpened"}},[a("q-card",{staticClass:"modal-content modal-social"},[a("q-card-section",[a("div",{staticClass:"modal__title q-mb-sm"},[t._v(t._s(t.$t("modals.socials.add")))])]),a("q-card-section",[a("q-input",{staticClass:"modal__input",attrs:{type:"url",placeholder:"https://...","bg-color":"white",outlined:"",dense:"",dark:!1,color:"WB-primary"},model:{value:t.socialNetwork.url,callback:function(e){t.$set(t.socialNetwork,"url",e)},expression:"socialNetwork.url"}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn-group",{staticClass:"modal__buttons w100p flex justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"modal__btn",attrs:{label:t.$t("modals.buttons.cancel")}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"modal__btn",attrs:{label:t.$t("modals.buttons.save")},on:{click:function(e){return t.$operatorWB.communication.save()}}})],1)],1)],1)],1)]],2)},ru=[],ou={name:"SocialNetworks",data:function(){return{isOpened:!1,socialNetwork:{url:null,icon:"Facebook"},socials:[{link:"https://facebook.com",class:"socials__icon_fb",value:"Facebook",path:"/statics/icons/socials/facebook.svg"},{link:"https:///twitter.com",class:"socials__icon_tw",value:"Twitter",path:"/statics/icons/socials/twitter.svg"},{link:"https://google.com",class:"socials__icon_go",value:"Google+",path:"/statics/icons/socials/googleplus.svg"},{link:"https://instagram.com",class:"socials__icon_inst",value:"Instagram",path:"/statics/icons/socials/instagram.svg"},{link:"https://vk.com",class:"socials__icon_vk",value:"VKontakte",path:"/statics/icons/socials/vk.svg"},{link:"https://ok.ru",class:"socials__icon_ok",value:"Odnoklassniki",path:"/statics/icons/socials/ok.svg"}]}},methods:{showModal:function(){this.isOpened=!this.isOpened}}},lu=ou,cu=(a("1cfc"),Object(c["a"])(lu,iu,ru,!1,null,"7f613f4e",null)),uu=cu.exports;d()(cu,"components",{QList:sa["a"],QItem:Ze["a"],QBtn:b["a"],QDialog:$t["a"],QCard:m["a"],QCardSection:p["a"],QInput:Ns["a"],QCardActions:h["a"],QBtnGroup:Za["a"]}),d()(cu,"directives",{ClosePopup:Bn["a"]});var du=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card__right-loan"},[t._m(0),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left card__loan-left text-left"},[t._v("Одобренный лимит")]),a("div",{staticClass:"card__row-right card__loan-right text-right info"},[a("strong",[t._v(t._s(t.limit))])])]),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left card__loan-left text-left"},[t._v("Доступно")]),a("div",{staticClass:"card__row-right card__loan-right text-right"},[t._v(t._s(t.available))])]),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left card__loan-left text-left"},[t._v("Первая покупка")]),a("div",{staticClass:"card__row-right card__loan-right text-right"},[t._v(t._s(t.firstDeal))])]),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left card__loan-left text-left"},[t._v("Сумма покупок")]),a("div",{staticClass:"card__row-right card__loan-right text-right"},[t._v(t._s(t.sumDeals))])]),a("div",{staticClass:"card__row flex items-center"},[a("span",{staticClass:"debt__accruals-link link",on:{click:function(e){return t.$operatorWB.layout.set("view","purchases")}}},[t._v("История покупок")])]),a("div",{staticClass:"card__row flex items-center",class:t.$operatorWB.layout.isApplicationCard?"":"card__right-product"},[a("div",{staticClass:"card__row-left card__loan-left text-left"},[t._v("Продукт")]),a("div",{staticClass:"card__row-right card__loan-right text-right"},[a("strong",[t._v(t._s(t.loan&&t.$t("loans.product."+t.loan.product)))])])])])},mu=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card__row flex items-center bg-profile"},[a("div",{staticClass:"card__row-left card__loan-left text-left card__loan-text"},[t._v("Данные по займам")]),a("div",{staticClass:"card__row-right card__loan-right text-right info"},[a("b",[t._v("POS")])])])}],pu=a("80f6"),fu=a.n(pu),hu={name:"POS",components:{RateList:sc},data:function(){return{getShortDate:U["d"],minBy:fu.a,money:U["l"]}},computed:{loan:function(){return this.$operatorWB.loans.currentLoan},firstDeal:function(){return this.loan&&Object(U["d"])(fu()(this.loan.deals.map((function(t){return t.purchasedAt}))))},limit:function(){return this.loan&&Object(U["l"])(this.loan.amount,!0)},available:function(){return this.loan&&Object(U["l"])(this.loan.current.amount,!0)},sumDeals:function(){return this.loan&&Object(U["l"])(this.loan.deals.reduce((function(t,e){return t+e.products.reduce((function(t,e){return t+e.price}),0)}),0),!0)}}},bu=hu,gu=Object(c["a"])(bu,du,mu,!1,null,"418523ee",null),vu=gu.exports,_u=a("c1df"),yu=a.n(_u),xu={name:"Profile",components:{POS:vu,Reliability:Zl,Loan:lc,Emails:fc,Clock:su,Phones:zc,SocialNetworks:uu},props:{client:{type:Object}},data:function(){return{camelCase:Hl.a,num2words:fs["l"],getShortDate:U["d"],money:U["l"],isVisible:!1}},mounted:function(){this.paymentSystemOptions&&(this.$operatorWB.communication.paymentSystemSelect=this.paymentSystemOptions[0])},methods:{setView:function(t){this.$operatorWB.layout.view=t},showTooltip:function(){this.isVisible=!this.isVisible},hideQDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.$refs[t].hide(),"birthDate"===e&&(this.client.age=this.yearsFromNow)},defaultDate:function(t){var e=t.split(".");return e[2]+"/"+e[1]}},computed:{currentCard:function(){return this.$operatorWB.layout.currentCard},isApplicationCard:function(){return this.$operatorWB.layout.isApplicationCard},loan:function(){return this.isApplicationCard?this.$operatorWB.applications.get("item"):this.$operatorWB.loans.currentLoan},clientBirthDate:function(){return this.client&&Object(U["d"])(this.client.birthDate)},birthDate:{get:function(){return this.client&&Object(U["b"])(this.client.birthDate,"YYYY-MM-DD","DD.MM.YYYY")},set:function(t){this.client.birthDate=Object(U["b"])(t,"DD.MM.YYYY","YYYY-MM-DDTHH:mm:ssZ")}},issuedAt:{get:function(){return this.client&&Object(U["b"])(this.client.passport.issuedAt,"YYYY-MM-DD","DD.MM.YYYY")},set:function(t){this.client.passport.issuedAt=Object(U["b"])(t,"DD.MM.YYYY","YYYY-MM-DDTHH:mm:ssZ")}},clientLastLogin:function(){return this.client&&hs["b"].formatDate(this.isApplicationCard?this.$operatorWB.applications.get("item.lastLogin")&&this.$operatorWB.applications.get("item.lastLogin.date"):this.client.lastLogin,"DD.MM.YYYY HH:mm:ss")},clientGenderClass:function(){return this.client&&"fa fa-"+this.client.gender},clientGenderColor:function(){return this.client&&"male"===this.client.gender?"blue":"pink"},clientName:function(){return this.client&&(this.client.lastName||"")+" "+(this.client.firstName||"")+" "+(this.client.middleName||"")},clientMartial:function(){return this.client&&this.client.maritalStatus?this.$t("clients.marital."+this.client.maritalStatus):""},clientEducation:function(){return this.client&&this.client.education?this.$t("clients.education."+Hl()(this.client.education)):""},paymentSystem:function(){if(!this.loan)return"";var t=this.loan.paymentSystem;return t&&this.$t("clients.paymentSystem."+t.type)+(t.number?" (".concat(t.number.substring(0,4),"******").concat(t.number.substring(t.number.length-4),")"):"")},paymentSystemOptions:function(){var t=this;return this.loan&&this.loan.hasOwnProperty("paymentSystem")&&[this.loan.paymentSystem].map((function(e){return{label:e.number,type:e.type,description:t.$t("clients.paymentSystem.".concat(e.type))}})).concat([{label:"CONTACT",type:"contact",description:this.$t("clients.paymentSystem.contact")}])||[]},clientAddress:function(){if(!this.client)return"";var t=this.client||null,e=t.homeAddress;return e&&(e.postalCode||"")+" "+(e.city||"")+" "+(e.street||"")+" д. "+(e.house||"")+" "+(e.building||"")+" кв. "+(e.flat||"")},workAddress:function(){if(!this.client)return"";var t=this.client||null,e=t.workAddress,a=e&&(e.postalCode||"")+(e.city&&", "+e.city||"")+(e.street&&", "+e.street||"")+(e.house&&", д. "+e.house||"")+(e.corpus&&", корп. "+e.corpus||"")+(e.stroenie&&", стр. "+e.stroenie||"")+(e.apartment&&", апарт. "+e.apartment||"");return a},clientPassport:function(){if(!this.client)return"";var t=this.client.passport;return t&&t.number&&t.number.slice(0,4)+" "+t.number.slice(4)+" "+Object(U["d"])(t.issuedAt)+", код подразделения "+t.dept},children:function(){var t;return t=this.client&&0===this.client.childrenCount?"Нет":this.client&&this.client.childrenCount+" "+Object(fs["l"])(this.client.childrenCount,"ребенок"),t||null},yearsFromNow:function(){return yu()().diff(this.client.birthDate,"years")}},watch:{loan:function(t){this.paymentSystemOptions&&(this.$operatorWB.communication.paymentSystemSelect=this.paymentSystemOptions[0])}}},Cu=xu,$u=(a("c7aa0"),Object(c["a"])(Cu,El,Ll,!1,null,null,null)),Bu=$u.exports;d()($u,"components",{QCard:m["a"],QCardSection:p["a"],QIcon:ja["a"],QInput:Ns["a"],QPopupProxy:qr["a"],QDate:wr["a"],QTooltip:$n["a"],QSelect:Jn["a"],QItem:Ze["a"],QItemSection:Ke["a"],QItemLabel:Xn["a"],QBtn:b["a"],QField:Bi["a"]});var qu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"card debt brs5 ovh q-mr-xs"},[a("q-card-section",{staticClass:"q-pa-none"},[a("div",{staticClass:"card__title flex justify-between items-center"},[a("div",{staticClass:"debt__title-text"},[t._v(t._s(t.$t("clients.debt.info")))]),a("div",{staticClass:"debt__title-text flex items-center"},[a("span",{staticClass:"debt__title-delay"},[t._v(t._s(t.$t("clients.debt.delay")))]),a("span",{staticClass:"debt__title-days text-center"},[t._v(t._s(t.loan&&t.loan.current.delay))])])])]),a("q-card-section",{staticClass:"card__content q-pa-none"},[a("q-scroll-area",{staticStyle:{height:"380px","max-width":"inherit"}},[t.loan&&"pos"===t.loan.product?[a("Pos"),a("Promises")]:[a("Current"),a("div",{staticClass:"debt__content-list"},[a("div",{staticClass:"card__row debt__accruals no-border"},[a("span",{staticClass:"debt__accruals-link link",on:{click:function(e){return t.$operatorWB.layout.set("view","accruals")}}},[t._v(t._s(t.$t("clients.debt.accrualsHistory")))])]),a("Agreements"),a("Promises"),a("Payments")],1)]],2)],1)],1)},wu=[],Wu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.currentPaymentsLength?a("div",{staticClass:"debt__payments bg-profile"},[a("div",{staticClass:"deb__payments-date flex justify-between items-center"},[a("p",[t._v(t._s(t.$t("clients.debt.lastPaymentDate")))]),a("p",[t._v(t._s(t.currentLastPaymentPaidAt))])]),a("div",{staticClass:"debt__payments-sum flex justify-between items-center"},[a("p",[t._v(t._s(t.$t("clients.debt.paymentSum")))]),a("p",[t._v(t._s(t.currentLastPaymentAmount))])]),a("div",{staticClass:"debt__payments-payed flex justify-between items-center"},[a("p",[t._v(t._s(t.$t("clients.debt.partialRepaid")))]),a("p",[a("b",[t._v(t._s(t.currentPaymentsTotal))])])]),a("div",{staticClass:"debt__payments-history"},[a("span",{staticClass:"debt__payments-link link q-mr-md",on:{click:function(e){return t.$operatorWB.layout.set("view","payments")}}},[t._v(t._s(t.$t("clients.debt.paymentsHistory"))+" ("+t._s(t.currentPaymentsLength)+")")])])]):t._e()},ku=[],Du={name:"Payments",computed:{currentLastPaymentAmount:function(){return Object(U["l"])(this.$operatorWB.loans.currentLastPayment.amount,!0)},currentLastPaymentPaidAt:function(){return Object(U["d"])(this.$operatorWB.loans.currentLastPayment.paidAt)},currentPaymentsTotal:function(){return Object(U["l"])(this.$operatorWB.loans.currentPaymentsTotal,!0)},currentPaymentsLength:function(){return this.$operatorWB.loans.currentPayments.length}}},Ou=Du,ju=Object(c["a"])(Ou,Wu,ku,!1,null,"7366e7e4",null),Su=ju.exports,Pu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.promisesLength?a("div",{staticClass:"debt__promises"},[a("div",{staticClass:"debt__promises-pay flex justify-between items-center"},[a("div",{staticClass:"q-pa-none"},[t._v(t._s(t.$t("communications.result."+(t.lastPromise?t.lastPromise.type:"simple"))))]),a("div",{staticClass:"q-pa-none"},[a("b",[t._v(t._s(t.lastPromiseDate))])])]),a("div",{staticClass:"debt__promises-sum sum flex justify-between items-center"},[a("p",[t._v(t._s(t.$t("clients.debt.sum")))]),a("p",[t._v(t._s(t.lastPromiseAmount))])]),a("div",{staticClass:"debt__promises-status flex justify-between items-center"},[a("p",[t._v(t._s(t.$t("clients.debt.status")))]),a("p",[a("strong",{class:t.colorClass(t.lastPromiseStatus)},[t._v(t._s(t.lastPromiseStatusText))])])]),a("div",{staticClass:"debt__promises-history"},[a("span",{staticClass:"debt__promises-link link",on:{click:function(e){return t.$operatorWB.layout.set("view","promises")}}},[t._v(t._s(t.$t("clients.debt.promisesHistory"))+" ("+t._s(t.promisesLength)+")")])])]):t._e()},Mu=[],Au={name:"Promises",computed:{promisesLength:function(){return this.$operatorWB.loans.currentPromises&&this.$operatorWB.loans.currentPromises.length},lastPromise:function(){return this.$operatorWB.loans.lastPromise},lastPromiseDate:function(){return this.lastPromise&&Object(U["d"])(this.lastPromise.promisedAt)},lastPromiseAmount:function(){return this.lastPromise&&Object(U["l"])(this.lastPromise.promisedAmount,!0)},lastPromiseStatus:function(){return this.lastPromise&&this.lastPromise.status},lastPromiseStatusText:function(){var t=this.$t("communications.promises.unknown");return this.lastPromiseStatus&&(t=this.$t("communications.promises."+Hl()(this.lastPromiseStatus))),t}},methods:{colorClass:function(t){var e="";return"notFulfilled"===Hl()(t)&&(e="text-negative"),"partiallyFulfilled"===Hl()(t)&&(e="text-warning"),e}}},Tu=Au,Qu=Object(c["a"])(Tu,Pu,Mu,!1,null,null,null),Fu=Qu.exports,Iu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.currentAgreementsLength?a("div",{staticClass:"card__row debt__longs no-border bg-profile"},[a("span",{staticClass:"debt__longs-link link q-mr-md",on:{click:function(e){return t.$operatorWB.layout.set("view","agreements")}}},[t._v(t._s(t.$t("histories.agreements.title"))+" ("+t._s(t.currentAgreementsLength||0)+")")])]):t._e()},Ru=[],Eu={name:"Agreements",computed:{currentAgreementsLength:function(){return this.$operatorWB.loans.currentAgreements.length}}},Lu=Eu,Yu=Object(c["a"])(Lu,Iu,Ru,!1,null,"096ebf45",null),Hu=Yu.exports,Nu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"debt__content"},[a("div",{staticClass:"row flex items-center justify-between q-pa-md"},[a("span",{staticClass:"text-profile"},[t._v("Просроченная:")]),a("strong",{staticClass:"text-negative"},[t._v(t._s(t.overduePaymentsAmount&&t.money(t.overduePaymentsAmount.total,!0)))])]),a("div",{staticClass:"row flex items-center justify-between q-px-md q-mb-md"},[a("span",{staticClass:"text-profile"},[t._v("Просрочено с:")]),a("strong",{staticClass:"text-negative"},[t._v(t._s(t.firstOverduePaymentDate))])]),a("q-separator"),t._m(0),a("div",{staticClass:"row flex items-center justify-between q-px-md q-py-xs q-pl-xl"},[a("span",{staticClass:"text-profile"},[t._v("Срок до:")]),a("strong",[t._v(t._s(t.nextPaymentDate))])]),a("div",{staticClass:"row flex items-center justify-between q-px-md q-py-xs q-pl-xl"},[a("span",{staticClass:"text-profile"},[t._v("Сумма:")]),a("strong",[t._v(t._s(t.nextPaymentAmount))])]),a("div",{staticClass:"row q-pa-md"},[a("span",{staticClass:"debt__payments-link link q-mr-md"},[t._v("График платежей ("+t._s(t.$operatorWB.loans.currentLoan.schedules.length)+")"),a("q-tooltip",{attrs:{anchor:"center left",self:"center right",offset:[10,0]}},[a("PosScheduleList",{attrs:{schedule:t.$operatorWB.loans.currentLoan.schedules}})],1)],1)]),a("q-separator"),a("div",{staticClass:"row flex items-center justify-between q-pa-md"},[a("span",{staticClass:"text-profile"},[t._v("Оплачено:")]),a("strong",[t._v(t._s(t.paidPaymentsAmount&&t.money(t.paidPaymentsAmount.paid,!0)))])]),a("div",{staticClass:"row q-pa-md"},[a("span",{staticClass:"debt__payments-link link q-mr-md",on:{click:function(e){return t.$operatorWB.layout.set("view","payments")}}},[t._v(t._s(t.$t("clients.debt.paymentsHistory"))+" ("+t._s(t.currentPaymentsLength)+")")])])],1)},zu=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row flex items-center q-pa-md"},[a("span",{staticClass:"text-profile"},[t._v("Платеж по графику:")])])}],Vu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-tooltip",{attrs:{anchor:"top left",self:"bottom right",offset:[10,0]}},[a("div",{staticClass:"tooltip-rates brs5"},[a("div",{staticClass:"row flex justify-between q-py-sm"},[a("div",{staticClass:"text-profile"},[t._v("ОД")]),a("strong",{staticClass:"q-ml-lg"},[t._v(t._s(t.money(t.amount.principal,!0)))])]),a("div",{staticClass:"row flex justify-between q-py-sm"},[a("div",{staticClass:"text-profile"},[t._v("%")]),a("strong",{staticClass:"q-ml-lg"},[t._v(t._s(t.money(t.amount.interests,!0)))])]),a("div",{staticClass:"row flex justify-between q-py-sm"},[a("div",{staticClass:"text-profile"},[t._v("Штрафы")]),a("strong",{staticClass:"q-ml-lg"},[t._v(t._s(t.money(t.amount.fines,!0)))])]),a("div",{staticClass:"row flex justify-between q-py-sm"},[a("strong",{staticClass:"text-white text-bold"},[t._v("Оплачено")]),a("strong",{staticClass:"text-white q-ml-lg"},[t._v(t._s(t.money(t.amount.paid,!0)))])])])])},Gu=[],Uu={name:"AmountDetails",props:{amount:Object,default:{}},data:function(){return{money:U["l"]}}},Zu=Uu,Ku=Object(c["a"])(Zu,Vu,Gu,!1,null,"1ea76c9c",null),Ju=Ku.exports;d()(Ku,"components",{QTooltip:$n["a"]});var Xu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-table",{staticClass:"my-sticky-header-table",attrs:{columns:t._columns,data:t.schedules,"row-key":"id",pagination:t.pagination,"hide-bottom":""},scopedSlots:t._u([{key:"body",fn:function(e){return a("q-tr",{class:{"text-positive":"paid"===e.row.status,"text-negative":"paid"!==e.row.status&&Date.parse(e.row.date)<Date.now()},attrs:{"data-prop":e}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,attrs:{props:e}},[a("span",[t._v(t._s(n.value))])])})),1)}},{key:"bottom-row",fn:function(e){return[a("q-tr",[a("q-td",{attrs:{colspan:"2"}},[a("strong",[t._v("Просроченные:")])]),a("q-td",{staticClass:"text-negative text-right"},[a("strong",[t._v(t._s(t.overdueSum))])])],1)]}}])})},td=[],ed={name:"PosScheduleList",props:{schedule:{type:Array,required:!0},simple:{type:Boolean,default:!1}},data:function(){var t=this;return{pagination:{page:1,rowsPerPage:10},columns:[{name:"index",label:"№",field:function(t){return t.__index+1},required:!0,align:"left"},{name:"date",label:this.$t("histories.schedule.date"),field:function(t){return Object(U["d"])(t.date)},required:!0,align:"right"},{name:"sum",label:this.$t("histories.schedule.sum"),field:function(t){return Object(U["l"])(t.amount.expected)},required:!0,align:"right"},{name:"paid",label:this.$t("histories.schedule.paid"),field:function(t){return t.amount.paid>0?Object(U["l"])(t.amount.paid):"––––"},required:!0,align:"right"},{name:"overdued",label:this.$t("histories.schedule.overdueShort"),field:function(t){return"paid"!==t.status&&Date.parse(t.date)<Date.now()&&t.amount.expected-t.amount.paid>0?Object(U["l"])(t.amount.expected-t.amount.paid):"––––"},required:!0,align:"right"},{name:"status",label:this.$t("histories.schedule.status"),field:function(e){return"not_paid"!==e.status?t.$t("clients.debt.paymentSchedule.statuses."+e.status):"––––"},required:!0,align:"right"}]}},computed:{_columns:function(){var t=this;return this.columns.filter((function(e){return!t.simple||!["paid","status"].includes(e.name)}))},overdueSum:function(){var t=this.schedule.filter((function(t){return"paid"!==t.status&&Date.parse(t.date)<Date.now()})).reduce((function(t,e){return t+(e.amount.expected-e.amount.paid)}),0);return t>0?Object(U["l"])(t):"––"},paidSum:function(){var t=this.schedule.reduce((function(t,e){return t+e.amount.paid}),0);return t>0?Object(U["l"])(t):"––"},totalSum:function(){var t=this.schedule.reduce((function(t,e){return t+e.amount.expected}),0);return t>0?Object(U["l"])(t):"––"},debtSum:function(){var t=this.schedule.reduce((function(t,e){return t+e.amount.expected}),0);return t>0?Object(U["l"])(t):"––"},schedules:function(){return Ne()(this.schedule,["date"])}}},ad=ed,nd=Object(c["a"])(ad,Xu,td,!1,null,"6e4979b4",null),sd=nd.exports;d()(nd,"components",{QTable:Zr["a"],QTr:Er["a"],QTd:Kr["a"]});var id=function(){return{principal:0,interests:0,fines:0,total:0,paid:0}},rd={name:"Pos",components:{PosScheduleList:sd,AmountDetails:Ju,RateList:sc},data:function(){return{money:U["l"]}},computed:{schedules:function(){return this.$operatorWB.loans.currentLoan&&this.$operatorWB.loans.currentLoan.schedules},overduePayments:function(){return this.schedules&&this.schedules.filter((function(t){return"paid"!==t.status&&Date.parse(t.date)<Date.now()}))},paidPayments:function(){return this.schedules&&this.schedules.filter((function(t){return t.amount.paid&&t.amount.paid>0}))},firstOverduePaymentDate:function(){return this.overduePayments.length?Object(U["d"])(Object(zi["first"])(this.overduePayments).date):"–"},notPaidPayments:function(){return this.schedules&&this.schedules.filter((function(t){return"paid"!==t.status}))},overduePaymentsAmount:function(){return this.paymentsAmount(this.overduePayments)},notPaidPaymentsAmount:function(){return this.paymentsAmount(this.notPaidPayments)},paidPaymentsAmount:function(){return this.paymentsAmount(this.paidPayments)},nextPayment:function(){return Object(zi["first"])(this.notPaidPayments.filter((function(t){return Date.parse(t.date)>Date.now()})))},nextPaymentAmount:function(){var t=this.notPaidPayments.filter((function(t){return Date.parse(t.date)<Date.now()})).reduce((function(t,e){return t+(e.amount.expected-e.amount.paid)}),0);return this.nextPayment&&Object(U["l"])(this.nextPayment.amount.expected+t,!0)},nextPaymentDate:function(){return this.nextPayment&&Object(U["d"])(this.nextPayment.date)||Object(U["d"])(new Date)},currentPaymentsLength:function(){return this.$operatorWB.loans.currentPayments.length}},methods:{paymentsAmount:function(t){return t.reduce((function(t,e){return t.principal+=e.debt.principal,t.interests+=e.debt.interests,t.fines+=e.debt.fines,t.total+=e.debt.total,t.paid+=e.amount.paid,t}),id())}}},od=rd,ld=Object(c["a"])(od,Nu,zu,!1,null,"ea695770",null),cd=ld.exports;d()(ld,"components",{QSeparator:f["a"],QTooltip:$n["a"]});var ud=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"debt__content"},[a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left card__row-left_w60p text-left"},[t._v(t._s(t.$t("clients.debt.currentSum")))]),a("div",{staticClass:"card__row-right card__row-right_w40p text-right"},[a("b",[t._v(t._s(t.accrual&&t.money(t.accrual.sum_total,!0)))])])]),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left card__row-left_w60p text-left"},[t._v(t._s(t.$t("clients.debt.od")))]),a("div",{staticClass:"card__row-right card__row-right_w40p text-right"},[t._v(t._s(t.accrual&&t.money(t.accrual.sum_main_debt,!0)))])]),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left card__row-left_w60p text-left"},[t._v("%")]),a("div",{staticClass:"card__row-right card__row-right_w40p text-right"},[t._v(t._s(t.accrual&&t.money(t.accrual.sum_total_interest,!0)))])]),a("div",{staticClass:"card__row flex items-center"},[a("div",{staticClass:"card__row-left card__row-left_w60p text-left"},[t._v(t._s(t.$t("clients.debt.penalty")))]),a("div",{staticClass:"card__row-right card__row-right_w40p text-right"},[t._v(t._s(t.accrual&&t.money(t.accrual.sum_total_fines,!0)))])])])},dd=[],md={name:"Current",data:function(){return{money:U["l"]}},computed:{accrual:function(){var t=this.$operatorWB.loans.currentAccruals[this.$operatorWB.loans.currentAccruals.length-1];return t}}},pd=md,fd=Object(c["a"])(pd,ud,dd,!1,null,"c6386112",null),hd=fd.exports,bd={name:"Debt",components:{Current:hd,Pos:cd,Agreements:Hu,Promises:Fu,Payments:Su},props:{hard:Boolean},data:function(){return{money:U["l"],paymentScheduleList:[],camelCase:Hl.a}},computed:{loan:function(){return this.$operatorWB.loans.currentLoan},client:function(){return this.$operatorWB.clients.currentClient},lastPromise:function(){return this.$operatorWB.loans.lastPromise},_paymentScheduleList:function(){return this.paymentScheduleList}},methods:{colorClass:function(t){var e="";return"notFulfilled"===Hl()(t)&&(e="red"),"partiallyFulfilled"===Hl()(t)&&(e="orange"),e}}},gd=bd,vd=(a("37ad"),Object(c["a"])(gd,qu,wu,!1,null,null,null)),_d=vd.exports;d()(vd,"components",{QCard:m["a"],QCardSection:p["a"],QScrollArea:Fe["a"]});var yd={name:"Borrower",components:{Profile:Bu,Debt:_d},data:function(){return{}},computed:{clientInfo:function(){return this.$operatorWB.layout.currentCard&&this.$operatorWB.layout.isApplicationCard?this.$operatorWB.applications.get("item.profile"):this.$operatorWB.clients.currentClient}}},xd=yd,Cd=(a("dc39"),Object(c["a"])(xd,Il,Rl,!1,null,"36ffe54a",null)),$d=Cd.exports,Bd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"card comments brs5 ovh"},[a("q-card-section",{staticClass:"q-pa-none"},[a("CommunicationHeader")],1),a("q-card-section",{staticClass:"card__content q-pa-none"},[a("div",{staticClass:"comments__content flex"},[a("CommunicationContact"),a("CommunicationActions"),"result"===t.$operatorWB.communication.currentForm?[a("ResultForm")]:t._e(),"sms"===t.$operatorWB.communication.currentForm?a("SMSForm"):t._e(),"email"===t.$operatorWB.communication.currentForm?a("EmailForm"):t._e()],2)])],1)},qd=[],wd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card__title flex justify-between"},[a("div",{staticClass:"comments__header-title flex items-center"},[t._v(t._s(t.$t("communications.title")))]),a("div",{staticClass:"flex items-center"},[a("span",{staticClass:"link comments__header-link",on:{click:function(e){t.$operatorWB.layout&&t.$operatorWB.layout.set("view","communications")}}},[t._v(t._s(t.$t("communications.labels.history"))+" ("+t._s(t.$operatorWB.clients.currentClient.communications&&t.$operatorWB.clients.currentClient.communications.length)+")")])])])},Wd=[],kd={name:"Header"},Dd=kd,Od=Object(c["a"])(Dd,wd,Wd,!1,null,"97dcc7f4",null),jd=Od.exports,Sd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comments__contact"},[a("div",{staticClass:"comments__contact-title"},[t._v(t._s(t.$t("communications.labels.contact")))]),a("div",{staticClass:"comments__contact-main"},[a("div",{staticClass:"comments__contact-phone flex justify-between active-bg"},[a("div",{staticClass:"comments__contact-number"},[t._v(t._s(t.lastCall&&t.lastCall.phone_number))]),t.lastCallPhoneObj.hasOwnProperty("blocked")?[t.lastCallPhoneObj.blocked?a("q-icon",{staticClass:"q-mx-sm",attrs:{name:"not_interested",color:"negative"}},[a("q-tooltip",{attrs:{anchor:"bottom left",self:"bottom left"}},[t.lastCallPhoneObj.blocked?a("span",[t._v(t._s(t.$t("tooltips.phoneStatus.blocked")))]):t._e()])],1):t._e()]:t._e(),a("div",{staticClass:"comments__contact-type"},[t._v(t._s(t.$t("clients.phones."+t.typeOfPhone)))])],2),a("div",{staticClass:"comments__contact-comm flex justify-between"},[a("div",{staticClass:"comments__contact-last"},[t._v(t._s(t.$t("communications.labels.lastContact")))]),a("div",{staticClass:"comments__contact-established"},[t._v(t._s(t.getShortDate(t.$operatorWB.clients.currentLastCommunicationDate)||t.$t("communications.labels.never")))])]),a("div",{staticClass:"comments__contact-conversation flex justify-between items-center"},[a("div",{staticClass:"comments__contact-time"},[t._v(t._s(t.$t("communications.labels.callDuration")))]),a("div",{staticClass:"comments__contact-minutes active-text flex items-center"},[a("q-icon",{staticClass:"comments__contact-mic",attrs:{name:"headset_mic"}}),a("p",[t._v(t._s(t.timeOfLastCall))])],1)]),a("div",{staticClass:"comments__contact-comm flex justify-between"},[a("div",{staticClass:"comments__contact-last"},[t._v(t._s(t.$t("communications.labels.callType")))]),a("div",{staticClass:"comments__contact-established"},[a("span",{class:t.lastCall&&t.callColor(t.lastCall.direction)},[t._v(t._s(t.lastCall&&t.lastCall.direction&&t.$t("calls.type."+t.camelCase(t.lastCall.direction))||t.$t("calls.type.unknown")))])])]),a("div",{staticClass:"comments__contact-comm flex justify-between"},[a("div",{staticClass:"form__send-template full-width q-pt-none"},[a("div",{staticClass:"send__template q-pr-none"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"send__template-field flex justify-between full-width"},[a("q-select",{staticClass:"send__template-select brs3 full-width",attrs:{options:t.phonesOptions,"options-dense":"",outlined:"",required:"",dark:!1,color:"WB-primary"},scopedSlots:t._u([{key:"option",fn:function(e){return[a("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[a("q-item-section",[a("q-item-label",[t._v(t._s(e.opt.label))]),a("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.opt.sublabel))])],1)],1)]}}]),model:{value:t.$operatorWB.dialer.phoneForManualDialSelect,callback:function(e){t.$set(t.$operatorWB.dialer,"phoneForManualDialSelect",e)},expression:"$operatorWB.dialer.phoneForManualDialSelect"}})],1)])])])])])])},Pd=[],Md=(a("4917"),{name:"Contact",data:function(){return{camelCase:Hl.a,getShortDate:U["d"],number:null,direction:null}},computed:{lastCall:function(){return this.$operatorWB.calls.lastCallOfClient(this.$operatorWB.clients.current)},timeOfLastCall:function(){return this.$operatorWB.calls.timeOfLastCall},currentPhones:function(){return this.$operatorWB.clients.currentPhones},lastCallPhoneObj:function(){var t=this,e=this.lastCall&&this.currentPhones&&this.currentPhones.find((function(e){return e&&e.number===t.lastCall.phone_number}));return e||{}},typeOfPhone:function(){return this.lastCallPhoneObj.hasOwnProperty("type")?this.lastCallPhoneObj.type:"unknown"},timeOfCall:function(){return this.lastCall&&this.lastCall.call_end-this.lastCall.call_start},phonesOptions:function(){return this.$operatorWB.dialer.phonesOptions}},methods:{callColor:function(t){var e="";return t&&t.match("incoming")&&(e="red"),t&&t.match("outgoing")&&(e="orange"),e}}}),Ad=Md,Td=(a("a36c"),Object(c["a"])(Ad,Sd,Pd,!1,null,"913c6634",null)),Qd=Td.exports;d()(Td,"components",{QIcon:ja["a"],QTooltip:$n["a"],QSelect:Jn["a"],QItem:Ze["a"],QItemSection:Ke["a"],QItemLabel:Xn["a"]});var Fd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comments__action"},[a("div",{staticClass:"comments__action-title"},[t._v(t._s(t.$t("communications.labels.actions")))]),a("div",{staticClass:"comments__action-list q-mb-xs"},[a("div",{staticClass:"flex items-center justify-between q-mb-sm"},[a("div",{staticClass:"comments__action-left",class:t.isDisabledManualCalls?"":"active-btn"},[a("q-btn",{staticClass:"btn comments__action-btn btn_disabled",attrs:{disable:t.isDisabledManualCalls,size:"sm",icon:"phone"},on:{click:t.callStart}}),a("span",{staticClass:"q-ml-sm"},[t._v(t._s(t.$t("communications.labels.callStart")))])],1),t.$operatorWB.dialer.hold?a("div",{staticClass:"comments__action-right",class:null===t.$operatorWB.calls.currentCall?"":"active-btn"},[a("q-btn",{staticClass:"btn comments__action-btn btn_disabled",attrs:{disable:null===t.$operatorWB.calls.currentCall,size:"sm",icon:"phone_callback"},on:{click:t.$operatorWB.dialer.sayUnhold}}),a("span",{staticClass:"q-ml-sm"},[t._v(t._s(t.$t("communications.labels.unhold")))])],1):a("div",{staticClass:"comments__action-right",class:null===t.$operatorWB.calls.currentCall?"":"active-btn"},[a("q-btn",{staticClass:"btn comments__action-btn btn_disabled",attrs:{disable:null===t.$operatorWB.calls.currentCall,size:"sm",icon:"phone_paused"},on:{click:t.$operatorWB.dialer.sayHold}}),a("span",{staticClass:"q-ml-sm"},[t._v(t._s(t.$t("communications.labels.callHold")))])],1)]),a("div",{staticClass:"flex items-center justify-between q-mb-sm"},[a("div",{staticClass:"comments__action-left",class:null===t.$operatorWB.calls.currentCall?"":"active-btn-red"},[a("q-btn",{staticClass:"btn comments__action-btn btn_disabled",attrs:{disable:null===t.$operatorWB.calls.currentCall,size:"sm",icon:"call_end"},on:{click:t.$operatorWB.dialer.sayDrop}}),a("span",{staticClass:"q-ml-sm"},[t._v(t._s(t.$t("communications.labels.callEnd")))])],1),a("div",{staticClass:"comments__action-right",class:null===t.$operatorWB.calls.currentCall||"blank"===t.$operatorWB.dialer.phoneForCallForward?"":"active-btn"},[a("q-btn",{staticClass:"btn comments__action-btn btn_disabled",attrs:{disable:null===t.$operatorWB.calls.currentCall||"blank"===t.$operatorWB.dialer.phoneForCallForward,size:"sm",icon:"phone_forwarded"},on:{click:function(e){t.$operatorWB.dialer.sayTransfer({phone:t.$operatorWB.dialer.choosePhoneForCallForward(t.$operatorWB.dialer.phoneForCallForward)})}}}),a("span",{staticClass:"q-ml-sm"},[t._v(t._s(t.$t("communications.labels.callForward")))])],1)]),a("div",{staticClass:"flex items-center justify-between q-mb-sm"},[a("div",{staticClass:"comments__action-left",class:t.$operatorWB.user.isUserSupervisor?"":"active-btn_sms"},[a("q-btn",{staticClass:"btn comments__action-btn btn_disabled",attrs:{disable:t.$operatorWB.user.isUserSupervisor,size:"sm",icon:"contact_mail"},on:{click:function(e){return t.fillRestoreAccessFormAndOpenModal()}}},[a("q-tooltip",{attrs:{anchor:"bottom right",self:"top right"}},[t._v(t._s(t.$t("communications.labels.restoreAccessToAccountTooltip")))])],1),a("span",{staticClass:"q-ml-sm smaller"},[t._v(t._s(t.$t("communications.labels.restoreAccessToAccount")))])],1),a("div",{staticClass:"comments__action-right"},[a("div",{staticClass:"form__send-template full-width q-pt-none"},[a("div",{staticClass:"send__template"},[a("div",{staticClass:"send__template-field flex justify-between full-width"},[a("q-select",{staticClass:"send__template-select brs3 full-width",attrs:{options:t.phonesOptionsCallForward,disable:"","options-dense":"",outlined:"",required:"",dark:!1,color:"WB-primary"},model:{value:t.$operatorWB.dialer.phoneForCallForwardSelect,callback:function(e){t.$set(t.$operatorWB.dialer,"phoneForCallForwardSelect",e)},expression:"$operatorWB.dialer.phoneForCallForwardSelect"}})],1),"other"===t.$operatorWB.dialer.phoneForCallForward?[a("div",{staticClass:"send__template-field flex justify-between full-width phone"},[a("q-input",{staticClass:"q-mt-xs q-pa-none full-width send__template-select brs3 q-pa-none",attrs:{placeholder:"79123456789",type:"number",outlined:"",dark:!1,color:"WB-primary"},model:{value:t.$operatorWB.dialer.directPhone,callback:function(e){t.$set(t.$operatorWB.dialer,"directPhone",e)},expression:"$operatorWB.dialer.directPhone"}})],1)]:t._e()],2)])])]),a("div",{staticClass:"comments__action-row_last flex items-center justify-between q-mb-sm"},[a("div",{staticClass:"comments__action-left",class:t.isDisabledSMS?"":"active-btn_sms"},[a("q-btn",{staticClass:"btn comments__action-btn btn_disabled",attrs:{disable:t.isDisabledSMS,size:"sm",icon:"sms"},on:{click:function(e){t.$operatorWB.communication.currentForm="sms"}}}),a("span",{staticClass:"q-ml-sm"},[t._v(t._s(t.$t("communications.labels.sendSMS")))])],1),a("div",{staticClass:"comments__action-right",class:t.isDisabledEmail?"":"active-btn_email"},[a("q-btn",{staticClass:"btn comments__action-btn btn_disabled",attrs:{disable:t.isDisabledEmail,size:"sm",icon:"email"},on:{click:function(e){t.$operatorWB.communication.currentForm="email"}}}),a("span",{staticClass:"q-ml-sm"},[t._v(t._s(t.$t("communications.labels.sendEmail")))])],1)])]),a("q-dialog",{attrs:{"content-style":"z-index: 6100;"},model:{value:t.$operatorWB.layout.areYouSureSendSmsModal,callback:function(e){t.$set(t.$operatorWB.layout,"areYouSureSendSmsModal",e)},expression:"$operatorWB.layout.areYouSureSendSmsModal"}},[a("q-card",{staticClass:"modal-content"},[a("q-card-section",[a("div",{staticClass:"modal__title q-mb-sm"},[t._v(t._s(t.$t("modals.sendSms.areYouSure")))])]),a("q-card-actions",{staticClass:"justify-end"},[a("q-btn-group",{staticClass:"modal__buttons w100p flex justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"modal__btn",attrs:{label:t.$t("modals.buttons.cancel")}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"modal__btn",attrs:{label:t.$t("modals.buttons.send"),loading:t.$operatorWB.communication.loading.sendSMS},on:{click:t.sendRestoreAccessSMS}},[a("q-spinner",{attrs:{slot:"loading",size:"20px"},slot:"loading"})],1)],1)],1)],1)],1)],1)},Id=[];function Rd(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function Ed(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Rd(Object(a),!0).forEach((function(e){z()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Rd(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Ld=function(){return{status:"contactWithClient",result:"restoreAccessSms"}},Yd={name:"Actions",computed:{lastCall:function(){return this.$operatorWB.calls.lastCallOfClient(this.$operatorWB.clients.current)},currentOptionsForCallForward:function(){return Object(fs["m"])(this.$operatorWB.user.isUserHaveRoles("operatorHard"))},phonesOptionsCallForward:function(){var t=this,e=[];return Object.assign({},this.currentOptionsForCallForward.map((function(a){return e.push({value:a,label:t.$app.$t("calls.phonesForCallForward."+a)})}))),e},isDisabledManualCalls:function(){return"blank"===this.$operatorWB.dialer.phoneForManualDial},isDisabledMessages:function(){return this.$operatorWB.user.isUserHaveRoles(["operatorUnderwriting","supervisorUnderwriting","leaderUnderwriting"])},isDisabledSMS:function(){return"sms"===this.$operatorWB.communication.currentForm||this.isDisabledMessages},isDisabledEmail:function(){return"email"===this.$operatorWB.communication.currentForm||this.isDisabledMessages}},methods:{callStart:function(){var t={contactedAt:hs["b"].formatDate(Date.now(),"YYYY-MM-DDTHH:mm:ssZZ"),action:"manualDial",channel:{phone:{variant:"outgoingManualCall",number:this.$operatorWB.dialer.phoneForManualDial}}},e=this.$operatorWB.communication.form;this.$operatorWB.communication.form=Object.assign({},e,t);var a={client_id:this.$operatorWB.clients.current,loan_id:this.$operatorWB.loans.current,phone:this.$operatorWB.dialer.phoneForManualDial};this.$operatorWB.dialer.sayMake(a)},fillRestoreAccessFormAndOpenModal:function(){this.$operatorWB.communication.smsFormForRestoreAccess=null;var t={action:"other"};this.lastCall&&this.lastCall.client_id===this.$operatorWB.clients.current&&(t={action:this.lastCall.direction.includes("autodial")||this.lastCall.direction.includes("incoming")?"autoDial":"manualDial",channel:{phone:{number:this.lastCall.phone_number,variant:"".concat(Hl()(this.lastCall.direction)+"Call")}}});var e={clientId:this.$operatorWB.clients.current,contactedAt:hs["b"].formatDate(Date.now(),"YYYY-MM-DDTHH:mm:ssZZ"),productId:this.$operatorWB.loans.current,comment:this.$t("communications.labels.restoreAccessToAccountComment")};this.$operatorWB.communication.smsFormForRestoreAccess=Object.assign({},Ld(),Ed(Ed({},e),t)),this.$operatorWB.layout.areYouSureSendSmsModal=!0},sendRestoreAccessSMS:function(){var t=this;return Gn()(zn.a.mark((function e(){var a;return zn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$operatorWB.communication.loading.sendSMS=!0,e.next=3,Un["a"].crm.addCommunication(t.$operatorWB.communication.smsFormForRestoreAccess,t);case 3:a=e.sent,t.$operatorWB.communication.loading.sendSMS=!1,a.data&&(t.$operatorWB.messages.show({color:"positive",message:t.$t("communications.sms.sendSuccess")}),t.$operatorWB.layout.areYouSureSendSmsModal=!1);case 6:case"end":return e.stop()}}),e)})))()}}},Hd=Yd,Nd=(a("84a8"),Object(c["a"])(Hd,Fd,Id,!1,null,"4c8141e8",null)),zd=Nd.exports;d()(Nd,"components",{QBtn:b["a"],QTooltip:$n["a"],QSelect:Jn["a"],QInput:Ns["a"],QDialog:$t["a"],QCard:m["a"],QCardSection:p["a"],QCardActions:h["a"],QBtnGroup:Za["a"],QSpinner:Hs["a"]}),d()(Nd,"directives",{ClosePopup:Bn["a"]});var Vd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"comments__result classic-result-form",on:{submit:function(e){return e.preventDefault(),t.$operatorWB.communication.save(e)}}},[a("div",{staticClass:"comments__result-form flex"},[a("div",{staticClass:"comments__result-main",class:{"comments__result-main_full-width":!t.$operatorWB.communication.needCalc}},[a("div",{staticClass:"comments__result-title q-pb-sm"},[t._v(t._s(t.$t("communications.labels.result")))]),a("div",{staticClass:"comments__result-content"},[a("div",{staticClass:"comments__result-fields flex items-start"},[a("q-select",{staticClass:"comments__select brs3",attrs:{options:t.statusOptions,"options-dense":"",outlined:"",required:"","emit-value":"","map-options":"",dark:!1,color:"WB-primary"},model:{value:t.$operatorWB.communication.form.status,callback:function(e){t.$set(t.$operatorWB.communication.form,"status",e)},expression:"$operatorWB.communication.form.status"}}),a("q-select",{staticClass:"comments__select brs3",attrs:{options:t.resultOptions,"options-dense":"",outlined:"",required:"","emit-value":"","map-options":"",dark:!1,color:"WB-primary"},model:{value:t.$operatorWB.communication.form.result,callback:function(e){t.$set(t.$operatorWB.communication.form,"result",e)},expression:"$operatorWB.communication.form.result"}}),t.$operatorWB.loans.currentLoan&&"pos"!==t.$operatorWB.loans.currentLoan.product?a("div",{staticClass:"q-mr-md flex items-start"},[a("NotificationsTable")],1):t._e(),t.$operatorWB.user.isUserHaveRoles(["operatorSoft","supervisorSoft","leaderSoft","operatorCallCenter","supervisorCallCenter","leaderCallCenter"])&&t.$operatorWB.loans.currentLoan&&"pos"!==t.$operatorWB.loans.currentLoan.product?a("p",[t._v(t._s(t.$t("communications.labels.renewalDays"))+": \n"+t._s(t.$operatorWB.clients.currentClient&&t.$operatorWB.clients.currentClient.restrictions.renewalDays))]):t._e()],1),a("div",{staticClass:"comments__result-area_comment flex items-center"},[t._v(t._s(t.$t("communications.labels.comment")))]),a("q-input",{staticClass:"comments__result-area brs3",attrs:{type:"text",placeholder:"Введите комментарий",orientation:"vertical",disable:t.isAmnesty,outlined:"",dense:"",dark:!1,color:"WB-primary"},model:{value:t.form.comment,callback:function(e){t.$set(t.form,"comment",e)},expression:"form.comment"}})],1)]),t.form.promise?a("PromiseCalculators"):t._e(),t.form.installment?a("InstallmentCalculator"):t._e(),t.form.renewal?a("RenewalCalculator"):t._e(),t.form.amnesty?a("AmnestyCalculator"):t._e(),t.form.creditHolidays?a("CreditHolidaysCalculator"):t._e()],1),a("div",{staticClass:"comments__buttons flex items-center justify-end",class:{updated:!!t.$operatorWB.communication.edited}},[t.$operatorWB.communication.edited?a("div",{staticClass:"comments__info self-center flex items-center justify-between"},[a("strong",[t._v(t._s(t.$t("communications.labels.editMode")))]),t.$operatorWB.communication.form.updatedAt?a("em",[t._v("Посл. изм.: "+t._s(t.$operatorWB.communication.form.updatedAt))]):t._e()]):t._e(),t._l(t.$operatorWB.clients.currentClient.actions,(function(e){return t.$operatorWB.clients.currentClient&&t.$operatorWB.clients.currentClient.actions&&t.$operatorWB.clients.currentClient.actions.length?a("q-chip",{key:e.id,attrs:{label:e.message,icon:"alarm",color:"red","text-color":"white"}}):t._e()})),t.showTimer&&t.$operatorWB.layout.isCallingCard?a("Timeout"):t._e(),t.$operatorWB.calls.currentCall?t._e():a("q-btn",{staticClass:"comments__link",attrs:{disable:t.$operatorWB.communication.loading.saveCommunication,color:"negative"},on:{click:function(e){return e.preventDefault(),t.close(e)}}},[t._v(t._s(t.$t("communications.labels.closeBtn")))]),a("q-btn",{staticClass:"comments__btn brs3 text-right",attrs:{loading:t.$operatorWB.communication.loading.saveCommunication,disable:t.isDisableSaveBtn},on:{click:function(e){return e.preventDefault(),t.$operatorWB.communication.save(e)}}},[t._v(t._s(t.$t("communications.labels.submitBtn"))),a("q-spinner",{attrs:{slot:"loading",size:"20px"},slot:"loading"}),a("span",{attrs:{slot:"loading"},slot:"loading"},[t._v(t._s(t.$t("communications.labels.submitBtnLoading")))])],1)],2)])},Gd=[],Ud=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comments__result-calc"},[a("div",{staticClass:"comments__calc"},[a("div",{staticClass:"comments__calc-content"},[a("div",{staticClass:"comments__calc-title"},[t._v(t._s(t.$t("communications.headings.calcInstallment")))]),a("q-input",{staticClass:"comments__calc-days",attrs:{type:"number",debounce:"1000",suffix:"₽",hint:t.$t("communications.labels.primaryPayment"),outlined:"",color:"WB-primary",dark:!1},model:{value:t._payment,callback:function(e){t._payment=t._n(e)},expression:"_payment"}}),a("q-input",{staticClass:"comments__calc-days",attrs:{type:"number",min:"1",max:"6",debounce:"1000",suffix:t.$t("communications.placeholders.months"),hint:t.$t("communications.labels.installmentPeriod"),outlined:"",color:"WB-primary",dark:!1},model:{value:t._months,callback:function(e){t._months=t._n(e)},expression:"_months"}}),a("div",{staticClass:"comments__calc-payments"},[t.loading?a("q-spinner"):t._e(),a("span",{staticClass:"comments__link link"},[t._v(t._s(t.$t("communications.headings.paymentsSchedule"))+"\n("+t._s(t.$operatorWB.communication.schedule.length)+")"),a("q-menu",{attrs:{anchor:"center left",self:"bottom right",offset:[10,0],"max-height":"850px"}},[a("PaymentSchedule",{staticClass:"tooltip-schedule q-pa-xs",attrs:{schedule:t.$operatorWB.communication.schedule,simple:""}})],1)],1)],1)],1)])])},Zd=[],Kd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payments-schedule"},[a("q-table",{staticClass:"my-sticky-header-table",attrs:{data:t._schedule,columns:t._columns,loading:t.$operatorWB.communication.loading.schedule,pagination:t.pagination,"row-key":"index",separator:"cell","hide-bottom":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header",fn:function(e){return[a("q-tr",t._l(e.cols,(function(n){return a("q-td",{key:n.name,staticClass:"q-px-md",attrs:{props:e}},[t._v(t._s(n.label))])})),1)]}}])}),a("div",{staticClass:"PaymentScheduleFull__leftToPay"},[a("span",{staticClass:"q-mr-sm"},[t._v(t._s(t.$t("loans.schedule.amountLeftToPay"))+":")]),a("span",{staticClass:"PaymentScheduleFull__leftToPay__value",domProps:{textContent:t._s(t.totalLeftToPay)}})])],1)},Jd=[];function Xd(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function tm(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Xd(Object(a),!0).forEach((function(e){z()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Xd(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var em=hs["b"].formatDate,am={name:"PaymentSchedule",props:{simple:{type:Boolean}},data:function(){return{columns:[{name:"index",field:function(t){return t.index},required:!0,align:"center",label:"communications.schedule.index"},{name:"paymentDate",field:"date",required:!0,align:"center",label:"communications.schedule.paymentDate"},{name:"paymentAmount",field:"amount",required:!0,align:"center",label:"communications.schedule.paymentAmount"},{name:"paymentFact",field:"fact",required:!0,align:"center",label:"communications.schedule.paymentFact"},{name:"paymentStatus",field:"status",required:!0,align:"center",label:"communications.schedule.paymentStatus"}],pagination:{sortBy:"index",descending:!1,page:1,rowsPerPage:10}}},computed:{totalLeftToPay:function(){var t=this.$operatorWB.loans.currentLoan.current.total-this.$operatorWB.communication.form.installment.primaryPayment;return t&&Object(U["l"])(t,!0)},_columns:function(){var t=this,e=this.columns.map((function(e){return tm(tm({},e),{},{label:t.$t(e.label)})}));return this.simple?Array.from(e).slice(0,3):e},_schedule:function(){var t=this.$operatorWB.communication.schedule;return t.map((function(t,e){return{index:e+1,date:em(t.date,"DD.MM.YYYY"),amount:Object(U["l"])(t.amount,!0)}}))}}},nm=am,sm=Object(c["a"])(nm,Kd,Jd,!1,null,null,null),im=sm.exports;d()(sm,"components",{QTable:Zr["a"],QTr:Er["a"],QTd:Kr["a"]});var rm={name:"InstallmentCalculator",components:{PaymentSchedule:im},data:function(){return{months:1,payment:0,loading:!1}},computed:{_schedule:function(){return this.$operatorWB.communication.schedule},_months:{get:function(){return this.months},set:function(t){t||(t=1),t<1&&(t=1),t>6&&(t=6),this.months=null,this.$nextTick((function(){this.months=t})),this.$operatorWB.communication.form.installment.installmentPeriod=t,this.$operatorWB.communication.getSchedule(t)}},_payment:{get:function(){return this.payment},set:function(t){var e=this.$operatorWB.communication.calculatePrimaryPayment(t);this.payment=null,this.$nextTick((function(){this.payment=e})),this.$operatorWB.communication.form.installment.primaryPayment!==e&&this.$nextTick((function(){this.$operatorWB.communication.form.installment.primaryPayment=e,this.$operatorWB.communication.getSchedule(this.months)}))}}},created:function(){this.$operatorWB.communication.form.installment.installmentPeriod=1,this.payment=this.$operatorWB.communication.calculatePrimaryPayment(0),this.$operatorWB.communication.getSchedule(this.months)}},om=rm,lm=(a("32d5"),Object(c["a"])(om,Ud,Zd,!1,null,null,null)),cm=lm.exports;d()(lm,"components",{QInput:Ns["a"],QSpinner:Hs["a"],QMenu:Lr["a"],QField:Bi["a"]});var um=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comments__result-calc"},[a("div",{staticClass:"comments__calc"},[a("div",{staticClass:"comments__calc-content"},[a("div",{staticClass:"comments__calc-title"},[t._v(t._s(t.$t("communications.headings.calcRenewal")))]),a("q-input",{staticClass:"comments__calc-days",attrs:{type:"number",min:"1",max:"$operatorWB.clients.currentClient.restrictions.renewalDays",suffix:t.$t("communications.placeholders.days"),hint:t.$t("communications.labels.daysDuration"),outlined:"",color:"WB-primary",dark:!1},model:{value:t.$operatorWB.communication.form.renewal.daysDuration,callback:function(e){t.$set(t.$operatorWB.communication.form.renewal,"daysDuration",t._n(e))},expression:"$operatorWB.communication.form.renewal.daysDuration"}}),a("div",{staticClass:"comments__calc-payments"},[a("span",[t._v("на дату:"),a("strong",[t._v(t._s(t.future))])])]),a("div",{staticClass:"comments__calc-payments"},[a("span",[t._v(t._s(t.$t("communications.labels.paymentForRenewal"))+":"),a("strong",[t._v(" "+t._s(t.interest))])])])],1)])])},dm=[],mm=hs["b"].addToDate,pm=hs["b"].formatDate,fm={name:"RenewalCalculator",components:{PaymentSchedule:im},computed:{interest:function(){return Object(U["l"])(this.$operatorWB.loans.currentLoanInterest,!0)},future:function(){return pm(mm(new Date,{days:this.$operatorWB.communication.form.renewal.daysDuration}),"DD.MM.YYYY")}}},hm=fm,bm=(a("226b"),Object(c["a"])(hm,um,dm,!1,null,null,null)),gm=bm.exports;d()(bm,"components",{QInput:Ns["a"],QField:Bi["a"]});var vm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"count-down",class:{info:t.$operatorWB.communication.timeout>10,warn:t.$operatorWB.communication.timeout<=10&&t.$operatorWB.communication.timeout>5,alert:t.$operatorWB.communication.timeout<=5||t.$operatorWB.communication.timeout}},[t._v(t._s(t.digital))])},_m=[],ym={name:"Timeout",data:function(){return{classname:""}},computed:{digital:function(){var t=null!==this.$operatorWB.communication.timeout&&Number(this.$operatorWB.communication.timeout);return t?Object(U["o"])(this.$operatorWB.communication.timeout):this.$operatorWB.communication.timeout}}},xm=ym,Cm=(a("bf46"),Object(c["a"])(xm,vm,_m,!1,null,"4ed270f4",null)),$m=Cm.exports,Bm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notifications-table"},[a("q-table",{staticClass:"my-sticky-header-table",attrs:{data:[t.currentMessages],columns:t.columns,"row-key":"name",separator:"vertical","hide-bottom":"",dark:!1},scopedSlots:t._u([{key:"top",fn:function(e){return[a("div",{staticClass:"full-width flex flex-center"},[t._v(t._s(t.$t("communications.notificationsTable.title")))])]}},{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,staticClass:"q-px-xs",attrs:{props:e}},["today"===n.name?[a("span",{class:"-"===n.value||n.value>=1?"text-negative":""},[t._v(t._s(n.value))])]:"thisWeek"===n.name?[a("span",{class:"-"===n.value||n.value>=4?"text-negative":""},[t._v(t._s(n.value))])]:"thisMonth"===n.name?[a("span",{class:"-"===n.value||n.value>=16?"text-negative":""},[t._v(t._s(n.value))])]:[a("span",[t._v(t._s(n.value))])]],2)})),1)]}}])})],1)},qm=[],wm={name:"NotificationsTable",data:function(){return{columns:[{name:"today",field:"today",required:!0,label:this.$t("communications.notificationsTable.today"),align:"center",sortable:!1},{name:"thisWeek",field:"thisWeek",required:!0,label:this.$t("communications.notificationsTable.thisWeek"),align:"center",sortable:!1},{name:"thisMonth",field:"thisMonth",required:!0,label:this.$t("communications.notificationsTable.thisMonth"),align:"center",sortable:!1}]}},computed:{currentMessages:function(){return this.$operatorWB.loans.currentMessages.hasOwnProperty("today")?this.$operatorWB.loans.currentMessages:{today:"-",thisWeek:"-",thisMonth:"-"}}}},Wm=wm,km=Object(c["a"])(Wm,Bm,qm,!1,null,"229262aa",null),Dm=km.exports;d()(km,"components",{QTable:Zr["a"],QTr:Er["a"],QTd:Kr["a"]});var Om=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.amnesty?a("div",{staticClass:"comments__result-calc"},[a("div",{staticClass:"comments__calc"},[a("div",{staticClass:"comments__calc-content"},[a("div",{staticClass:"comments__calc-title"},[t._v(t._s(t.$t("communications.headings.amnesty")))]),a("q-input",{staticClass:"comments__calc-days",attrs:{type:"number",loading:t.loading,disable:t.loading,hint:t.$t("communications.labels.discount"),suffix:"%",outlined:"",color:"WB-primary",dark:!1},on:{input:function(e){return t.debounced("rate",e)}},model:{value:t.amnesty.discount,callback:function(e){t.$set(t.amnesty,"discount",t._n(e))},expression:"amnesty.discount"}},[a("q-spinner",{attrs:{slot:"loading",size:"20px"},slot:"loading"})],1),a("q-input",{staticClass:"comments__calc-days",attrs:{type:"number",loading:t.loading,disable:t.loading,hint:t.$t("communications.labels.newPrincipalDebt"),suffix:"₽",outlined:"",color:"WB-primary",dark:!1},on:{input:function(e){return t.debounced("debt",e)}},model:{value:t.amnesty.newPrincipalDebt,callback:function(e){t.$set(t.amnesty,"newPrincipalDebt",t._n(e))},expression:"amnesty.newPrincipalDebt"}},[a("q-spinner",{attrs:{slot:"loading",size:"20px"},slot:"loading"})],1),a("q-input",{staticClass:"comments__calc-days",attrs:{type:"number",loading:t.loading,hint:t.$t("communications.labels.amountOfForgiveness"),readonly:"",disable:"",suffix:"₽",outlined:"",color:"WB-primary",dark:!1},model:{value:t.amnesty.amountOfForgiveness,callback:function(e){t.$set(t.amnesty,"amountOfForgiveness",t._n(e))},expression:"amnesty.amountOfForgiveness"}},[a("q-spinner",{attrs:{slot:"loading",size:"20px"},slot:"loading"})],1)],1)])]):t._e()},jm=[],Sm={name:"AmnestyCalculator",data:function(){return{debounced:null}},created:function(){this.debounced=Object(zi["debounce"])(this.check,1e3)},computed:{loading:function(){return this.$operatorWB.communication.loading.saveCommunication},amnesty:function(){return this.$operatorWB.communication.form.amnesty},totalPdlDebt:function(){return this.$operatorWB.loans.currentPdlLoan.current.total}},methods:{getCalculation:function(t,e){var a=this;return Gn()(zn.a.mark((function n(){var s;return zn.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e=Number(e),s={type:t,clientId:a.$operatorWB.clients.current},n.t0=t,n.next="rate"===n.t0?5:"debt"===n.t0?7:9;break;case 5:return s.amount=e,n.abrupt("break",9);case 7:return s.amount=(100*a.totalPdlDebt-100*e)/100,n.abrupt("break",9);case 9:return n.next=11,a.$operatorWB.clients.getCalculationOfAmnesty(s);case 11:a.$operatorWB.communication.form.amnesty=n.sent;case 12:case"end":return n.stop()}}),n)})))()},numberOfSymbolsAfterComma:function(t){return t.toString().includes(".")?t.toString().split(".").pop().length:0},check:function(t,e){var a=this;return Gn()(zn.a.mark((function n(){return zn.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a.numberOfSymbolsAfterComma(e)>2&&(e=Number(e.toFixed(2))),n.t0=t,n.next="rate"===n.t0?4:"debt"===n.t0?11:17;break;case 4:if(!(null===e||e<=0||e>30)){n.next=8;break}a.amnesty.discount=null,n.next=10;break;case 8:return n.next=10,a.getCalculation(t,e);case 10:return n.abrupt("break",17);case 11:if(!(null===e||e<.7*a.totalPdlDebt||e>=a.totalPdlDebt)){n.next=15;break}a.amnesty.newPrincipalDebt=null,n.next=17;break;case 15:return n.next=17,a.getCalculation(t,e);case 17:case"end":return n.stop()}}),n)})))()}}},Pm=Sm,Mm=(a("e292"),Object(c["a"])(Pm,Om,jm,!1,null,null,null)),Am=Mm.exports;d()(Mm,"components",{QInput:Ns["a"],QSpinner:Hs["a"],QField:Bi["a"]});var Tm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comments__result-calc"},[a("div",{staticClass:"comments__calc"},[a("div",{staticClass:"comments__calc-content"},["promiseOfInstallment"===t.result?[a("div",{staticClass:"comments__calc-title"},[t._v(t._s(t.$t("communications.headings.calcInstallment")))]),a("PromiseOfInstallment")]:t._e(),"promiseOfRenewal"===t.result?[a("div",{staticClass:"comments__calc-title"},[t._v(t._s(t.$t("communications.headings.calcRenewal")))]),a("PromiseOfRenewal")]:t._e(),t.result.match(/(promiseToRepayInFull)/)?[a("div",{staticClass:"comments__calc-title"},[t._v(t._s(t.$t("communications.headings.calcFullPayment")))]),a("PromiseToRepayInFull")]:t._e(),t.result.match(/(promiseToRepayPartially)/)?[a("div",{staticClass:"comments__calc-title"},[t._v(t._s(t.$t("communications.headings.calcPartialPayment")))]),a("PromiseToRepayPartially")]:t._e()],2)])])},Qm=[],Fm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"promise-of-installment"},[a("q-input",{staticClass:"comments__calc-days",attrs:{type:"number",min:"1",debounce:"1000",suffix:"₽",placeholder:t.$t("communications.placeholders.payment"),outlined:"",color:"WB-primary",dark:!1},model:{value:t.promisedAmount,callback:function(e){t.promisedAmount=t._n(e)},expression:"promisedAmount"}}),a("q-input",{staticClass:"comments__calc-date date-picker",attrs:{mask:"##.##.##",dense:"",outlined:"",readonly:"",color:"WB-primary",dark:!1},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}},[a("ProxyDate",{attrs:{type:"promiseOfInstallment",entity:t.$operatorWB.communication.form.promise,stringKey:"promisedAt",min:t.$operatorWB.communication.today,max:t.$operatorWB.communication.futureDate},on:{dateChanged:t.changed}}),a("template",{slot:"append"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("ProxyDate",{attrs:{type:"promiseOfInstallment",entity:t.$operatorWB.communication.form.promise,stringKey:"promisedAt",min:t.$operatorWB.communication.today,max:t.$operatorWB.communication.futureDate},on:{dateChanged:t.changed}})],1)],1)],2),a("div",{staticClass:"comments__calc-sum flex justify-between items-center"},[a("div",{staticClass:"comments__calc-text"},[t._v(t._s(t.$t("communications.headings.remainedDebt")))]),a("div",{staticClass:"comments__calc-digits"},[a("b",[t._v(t._s(t.debt))])])])],1)},Im=[],Rm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{options:t.canChooseDates,mask:"DD.MM.YY",color:"WB-primary",dark:!1},on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}})],1)},Em=[],Lm=hs["b"].formatDate,Ym=hs["b"].extractDate,Hm={name:"ProxyDate",data:function(){return{formattedDate:null}},created:function(){this.formattedDate=Lm(this.variable,"DD.MM.YY")},props:{type:{type:String,required:!0},entity:{type:Object,required:!0},stringKey:{type:String,required:!0},min:{type:Date,required:!0},max:{type:String,required:!0},dataDateFormat:{type:String,default:"YYYY-MM-DDTHH:mm:ssZ"}},computed:{variable:function(){return this.entity[this.stringKey]}},methods:{canChooseDates:function(t){return t.includes(".")&&(t=t.split("."),t="20"+t[2]+"/"+t[1]+"/"+t[0]),t>=Lm(this.min,"YYYY/MM/DD")&&t<=Lm(this.max,"YYYY/MM/DD")}},watch:{formattedDate:function(t){this.$emit("dateChanged",t)},variable:function(t){this.formattedDate=Lm(Ym(t,this.dataDateFormat),"DD.MM.YY")}}},Nm=Hm,zm=Object(c["a"])(Nm,Rm,Em,!1,null,"0a47bb7a",null),Vm=zm.exports;d()(zm,"components",{QPopupProxy:qr["a"],QDate:wr["a"]});var Gm=hs["b"].formatDate,Um={name:"PromiseOfInstallment",components:{ProxyDate:Vm},data:function(){return{formattedDate:null}},created:function(){this.formattedDate=Gm(this.$operatorWB.communication.form.promise.promisedAt,"DD.MM.YY")},computed:{debt:function(){return Object(U["l"])(this.$operatorWB.communication.calculated,!0)},promisedAmount:{get:function(){return this.$operatorWB.communication.form.promise.promisedAmount},set:function(t){var e=this.$operatorWB.communication.calculatePromisedAmount(t);this.$operatorWB.communication.form.promise.promisedAmount=null,this.$nextTick((function(){this.$operatorWB.communication.form.promise.promisedAmount=e}))}}},methods:{changed:function(t){this.formattedDate=t}},watch:{formattedDate:function(t){this.$operatorWB.communication.form.promise.promisedAt=t?Gm(new Date(Number("20"+t[6]+t[7]),Number(t[3]+t[4])-1,Number(t[0]+t[1])),"YYYY-MM-DDTHH:mm:ssZ"):null}}},Zm=Um,Km=Object(c["a"])(Zm,Fm,Im,!1,null,"6c593564",null),Jm=Km.exports;d()(Km,"components",{QInput:Ns["a"],QIcon:ja["a"]});var Xm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"promise-of-renewal"},[a("q-input",{staticClass:"comments__calc-date date-picker",attrs:{mask:"##.##.##",dense:"",outlined:"",readonly:"",color:"WB-primary",dark:!1},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}},[a("ProxyDate",{attrs:{type:"promiseOfInstallment",entity:t.$operatorWB.communication.form.promise,stringKey:"promisedAt",min:t.$operatorWB.communication.today,max:t.$operatorWB.communication.futureDate},on:{dateChanged:t.changed}}),a("template",{slot:"append"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("ProxyDate",{attrs:{type:"promiseOfInstallment",entity:t.$operatorWB.communication.form.promise,stringKey:"promisedAt",min:t.$operatorWB.communication.today,max:t.$operatorWB.communication.futureDate},on:{dateChanged:t.changed}})],1)],1)],2),a("div",{staticClass:"comments__calc-sum flex justify-between items-center"},[a("div",{staticClass:"comments__calc-text"},[t._v(t._s(t.$t("communications.headings.renewalSum")))]),a("div",{staticClass:"comments__calc-digits"},[a("b",[t._v(t._s(t.debt))])])])],1)},tp=[],ep=hs["b"].formatDate,ap={name:"PromiseOfRenewal",components:{ProxyDate:Vm},data:function(){return{formattedDate:null}},created:function(){this.formattedDate=ep(this.$operatorWB.communication.form.promise.promisedAt,"DD.MM.YY")},computed:{debt:function(){return Object(U["l"])(this.$operatorWB.communication.calculated,!0)}},methods:{changed:function(t){this.formattedDate=t}},watch:{formattedDate:function(t){this.$operatorWB.communication.form.promise.promisedAt=t?ep(new Date(Number("20"+t[6]+t[7]),Number(t[3]+t[4])-1,Number(t[0]+t[1])),"YYYY-MM-DDTHH:mm:ssZ"):null}}},np=ap,sp=Object(c["a"])(np,Xm,tp,!1,null,"49ffdf00",null),ip=sp.exports;d()(sp,"components",{QInput:Ns["a"],QIcon:ja["a"]});var rp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"promise-repay-partially"},[a("q-input",{staticClass:"comments__calc-days",attrs:{type:"number",min:"1",debounce:"1000",suffix:"₽",placeholder:t.$t("communications.placeholders.payment"),outlined:"",color:"WB-primary",dark:!1},model:{value:t.promisedAmount,callback:function(e){t.promisedAmount=t._n(e)},expression:"promisedAmount"}}),a("q-input",{staticClass:"comments__calc-date date-picker",attrs:{mask:"##.##.##",dense:"",outlined:"",readonly:"",color:"WB-primary",dark:!1},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}},[a("ProxyDate",{attrs:{type:"promiseOfInstallment",entity:t.$operatorWB.communication.form.promise,stringKey:"promisedAt",min:t.$operatorWB.communication.today,max:t.$operatorWB.communication.futureDate},on:{dateChanged:t.changed}}),a("template",{slot:"append"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("ProxyDate",{attrs:{type:"promiseOfInstallment",entity:t.$operatorWB.communication.form.promise,stringKey:"promisedAt",min:t.$operatorWB.communication.today,max:t.$operatorWB.communication.futureDate},on:{dateChanged:t.changed}})],1)],1)],2),a("div",{staticClass:"comments__calc-sum flex justify-between items-center"},[a("div",{staticClass:"comments__calc-text"},[t._v(t._s(t.$t("communications.headings.remainedDebt")))]),a("div",{staticClass:"comments__calc-digits"},[a("b",[t._v(t._s(t.debt))])])])],1)},op=[],lp=hs["b"].formatDate,cp={name:"promiseToRepayPartially",components:{ProxyDate:Vm},data:function(){return{formattedDate:null}},created:function(){this.formattedDate=lp(this.$operatorWB.communication.form.promise.promisedAt,"DD.MM.YY")},computed:{debt:function(){return Object(U["l"])(this.$operatorWB.communication.calculated,!0)},promisedAmount:{get:function(){return this.$operatorWB.communication.form.promise.promisedAmount},set:function(t){var e=this.$operatorWB.communication.calculatePromisedAmount(t);this.$operatorWB.communication.form.promise.promisedAmount=null,this.$nextTick((function(){this.$operatorWB.communication.form.promise.promisedAmount=e}))}}},methods:{changed:function(t){this.formattedDate=t}},watch:{formattedDate:function(t){this.$operatorWB.communication.form.promise.promisedAt=t?lp(new Date(Number("20"+t[6]+t[7]),Number(t[3]+t[4])-1,Number(t[0]+t[1])),"YYYY-MM-DDTHH:mm:ssZ"):null}}},up=cp,dp=Object(c["a"])(up,rp,op,!1,null,"2fd3f282",null),mp=dp.exports;d()(dp,"components",{QInput:Ns["a"],QIcon:ja["a"]});var pp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"promise-repay-full"},[a("q-input",{staticClass:"comments__calc-date date-picker",attrs:{mask:"##.##.##",dense:"",outlined:"",readonly:"",color:"WB-primary",dark:!1},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}},[a("ProxyDate",{attrs:{type:"promiseOfInstallment",entity:t.$operatorWB.communication.form.promise,stringKey:"promisedAt",min:t.$operatorWB.communication.today,max:t.$operatorWB.communication.futureDate},on:{dateChanged:t.changed}}),a("template",{slot:"append"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("ProxyDate",{attrs:{type:"promiseOfInstallment",entity:t.$operatorWB.communication.form.promise,stringKey:"promisedAt",min:t.$operatorWB.communication.today,max:t.$operatorWB.communication.futureDate},on:{dateChanged:t.changed}})],1)],1)],2),a("div",{staticClass:"comments__calc-sum flex justify-between items-center"},[a("div",{staticClass:"comments__calc-text"},[t._v(t._s(t.$t("communications.headings.remainedDebt")))]),a("div",{staticClass:"comments__calc-digits"},[a("b",[t._v(t._s(t.debt))])])])],1)},fp=[],hp=hs["b"].formatDate,bp={name:"PromiseToRepayInFull",components:{ProxyDate:Vm},data:function(){return{formattedDate:null}},created:function(){this.formattedDate=hp(this.$operatorWB.communication.form.promise.promisedAt,"DD.MM.YY")},computed:{debt:function(){return Object(U["l"])(this.$operatorWB.communication.calculated,!0)}},methods:{changed:function(t){this.formattedDate=t}},watch:{formattedDate:function(t){this.$operatorWB.communication.form.promise.promisedAt=t?hp(new Date(Number("20"+t[6]+t[7]),Number(t[3]+t[4])-1,Number(t[0]+t[1])),"YYYY-MM-DDTHH:mm:ssZ"):null}}},gp=bp,vp=Object(c["a"])(gp,pp,fp,!1,null,"cb0194ec",null),_p=vp.exports;d()(vp,"components",{QInput:Ns["a"],QIcon:ja["a"]});var yp={name:"PromiseCalculators",components:{PromiseToRepayInFull:_p,PromiseToRepayPartially:mp,PromiseOfRenewal:ip,PromiseOfInstallment:Jm},computed:{result:function(){return this.$operatorWB.communication.form.result}}},xp=yp,Cp=Object(c["a"])(xp,Tm,Qm,!1,null,"6386cd9e",null),$p=Cp.exports,Bp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.creditHolidays?a("div",{staticClass:"comments__result-calc"},[a("div",{staticClass:"comments__calc"},[a("div",{staticClass:"comments__calc-content"},[a("div",{staticClass:"comments__calc-title"},[t._v(t._s(t.$t("communications.headings.gracePeriod")))]),a("q-input",{staticClass:"comments__calc-date date-picker",attrs:{value:t.startDate,mask:"##.##.##",hint:t.$t("communications.labels.startDate"),loading:t.loading,disable:t.loading,dense:"",outlined:"",readonly:"",color:"WB-primary",dark:!1}},[a("ProxyDate",{attrs:{type:"creditHolidays",entity:t.creditHolidays,stringKey:"startDate",dataDateFormat:"YYYY-MM-DD",min:t.minStartDate,max:t.maxStartDate},on:{dateChanged:t.changedStartDate}}),a("template",{slot:"append"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}})],1)],2),a("q-input",{staticClass:"comments__calc-date date-picker",attrs:{value:t.expirationDate,mask:"##.##.##",hint:t.$t("communications.labels.expirationDate"),loading:t.loading,disable:t.loading,dense:"",outlined:"",readonly:"",color:"WB-primary",dark:!1}},[a("ProxyDate",{attrs:{type:"creditHolidays",entity:t.creditHolidays,stringKey:"expirationDate",dataDateFormat:"YYYY-MM-DD",min:t.minExpirationDate,max:t.maxExpirationDate},on:{dateChanged:t.changedExpirationDate}}),a("template",{slot:"append"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}})],1)],2)],1)])]):t._e()},qp=[],wp=hs["b"].formatDate,Wp=hs["b"].extractDate,kp=hs["b"].addToDate,Dp=hs["b"].subtractFromDate,Op=hs["b"].getDateDiff,jp={name:"CreditHolidaysCalculator",components:{ProxyDate:Vm},data:function(){return{startDate:wp(this.$operatorWB.communication.form.creditHolidays.startDate,"DD.MM.YY"),expirationDate:wp(this.$operatorWB.communication.form.creditHolidays.expirationDate,"DD.MM.YY")}},computed:{creditHolidays:function(){return this.$operatorWB.communication.form.creditHolidays},loading:function(){return this.$operatorWB.communication.loading.saveCommunication},minStartDate:function(){return Dp(new Date,{days:14})},maxStartDate:function(){var t=Dp(Wp(this.expirationDate,"DD.MM.YY"),{days:1}),e=new Date(2020,8,30);return wp(t>e?e:t,"YYYY-MM-DDTHH:mm:ssZ")},minExpirationDate:function(){return kp(Wp(this.startDate,"DD.MM.YY"),{days:1})},maxExpirationDate:function(){var t=kp(Wp(this.startDate,"DD.MM.YY"),{month:6}),e=new Date(2021,2,30);return wp(t>e?e:t,"YYYY-MM-DDTHH:mm:ssZ")}},methods:{changedStartDate:function(t){this.startDate=t},changedExpirationDate:function(t){this.expirationDate=t}},watch:{startDate:function(t){if(t){var e=Wp(t,"DD.MM.YY"),a=Wp(this.expirationDate,"DD.MM.YY"),n=Op(a,e,"months")>6||6===Op(a,e,"months")&&Number(wp(a,"DD"))>Number(wp(e,"DD"));this.creditHolidays.startDate=wp(e,"YYYY-MM-DD"),n&&(this.expirationDate=wp(kp(e,{month:6}),"DD.MM.YY"))}else this.creditHolidays.startDate=null},expirationDate:function(t){this.creditHolidays.expirationDate=t?wp(Wp(t,"DD.MM.YY"),"YYYY-MM-DD"):null}}},Sp=jp,Pp=(a("fbb1"),Object(c["a"])(Sp,Bp,qp,!1,null,null,null)),Mp=Pp.exports;function Ap(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function Tp(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ap(Object(a),!0).forEach((function(e){z()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ap(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}d()(Pp,"components",{QInput:Ns["a"],QIcon:ja["a"],QField:Bi["a"]});var Qp={name:"ResultForm",components:{CreditHolidaysCalculator:Mp,PromiseCalculators:$p,AmnestyCalculator:Am,NotificationsTable:Dm,Timeout:$m,RenewalCalculator:gm,InstallmentCalculator:cm},data:function(){return{}},computed:{form:function(){return this.$operatorWB.communication.form},scheme:function(){return this.$operatorWB.communication.scheme},statusOptions:function(){return this.$operatorWB.communication.statusOptions},resultOptions:function(){return this.$operatorWB.communication.resultOptions},showTimer:function(){return null!==this.$operatorWB.communication.timeout||null!==this.$operatorWB.communication.timer},isAmnesty:function(){return"amnesty"===this.form.result},isDisableSaveBtn:function(){return"blank"===this.form.result&&"blank"===this.form.status||this.$operatorWB.communication.loading.saveCommunication||null===this.form.amnesty}},methods:{close:function(){this.$operatorWB.layout.closeClientCard(Tp({closing:"manual"},this.$operatorWB.communication.form))}}},Fp=Qp,Ip=(a("50d88"),a("b0476")),Rp=Object(c["a"])(Fp,Vd,Gd,!1,null,"5d274dc8",null),Ep=Rp.exports;d()(Rp,"components",{QSelect:Jn["a"],QInput:Ns["a"],QChip:Ip["a"],QBtn:b["a"],QSpinner:Hs["a"]});var Lp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"form__send-template"},[a("div",{staticClass:"send__template"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"min-w-60"},[a("div",{staticClass:"send__template-title"},[t._v(t._s(t.$t("communications.sms.template")))]),a("div",{staticClass:"send__template-field flex justify-between q-mb-sm"},[a("q-select",{staticClass:"send__template-select brs3 full-width",attrs:{options:t.smsOptions,outlined:"","options-dense":"",required:"","emit-value":"","map-options":"",dark:!1,color:"WB-primary"},model:{value:t.$operatorWB.communication.smsForm.result,callback:function(e){t.$set(t.$operatorWB.communication.smsForm,"result",e)},expression:"$operatorWB.communication.smsForm.result"}})],1)])]),a("div",{staticClass:"send__template-text"},[t._v(t._s(t.$t("communications.sms.text")))]),a("q-input",{staticClass:"send__template-area brs3 textarea-for-templates",attrs:{value:t.textForSMS,type:"textarea",rows:"2",readonly:"",orientation:"vertical",outlined:"",dense:"",dark:!1,color:"WB-primary"}}),a("div",{staticClass:"send__template-submit text-right"},[a("div",{staticClass:"comments__buttons flex items-center justify-end send__template-submit"},[a("q-btn",{staticClass:"comments__link",attrs:{flat:""},on:{click:function(e){e.preventDefault(),t.$operatorWB.communication.currentForm="result"}}},[t._v(t._s(t.$t("modals.buttons.cancel")))]),a("q-btn",{staticClass:"comments__btn brs3 text-right",attrs:{disable:"blank"===t.$operatorWB.communication.smsForm.result||t.$operatorWB.communication.loading.sendSMS,readonly:"blank"===t.$operatorWB.communication.smsForm.result||t.$operatorWB.communication.loading.sendSMS,loading:t.$operatorWB.communication.loading.sendSMS},on:{click:t.fillFormForSmsAndSend}},[t._v(t._s(t.$t("communications.labels.sendSMS"))),a("q-spinner",{attrs:{slot:"loading",size:"20px"},slot:"loading"}),a("span",{attrs:{slot:"loading"},slot:"loading"},[t._v(t._s(t.$t("communications.sms.sendInProgress")))])],1)],1)])],1)])},Yp=[];function Hp(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function Np(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Hp(Object(a),!0).forEach((function(e){z()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Hp(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var zp={name:"SMSForm",data:function(){return{activeSms:!0}},computed:{smsOptions:function(){return this.$operatorWB.communication.smsOptions},textForSMS:function(){var t=this.$t("communications.sms.textForTemplates.".concat(this.$operatorWB.communication.smsForm.result));return t.includes("#login#")&&(t=this.changeTextForSMS("#login#",t)),t.includes("#totalDebt#")&&(t=this.changeTextForSMS("#totalDebt#",t)),t.includes("#contract#")&&(t=this.changeTextForSMS("#contract#",t)),t.includes("#promisedAmount#")&&(t=this.changeTextForSMS("#promisedAmount#",t)),t.includes("#promisedAtDate#")&&(t=this.changeTextForSMS("#promisedAtDate#",t)),t},textForSMSForBackEnd:function(){return this.$t("communications.sms.textForTemplates.".concat(this.$operatorWB.communication.smsForm.result))||""},currentPhones:function(){return this.$operatorWB.clients.currentPhones||[]},mainPhone:function(){return this.currentPhones.find((function(t){return!0===t.main}))||{}}},methods:{changeTextForSMS:function(t,e){var a=e.indexOf(t),n="",s=0;switch(t){case"#login#":n=this.$operatorWB.clients.currentClient.login.toString(),s=7;break;case"#totalDebt#":n=this.$operatorWB.clients.currentFullDebt.toString(),s=11;break;case"#contract#":n=this.$operatorWB.loans.currentLoan.contract.toString(),s=10;break;case"#promisedAmount#":s=16,n=this.$operatorWB.loans.lastPromise&&this.$operatorWB.loans.lastPromise.hasOwnProperty("promisedAmount")?this.$operatorWB.loans.lastPromise.promisedAmount.toString():this.$operatorWB.loans.currentLoan.current.interests.toString();break;case"#promisedAtDate#":if(s=16,this.$operatorWB.loans.lastPromise){n=this.$operatorWB.loans.lastPromise.promisedAt.toString(),n=n[8]+n[9]+"."+n[5]+n[6]+"."+n[0]+n[1]+n[2]+n[3];break}n="!!!ОШИБКА!!!";break;default:n="!!!ОШИБКА!!!"}var i=e.slice(0,a)||"",r=e.slice(a+s,e.length)||"";return i+n+r},fillFormForSmsAndSend:function(){var t=this;return Gn()(zn.a.mark((function e(){var a,n;return zn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={clientId:t.$operatorWB.clients.current,productId:t.$operatorWB.loans.current,dealId:!t.$operatorWB.loans.current||t.$operatorWB.loans.current>0?null:t.$operatorWB.loans.currentDealId,comment:t.textForSMSForBackEnd,channel:{phone:{number:t.mainPhone&&t.mainPhone.number,variant:"sms"}},contactedAt:hs["b"].formatDate(Date.now(),"YYYY-MM-DDTHH:mm:ssZZ"),result:t.$operatorWB.communication.smsForm.result},t.$operatorWB.communication.smsForm=Np(Np({},t.$operatorWB.communication.smsForm),a),t.$operatorWB.communication.loading.sendSMS=!0,e.next=5,Un["a"].crm.addCommunication(t.$operatorWB.communication.smsForm,t);case 5:n=e.sent,t.$operatorWB.communication.loading.sendSMS=!1,n.data&&(t.$operatorWB.clients.getCommunications(t.$operatorWB.clients.current),a.result.includes("CreditHolidays")||(t.$operatorWB.loans.currentMessages.today++,t.$operatorWB.loans.currentMessages.thisWeek++,t.$operatorWB.loans.currentMessages.thisMonth++),t.$operatorWB.loans.isDisabledByLotOfMessages&&(t.$operatorWB.communication.currentForm="result"),t.$operatorWB.messages.show({color:"positive",message:t.$t("communications.sms.sendSuccess")}));case 8:case"end":return e.stop()}}),e)})))()}},created:function(){},watch:{}},Vp=zp,Gp=Object(c["a"])(Vp,Lp,Yp,!1,null,"5d36e5a9",null),Up=Gp.exports;d()(Gp,"components",{QSelect:Jn["a"],QInput:Ns["a"],QBtn:b["a"],QSpinner:Hs["a"]});var Zp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"form__send-template"},[a("div",{staticClass:"send__template"},[a("div",{staticClass:"send__template-title"},[t._v(t._s(t.$t("communications.email.template")))]),a("div",{staticClass:"send__template-field flex q-mb-sm"},[a("q-select",{staticClass:"send__template-select brs3 q-mr-md",attrs:{options:t.emailOptions,outlined:"","options-dense":"",required:"","emit-value":"","map-options":"",dark:!1,color:"WB-primary"},model:{value:t.$operatorWB.communication.emailForm.result,callback:function(e){t.$set(t.$operatorWB.communication.emailForm,"result",e)},expression:"$operatorWB.communication.emailForm.result"}}),a("q-select",{staticClass:"send__template-select brs3",attrs:{options:t.emailAddressOptions,outlined:"","options-dense":"",required:"","emit-value":"","map-options":"",dark:!1,color:"WB-primary"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("div",{staticClass:"send__template-text"},[t._v(t._s(t.$t("communications.email.text")))]),a("q-input",{staticClass:"send__template-area brs3 textarea-for-templates",attrs:{value:t.textForEmail,type:"textarea",rows:"2",readonly:"",orientation:"vertical",outlined:"",dense:"",dark:!1,color:"WB-primary"}}),a("div",{staticClass:"send__template-submit text-right"},[a("div",{staticClass:"comments__buttons flex items-center justify-end send__template-submit"},[a("q-btn",{staticClass:"comments__link",attrs:{flat:""},on:{click:function(e){e.preventDefault(),t.$operatorWB.communication.currentForm="result"}}},[t._v(t._s(t.$t("modals.buttons.cancel")))]),a("q-btn",{staticClass:"comments__btn brs3 text-right",attrs:{disable:"blank"===t.$operatorWB.communication.emailForm.result||"blank"===t.email||t.$operatorWB.communication.loading.sendEmail,readonly:"blank"===t.$operatorWB.communication.emailForm.result||"blank"===t.email||t.$operatorWB.communication.loading.sendEmail,loading:t.$operatorWB.communication.loading.sendEmail},on:{click:t.fillFormForEmailAndSend}},[t._v(t._s(t.$t("communications.labels.sendEmail"))),a("q-spinner",{attrs:{slot:"loading",size:"20px"},slot:"loading"}),a("span",{attrs:{slot:"loading"},slot:"loading"},[t._v(t._s(t.$t("communications.email.sendInProgress")))])],1)],1)])],1)])},Kp=[],Jp={name:"EmailForm",data:function(){return{email:"blank"}},created:function(){this.email=this.emailAddressOptions[this.emailAddressOptions.length-1],this.$operatorWB.communication.emailForm.result="blank"},computed:{emailOptions:function(){return this.$operatorWB.communication.emailOptions},emailAddressOptions:function(){return[{value:"blank",label:"Выберите адрес"}].concat(this.$operatorWB.clients.currentEmails)},textForEmail:function(){return this.$t("communications.email.textForTemplates.".concat(this.$operatorWB.communication.emailForm.result))}},methods:{fillFormForEmailAndSend:function(){var t=this;return Gn()(zn.a.mark((function e(){var a,n;return zn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={clientId:t.$operatorWB.clients.current,productId:t.$operatorWB.loans.current,dealId:!t.$operatorWB.loans.current||t.$operatorWB.loans.current>0?null:t.$operatorWB.loans.currentDealId,comment:t.textForEmail,channel:{email:{variant:"email",address:t.email}},contactedAt:hs["b"].formatDate(Date.now(),"YYYY-MM-DDTHH:mm:ssZZ"),result:t.$operatorWB.communication.emailForm.result},t.$operatorWB.communication.emailForm=Object.assign({},t.$operatorWB.communication.emailForm,a),t.$operatorWB.communication.loading.sendEmail=!0,e.next=5,Un["a"].crm.addCommunication(t.$operatorWB.communication.emailForm,t);case 5:n=e.sent,t.$operatorWB.communication.loading.sendEmail=!1,n.data&&(t.$operatorWB.clients.getCommunications(t.$operatorWB.clients.current),a.result.includes("CreditHolidays")||(t.$operatorWB.loans.currentMessages.today++,t.$operatorWB.loans.currentMessages.thisWeek++,t.$operatorWB.loans.currentMessages.thisMonth++),t.$operatorWB.loans.isDisabledByLotOfMessages&&(t.$operatorWB.communication.currentForm="result"),t.$operatorWB.messages.show({color:"positive",message:t.$t("communications.email.sendSuccess")}));case 8:case"end":return e.stop()}}),e)})))()}},watch:{}},Xp=Jp,tf=(a("fe28"),Object(c["a"])(Xp,Zp,Kp,!1,null,"7f2d385e",null)),ef=tf.exports;d()(tf,"components",{QSelect:Jn["a"],QInput:Ns["a"],QBtn:b["a"],QSpinner:Hs["a"]});var af={name:"Communication",components:{EmailForm:ef,ResultForm:Ep,SMSForm:Up,CommunicationHeader:jd,CommunicationContact:Qd,CommunicationActions:zd}},nf=af,sf=Object(c["a"])(nf,Bd,qd,!1,null,"1de32c16",null),rf=sf.exports;d()(sf,"components",{QCard:m["a"],QCardSection:p["a"]});var of=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("HistoryBlock",[a("template",{slot:"title-left"},[a("span",[t._v(t._s(t.$t("communications.histories.titles.comments")))])]),a("template",{slot:"title-right"},[a("div",{staticClass:"flex items-center",on:{mouseover:t.hoverTable}},[a("div",{staticClass:"comments__filter-title"},[t._v("Скрыть:")]),t._l(t.filters,(function(e,n){return a("q-checkbox",{key:n,staticClass:"comments__filter-checkbox",attrs:{color:"WB-primary",val:e,label:t.$t("communications.filters."+e),dense:"",dark:!1},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})}))],2)]),a("q-table",{attrs:{columns:t.columns,data:t.data,pagination:t.pagination,"row-key":"id",color:"WB-secondary","hide-bottom":"",separator:"cell",dark:!1},on:{"update:pagination":function(e){t.pagination=e}},nativeOn:{mouseover:function(e){return t.hoverTable(e)}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{class:t.rowClass(e),attrs:{props:e,"data-prop":e},nativeOn:{mouseover:function(a){t.idOfHoveredRow=e.row.id},mouseleave:function(e){t.idOfHoveredRow=0}}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,attrs:{props:e}},["comment"!==n.name?["channel"===n.name?[a("div",{staticClass:"parent"},[a("span",{staticClass:"q-mr-lg",domProps:{innerHTML:t._s(t.columnValue(n,e.row))}}),t.isHoveredRow(e.row.id)&&e.row.channel&&e.row.channel.phone&&e.row.channel.phone.number?[a("q-btn",{staticClass:"child",attrs:{icon:"call",color:"positive",size:"7px",round:"",dense:""},on:{click:function(a){return t.callStart(e.row.channel.phone.number)}}})]:t._e()],2)]:"status"===n.name&&t.$operatorWB.layout.isApplicationCard&&t.changesForCommunication(e.row.id)?[a("div",{staticClass:"flex justify-center items-start"},[a("span",{domProps:{innerHTML:t._s(t.columnValue(n,e.row))}}),a("q-icon",{staticClass:"font-size-medium q-ml-sm",attrs:{name:"account_box",color:"warning"}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle"}},[a("span",[t._v("В этой коммуникации были изменены анкетные данные клиента:")]),a("pre",[t._v(t._s(t.changesForCommunication(e.row.id)))])])],1)],1)]:[a("span",{domProps:{innerHTML:t._s(t.columnValue(n,e.row))}})]]:[a("div",{staticClass:"parent"},[n.value&&n.value.length>60?a("span",{class:t.rowClass(e).editable?"q-mr-lg":"",on:{mouseover:function(a){return t.showMenu("myToolTip"+e.row.id,"text",e.row)},mouseout:function(a){return t.hideMenu("myToolTip"+e.row.id,"text",e.row)}}},[t._v(t._s(t.truncate(n.value,60))),a("q-popup-proxy",{ref:"myToolTip"+e.row.id,refInFor:!0,attrs:{"transition-show":"jump-down","transition-hide":"jump-up",anchor:"top middle",self:"bottom middle","content-class":"bg-transparent no-shadow","max-width":"400px"},on:{mouseover:function(a){return t.showMenu("myToolTip"+e.row.id,"menu",e.row)},mouseout:function(a){return t.hideMenu("myToolTip"+e.row.id,"menu",e.row)}}},[a("div",{staticClass:"flex justify-center items-center"},[a("div",{staticClass:"full-message q-pa-lg text-justify shadow-2 brs5"},[t._v(t._s(n.value))]),a("div",{staticClass:"triangle-pointer"})])])],1):a("span",{class:t.rowClass(e).editable?"q-mr-lg":""},[t._v(t._s(n.value))]),t.isHoveredRow(e.row.id)&&t.rowClass(e).editable?a("q-btn",{staticClass:"child",attrs:{icon:"edit",color:"info",size:"7px",round:"",dense:""},nativeOn:{click:function(a){return function(){return t.editingCommunication(e)}()}}}):t._e()],1)]],2)})),1)]}}])})],2)},lf=[],cf=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"card history brs5 ovh",class:t.size,attrs:{dark:!1}},[a("q-card-section",{staticClass:"q-pa-none"},[a("div",{staticClass:"card__title flex justify-between"},[a("div",{staticClass:"left"},[t._t("title-left")],2),a("div",{staticClass:"right flex justify-between"},[t._t("title-right"),a("div",{staticClass:"expander flex items-center"},[a("q-btn",{attrs:{size:"sm",flat:""},on:{click:t.toggleSize}},[a("q-icon",{attrs:{name:"half"===t.size?"keyboard_arrow_up":"keyboard_arrow_down"}})],1)],1)],2)])]),a("q-card-section",{staticClass:"card__content q-pa-none"},[a("q-scroll-area",{staticClass:"full-height",attrs:{dark:!1}},[t._t("default")],2)],1)],1)},uf=[],df={name:"HistoryBlock",props:{icon:String},computed:{size:function(){return this.$operatorWB.layout.size}},methods:{toggleSize:function(){"half"===this.size?this.$operatorWB.layout.size="full":this.$operatorWB.layout.size="half"}}},mf=df,pf=(a("e220"),Object(c["a"])(mf,cf,uf,!1,null,null,null)),ff=pf.exports;d()(pf,"components",{QCard:m["a"],QCardSection:p["a"],QBtn:b["a"],QIcon:ja["a"],QScrollArea:Fe["a"]});var hf=[{name:"channel",field:"channel",label:Mi["b"].t("communications.labels.table.channel"),align:"center",required:!0,sortable:!0},{name:"date",field:"contactedAt",label:Mi["b"].t("communications.labels.table.date"),align:"center",required:!0,sortable:!0},{name:"action",field:"action",label:Mi["b"].t("communications.labels.table.action"),align:"center",required:!0,sortable:!0},{name:"status",field:"status",label:Mi["b"].t("communications.labels.table.status"),align:"center",required:!0,sortable:!0},{name:"result",field:"result",label:Mi["b"].t("communications.labels.table.result"),align:"center",required:!0,sortable:!0},{name:"comment",field:"comment",label:Mi["b"].t("communications.labels.table.comment"),align:"center",required:!0,sortable:!0},{name:"operator",field:"operator",label:Mi["b"].t("communications.labels.table.operator"),align:"center",required:!0,sortable:!0}],bf={name:"CommunicationHistory",components:{HistoryBlock:ff},data:function(){return{canUpdate:!1,idOfHoveredRow:0,title:this.$t("communications.histories.titles.comments"),filters:["sms","email","site","noResult"],filter:[],pagination:{sortBy:"date",descending:!0,page:1,rowsPerPage:0},columns:hf}},updated:function(){this.canUpdate&&(this.canUpdate=!1,this.update())},computed:{edited:function(){return this.$operatorWB.communication.edited},client:function(){return this.$operatorWB.clients.currentClient},loan:function(){return this.$operatorWB.loans.currentLoan},data:function(){var t=Array.from(this.client.communications||[]);return this.filter.includes("sms")&&(t=t.filter((function(t){return!(t.channel&&t.channel.phone&&"sms"===t.channel.phone.variant)&&"restoreAccessSms"!==t.result&&"sendingSms"!==t.action}))),this.filter.includes("email")&&(t=t.filter((function(t){return!(t.channel&&t.channel.email&&"email"===t.channel.email.variant)}))),this.filter.includes("noResult")&&(t=t.filter((function(t){return"contactWithoutResult"!==t.result&&"withoutClientContact"!==t.result}))),t},changesForApplication:function(){return this.$operatorWB.applications.get("item.changes")||[]}},methods:{truncate:function(t,e){return t?(t.length>e&&(t=t.substr(0,e),t+="..."),t):""},isCurrentLoanOrApplication:function(t){return this.$operatorWB.layout.isApplicationCard?t.applicationId&&this.$operatorWB.applications.get("item.id")&&t.applicationId===this.$operatorWB.applications.get("item.id"):t.productId&&this.$operatorWB.loans.current&&t.productId===this.$operatorWB.loans.current},activeRow:function(t){return t.id===this.$operatorWB.communication.form.id},editingCommunication:function(t){if(!this.$operatorWB.user.operatorCanEditCommunication(t.row.id))return!1;var e=this.rowClass(t);if(!e.editable)return!1;this.edited?this.$operatorWB.communication.edited=null:this.$operatorWB.communication.edited=t.row},rowClass:function(t){var e=this.$operatorWB.user.operatorCanEditCommunication(t.row.id);return"restoreAccessSms"!==t.row.result&&"amnesty"!==t.row.result||(e=!1),"manualDial"===t.row.action&&t.row.channel&&t.row.channel.phone&&"sms"===t.row.channel.phone.variant&&(e=!1),"sendingEmail"!==t.row.action&&"sendingSms"!==t.row.action||(e=!1),{editable:e,active:this.activeRow(t.row),current:this.isCurrentLoanOrApplication(t.row)}},toggleSize:function(){"half"===this.$operatorWB.layout.size?this.$operatorWB.layout.set("size","full"):this.$operatorWB.layout.set("size","half")},columnValue:function(t,e){var a=t.value,n=null;switch(t.name){case"channel":if(n=t.value,n){var s=Object.keys(n).includes("phone")&&null!==n.phone?"phone":null!==n[Object.keys(n)[0]]?Object.keys(n)[0]:null!==n[Object.keys(n)[1]]?Object.keys(n)[1]:Object.keys(n)[2],i=n[s],r=i.number,o=i.address,l=i.url,c=i.variant;a=n?r||o||l||this.$t("communications.channel."+c):this.$t("communications.channel.unknown")}else a=this.$t("communications.channel.unknown");break;case"action":if(a=this.$t("communications.action."+t.value),["autoDial","manualDial"].includes(t.value)&&e.channel){n=e.channel;var u=Object.keys(n).includes("phone")?"phone":Object.keys(n)[0],d=n[u].variant;a=this.$t("communications.channel."+d)}break;case"status":a=this.$t("communications.status."+t.value);break;case"result":a=["smsToClient","emailToClient"].includes(e.status)?"smsToClient"===e.status?t.value&&this.$t("communications.sms.templates."+t.value)||"":t.value&&this.$t("communications.email.templates."+t.value)||"":e.reason?t.value&&"".concat(this.$t("communications.result."+t.value)," (").concat(this.$t("communications.reason."+e.reason),")"):t.value&&this.$t("communications.result."+t.value)||"";break;case"date":a=Object(U["c"])(t.value);break;case"operator":var m=t.value;a=m&&(m.fullName||m.department&&m.department.name);break;default:}return a},isHoveredRow:function(t){return this.idOfHoveredRow===t},callStart:function(t){var e={contactedAt:hs["b"].formatDate(Date.now(),"YYYY-MM-DDTHH:mm:ssZZ"),action:"manualDial",channel:{phone:{variant:"outgoingManualCall",number:t}}},a=this.$operatorWB.communication.form;this.$operatorWB.communication.form=Object.assign({},a,e),this.$operatorWB.dialer.sayMake({client_id:this.$operatorWB.clients.current,loan_id:this.$operatorWB.loans.current,phone:t})},showMenu:function(t,e,a){var n=this,s=this.$refs[t];a.showing=!0,"menu"!==e&&setTimeout((function(){a.showing&&void 0!==s&&s.length&&(n.deleteUnusedToolTips(t),n.$refs[t][0].show())}),10)},hideMenu:function(t,e,a){var n=this,s=this.$refs[t];a.showing=!1,setTimeout((function(){!a.showing&&void 0!==s&&s.length&&(n.deleteUnusedToolTips(t),n.$refs[t][0].hide())}),10)},deleteUnusedToolTips:function(t){this.$refs[t].length>1&&this.$refs[t].splice(0,this.$refs[t].length-1)},update:function(){this.columns=[],this.$nextTick((function(){this.columns=hf}))},hoverTable:function(){this.canUpdate||(this.canUpdate=!0)},changesForCommunication:function(t){var e=this.changesForApplication.find((function(e){return e.communicationId===t}));return e&&e.changes.profile||void 0}}},gf=bf,vf=(a("f11b"),Object(c["a"])(gf,of,lf,!1,null,"76ede780",null)),_f=vf.exports;d()(vf,"components",{QCheckbox:ar["a"],QTable:Zr["a"],QTr:Er["a"],QTd:Kr["a"],QBtn:b["a"],QIcon:ja["a"],QTooltip:$n["a"],QPopupProxy:qr["a"]});var yf=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("HistoryBlock",[a("template",{slot:"title-left"},[a("span",[t._v(t._s(t.$t("histories.accruals.title")))])]),a("template",{slot:"title-right"},[a("div",{staticClass:"accruals__date flex items-center"},[a("div",{staticClass:"accruals__date-title"},[t._v("Выбрать период")]),a("span",{staticClass:"accruals__date-text"},[t._v("с")]),a("q-input",{staticClass:"accruals__date-from brs3 q-mr-md date-picker",attrs:{"default-value":t.dateFrom,format:"DD.MM.YY",dense:"",outlined:"",readonly:"",dark:!1,color:"WB-primary"},model:{value:t.periodFrom,callback:function(e){t.periodFrom=e},expression:"periodFrom"}},[a("q-popup-proxy",{ref:"qDateProxy1",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{options:t.canChooseDates,mask:"DD.MM.YY",dark:!1,color:"WB-primary"},on:{input:function(){return t.$refs.qDateProxy1.hide()}},model:{value:t.periodFrom,callback:function(e){t.periodFrom=e},expression:"periodFrom"}})],1),a("template",{slot:"append"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}})],1)],2),a("span",{staticClass:"accruals__date-text"},[t._v("до")]),a("q-input",{staticClass:"accruals__date-to brs3 q-mr-md date-picker",attrs:{"default-value":t.dateTo,format:"DD.MM.YY",dense:"",outlined:"",readonly:"",dark:!1,color:"WB-primary"},model:{value:t.periodTo,callback:function(e){t.periodTo=e},expression:"periodTo"}},[a("q-popup-proxy",{ref:"qDateProxy3",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{options:t.canChooseDates,mask:"DD.MM.YY",dark:!1,color:"WB-primary"},on:{input:function(){return t.$refs.qDateProxy3.hide()}},model:{value:t.periodTo,callback:function(e){t.periodTo=e},expression:"periodTo"}})],1),a("template",{slot:"append"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}})],1)],2)],1)]),a("q-table",{attrs:{columns:t.columns,data:t.data,pagination:t.pagination,"row-key":"name",color:"WB-secondary","hide-bottom":"",separator:"cell",dark:!1},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",attrs:{props:e,"data-prop":e}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,attrs:{props:e}},[t._v(t._s(t.columnValue(n)))])})),1)]}}])})],2)},xf=[],Cf=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-table",{staticClass:"brs5",attrs:{columns:t.columns,data:t.data,pagination:t.pagination,"row-key":"name",color:"WB-secondary","hide-bottom":"",separator:"cell",dark:!1},on:{"update:pagination":function(e){t.pagination=e}}})},$f=[],Bf={name:"HistoryTable",props:{columns:{type:Array,required:!0},data:{type:Array,required:!0}},data:function(){return{pagination:{rowsPerPage:0}}}},qf=Bf,wf=Object(c["a"])(qf,Cf,$f,!1,null,"c688b200",null),Wf=wf.exports;d()(wf,"components",{QTable:Zr["a"]});var kf=hs["b"].formatDate,Df=hs["b"].extractDate,Of={name:"AccrualsHistory",components:{HistoryTable:Wf,HistoryBlock:ff},data:function(){return{pagination:{sortBy:"date",descending:!1,page:1,rowsPerPage:0},periodFrom:null,periodTo:null,columns:[{name:"index",field:function(t){return t.index},label:"№",align:"center",required:!0,sortable:!0},{name:"date",field:"date",label:"Дата",align:"center",required:!0,sortable:!0},{name:"sum_main_debt",field:"sum_main_debt",label:"Сумма ОД, ₽",align:"center",required:!0,sortable:!0},{name:"sum_interest",field:"sum_interest",label:"Сумма процентов, ₽",align:"center",required:!0,sortable:!0},{name:"sum_fines",field:"sum_fines",label:"Сумма пени, ₽",align:"center",required:!0,sortable:!0},{name:"payment",field:"payment",label:"Сумма оплаты, ₽",align:"center",required:!0,sortable:!0},{name:"payment_main_debt",field:"payment_main_debt",label:"Оплачено ОД, ₽",align:"center",required:!0,sortable:!0},{name:"payment_interest",field:"payment_interest",label:"Оплачено процентов, ₽",align:"center",required:!0,sortable:!0},{name:"payment_fines",field:"payment_fines",label:"Оплачено пени, ₽",align:"center",required:!0,sortable:!0},{name:"sum_total",field:"sum_total",label:"Общий долг, ₽",align:"center",required:!0,sortable:!0}]}},computed:{currentLoanAccruals:function(){return this.$operatorWB.loans.currentAccruals},data:function(){var t=this,e=Array.from(this.currentLoanAccruals||[]).filter((function(e){var a=new Date(Date.parse(e.date));if(t.periodFrom&&a<Df(t.periodFrom,"DD.MM.YY"))return!1;var n=Df(t.periodTo,"DD.MM.YY");return n=n.setDate(n.getDate()+1),!(t.periodTo&&a>n)}));return e},dateFrom:function(){var t=Object(zi["minBy"])(this.currentLoanAccruals,"date");return t&&new Date(Date.parse(t.date))},dateTo:function(){var t=Object(zi["maxBy"])(this.currentLoanAccruals,"date");return t&&new Date(Date.parse(t.date))}},methods:{columnValue:function(t){var e=t.value;switch(t.name){case"sum_main_debt":case"sum_interest":case"sum_fines":case"payment":case"payment_main_debt":case"payment_interest":case"payment_fines":case"sum_total":e=t.value?Object(U["l"])(t.value,!0):"";break;case"date":e=Object(U["d"])(t.value);break}return e},canChooseDates:function(t){return t.includes(".")&&(t=t.split("."),t="20"+t[2]+"/"+t[1]+"/"+t[0]),t>=kf(this.dateFrom,"YYYY/MM/DD")&&t<=kf(this.dateTo,"YYYY/MM/DD")}}},jf=Of,Sf=Object(c["a"])(jf,yf,xf,!1,null,"78c97438",null),Pf=Sf.exports;d()(Sf,"components",{QInput:Ns["a"],QPopupProxy:qr["a"],QDate:wr["a"],QIcon:ja["a"],QTable:Zr["a"],QTr:Er["a"],QTd:Kr["a"]});var Mf=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("HistoryBlock",[a("template",{slot:"title-left"},[a("span",[t._v(t._s(t.$t("histories.payments.title")))])]),a("template",{slot:"title-right"},[a("span",{staticClass:"height q-mr-sm"},[t._v(t._s(t.$t("histories.payments.sumTotal"))+": "),a("strong",[t._v(t._s(t.money(t.sumTotal,!0)))])])]),a("q-table",{attrs:{columns:t.columns,data:t.data,pagination:t.pagination,"row-key":"name",color:"WB-secondary","hide-bottom":"",separator:"cell",dark:!1},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",attrs:{props:e,"data-prop":e}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,attrs:{props:e}},["datetime"===n.type?[n.value?a("span",[t._v(t._s(n.value.split(" ")[0])+"\n "),a("small",{staticClass:"text-blue-grey-9"},[t._v(t._s(n.value.split(" ")[1]))])]):t._e()]:[a("span",[t._v(t._s(n.value))])]],2)})),1)]}}])})],2)},Af=[],Tf={name:"PaymentsHistory",components:{HistoryBlock:ff},data:function(){return{money:U["l"],pagination:{sortBy:"paidAt",descending:!0,page:1,rowsPerPage:0},columns:[{name:"paidAt",field:"paidAt",format:function(t){return Object(U["c"])(t)},label:this.$t("histories.payments.date"),align:"center",required:!0,sortable:!0,type:"datetime"},{name:"number",field:"id",label:this.$t("histories.payments.number"),align:"center",required:!0,sortable:!0},{name:"amount",field:"amount",format:function(t){return Object(U["l"])(t,!0)},label:this.$t("histories.payments.sumPayment"),align:"center",required:!0,sortable:!0},{name:"paymentSystem",field:"paymentSystem",label:this.$t("histories.payments.paymentSystem"),align:"center",required:!0,sortable:!0}]}},computed:{data:function(){return this.$operatorWB.loans.currentPayments},sumTotal:function(){return this.data.reduce((function(t,e){return t+e.amount}),0)}}},Qf=Tf,Ff=(a("0ac9"),Object(c["a"])(Qf,Mf,Af,!1,null,"63105f0f",null)),If=Ff.exports;d()(Ff,"components",{QTable:Zr["a"],QTr:Er["a"],QTd:Kr["a"]});var Rf=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("HistoryBlock",{staticClass:"history-loans"},[a("template",{slot:"title-left"},[a("span",[t._v(t._s(t.$t("communications.histories.titles.loans")))])]),a("q-table",{attrs:{columns:t.columns,data:t.data,pagination:t.pagination,"row-key":"name",color:"WB-secondary","hide-bottom":"",separator:"cell",dark:!1},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{ref:"row_"+e.row.id,staticClass:"cursor-pointer",attrs:{props:e,"data-prop":e},nativeOn:{click:function(a){return t.openInfo(e.row)}}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,attrs:{props:e}},["max_delay"===n.name?[a("span",{staticClass:"circle",class:t.colorClass(n.value)},[t._v(t._s(n.value))])]:[t._v(t._s(t.columnValue(n,e.row)))]],2)})),1)]}}])}),a("q-dialog",{attrs:{"full-width":"",maximized:"",position:"top",seamless:"","content-class":"operatorWB__dialog","content-style":"z-index: 6100;",dark:!1},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("q-card",{staticClass:"loan-info",attrs:{dark:!1}},[a("q-card-section",{staticClass:"row items-center q-py-none"},[a("q-tabs",{staticStyle:{color:"black"},attrs:{"active-color":"WB-primary",dark:!1},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"accruals",label:"Начисления",dark:!1}}),a("q-tab",{attrs:{name:"communications",label:"Коммуникации",dark:!1}})],1),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:"",dark:!1,color:"black"}})],1),a("q-card-section",{staticClass:"content"},[a("q-tab-panels",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{staticStyle:{background:"white"},attrs:{name:"accruals",dark:!1}},[a("q-table",{attrs:{columns:t.accruals.columns,data:t.accruals.list,pagination:t.accruals.pagination,"row-key":"name",color:"WB-secondary","hide-bottom":"",separator:"cell",loading:t.loading,dark:!1},on:{"update:pagination":function(e){return t.$set(t.accruals,"pagination",e)}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",attrs:{props:e,"data-prop":e}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,attrs:{props:e}},[t._v(t._s(t.columnValue(n,e.row)))])})),1)]}}])})],1),a("q-tab-panel",{staticStyle:{background:"white"},attrs:{name:"communications",dark:!1}},[a("q-table",{attrs:{columns:t.communications.columns,data:t.communicationsList,pagination:t.communications.pagination,"row-key":"index",color:"WB-secondary","hide-bottom":"",separator:"cell",loading:t.loading,dark:!1},on:{"update:pagination":function(e){return t.$set(t.communications,"pagination",e)}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e,"data-prop":e}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,attrs:{props:e}},["comment"!==n.name?[a("span",{domProps:{innerHTML:t._s(t.columnValue(n,e.row))}})]:[n.value&&n.value.length>60?a("span",[t._v(t._s(t.truncate(n.value,60))),a("q-tooltip",[t._v(t._s(n.value))])],1):a("span",[t._v(t._s(n.value))])]],2)})),1)]}}])})],1)],1)],1),a("q-card-actions",[a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Закрыть",color:"WB-primary"}})],1)],1)],1)],2)},Ef=[],Lf={name:"LoansHistory",components:{AccrualsHistory:Pf,HistoryBlock:ff},data:function(){return{accruals:{list:[],columns:[{name:"index",field:function(t){return t.id},label:"№",align:"center",required:!0,sortable:!0},{name:"date",field:"date",format:function(t){return Object(U["d"])(t)},label:"Дата",align:"center",required:!0,sortable:!0},{name:"sum_main_debt",field:"sum_main_debt",label:"Сумма ОД, ₽",align:"center",required:!0,sortable:!0},{name:"sum_interest",field:"sum_interest",label:"Сумма процентов, ₽",align:"center",required:!0,sortable:!0},{name:"sum_fines",field:"sum_fines",label:"Сумма пени, ₽",align:"center",required:!0,sortable:!0},{name:"payment",field:"payment",label:"Сумма оплаты, ₽",align:"center",required:!0,sortable:!0},{name:"payment_main_debt",field:"payment_main_debt",label:"Оплачено ОД, ₽",align:"center",required:!0,sortable:!0},{name:"payment_interest",field:"payment_interest",label:"Оплачено процентов, ₽",align:"center",required:!0,sortable:!0},{name:"payment_fines",field:"payment_fines",label:"Оплачено пени, ₽",align:"center",required:!0,sortable:!0},{name:"sum_total",field:"sum_total",label:"Общий долг, ₽",align:"center",required:!0,sortable:!0}],pagination:{sortBy:"date",descending:!1,page:1,rowsPerPage:0}},communications:{list:[],columns:[{name:"channel",field:"channel",label:this.$t("communications.labels.table.channel"),align:"center",required:!0,sortable:!0},{name:"date",field:"contactedAt",format:function(t){return Object(U["c"])(t)},label:this.$t("communications.labels.table.date"),align:"center",required:!0,sortable:!0},{name:"action",field:"action",label:this.$t("communications.labels.table.action"),align:"center",required:!0,sortable:!0},{name:"status",field:"status",label:this.$t("communications.labels.table.status"),align:"center",required:!0,sortable:!0},{name:"result",field:"result",label:this.$t("communications.labels.table.result"),align:"center",required:!0,sortable:!0},{name:"comment",field:"comment",label:this.$t("communications.labels.table.comment"),align:"center",required:!0,sortable:!0},{name:"operator",field:"operator",format:function(t){return t.fullName},label:this.$t("communications.labels.table.operator"),align:"center",required:!0,sortable:!0}],pagination:{sortBy:"date",descending:!0,page:1,rowsPerPage:0}},dialog:!1,tab:"accruals",current:null,loading:!1,colorClass:fs["a"],pagination:{sortBy:"date_start",descending:!0,page:1,rowsPerPage:0},columns:[{name:"doc_number",field:"doc_number",label:"№ займа",align:"center",required:!0,sortable:!0},{name:"date_start",field:"date_start",label:"Дата начала",align:"center",required:!0,sortable:!0},{name:"date_end",field:"date_end",label:"Дата окончания",align:"center",required:!0,sortable:!0},{name:"days",field:"days",label:"Срок",align:"center",required:!0,sortable:!0},{name:"sum",field:"sum",label:"Сумма, ₽",align:"center",required:!0,sortable:!0},{name:"date_closed",field:"date_closed",label:"Дата погашения",align:"center",required:!0,sortable:!0},{name:"max_delay",field:"max_delay",label:"Просрочка дней",align:"center",required:!0,sortable:!0},{name:"dop_count",field:"dop_count",label:"Пролонгаций",align:"center",required:!0,sortable:!0}]}},watch:{dialog:function(t){!1===t&&(this.unsetActive(),this.current=null)}},computed:{data:function(){return this.$operatorWB.clients.currentLoansHistory},communicationsList:function(){var t=this;return this.current?this.communications.list.filter((function(e){return e.productId===t.current.id})):[]}},methods:{truncate:function(t,e){return t?(t.length>e&&(t=t.substr(0,e),t+="..."),t):""},unsetActive:function(){var t=this,e=Object.keys(this.$refs);e&&e.forEach((function(e){return t.$refs[e].$el.classList.remove("active")}))},getData:function(){var t=this;return Gn()(zn.a.mark((function e(){var a,n;return zn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.current){e.next=2;break}return e.abrupt("return");case 2:return t.$refs["row_"+t.current.id].$el.classList.add("active"),t.loading=!0,e.next=6,Un["a"].crm.getLoanAccruals({productId:t.current.id});case 6:return a=e.sent,e.next=9,Un["a"].crm.getClientCommunications(t.$operatorWB.clients.current);case 9:n=e.sent,t.accruals.list=a&&a.data.list,t.communications.list=n&&n.data.communications,t.loading=!1;case 13:case"end":return e.stop()}}),e)})))()},openInfo:function(t){this.unsetActive(),this.tab="accruals",this.accruals.list=[],this.communications.list=[],this.dialog=!0,this.current=t,this.getData()},columnValue:function(t,e){var a=t.value,n=null;switch(t.name){case"action":if(a=this.$t("communications.action."+t.value),["autoDial","manualDial"].includes(t.value)&&e.channel){n=e.channel;var s=n&&Object.keys(e.channel)[0],i=n[s].variant;a=this.$t("communications.channel."+i)}break;case"status":a=this.$t("communications.status."+t.value);break;case"result":a=["smsToClient","emailToClient"].includes(e.status)?"smsToClient"===e.status?t.value&&this.$t("communications.sms.templates."+t.value)||"":t.value&&this.$t("communications.email.templates."+t.value)||"":t.value&&this.$t("communications.result."+t.value)||"";break;case"channel":if(n=t.value,n){var r=n&&Object.keys(n)[0],o=n[r],l=o.number,c=o.address,u=o.url,d=o.variant;a=n?l||c||u||this.$t("communications.channel."+d):this.$t("communications.channel.unknown")}else a=this.$t("communications.channel.unknown");break;case"sum":a=Object(U["l"])(t.value,!0);break;case"date_start":case"date_end":case"date_closed":a=t.value&&Object(U["d"])(t.value);break}return a}}},Yf=Lf,Hf=(a("3d9c"),a("429b")),Nf=a("7460"),zf=a("adad"),Vf=a("823b"),Gf=Object(c["a"])(Yf,Rf,Ef,!1,null,null,null),Uf=Gf.exports;d()(Gf,"components",{QTable:Zr["a"],QTr:Er["a"],QTd:Kr["a"],QDialog:$t["a"],QCard:m["a"],QCardSection:p["a"],QTabs:Hf["a"],QTab:Nf["a"],QSpace:Cn["a"],QBtn:b["a"],QTabPanels:zf["a"],QTabPanel:Vf["a"],QTooltip:$n["a"],QCardActions:h["a"]}),d()(Gf,"directives",{ClosePopup:Bn["a"]});var Zf=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("HistoryBlock",[a("template",{slot:"title-left"},[a("span",[t._v(t._s(t.$t("communications.histories.titles.promises")))])]),a("q-table",{attrs:{columns:t.columns,data:t.$operatorWB.loans.currentPromises,pagination:t.pagination,"row-key":"name",color:"WB-secondary","hide-bottom":"",separator:"cell",dark:!1},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",attrs:{props:e,"data-prop":e}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,attrs:{props:e}},["status"===n.name?[a("span",{class:t.colorClass(n.value)},[t._v(t._s(t.columnValue(n)))])]:"operator"===n.name?[a("span",[t._v(t._s(t.columnValue(n))),n.value&&n.value.fullName&&n.value.department&&n.value.department.name?a("q-tooltip",[t._v(t._s(n.value.department.name)+" ("+t._s(n.value.position)+")")]):t._e()],1)]:[t._v(t._s(t.columnValue(n)))]],2)})),1)]}}])})],2)},Kf=[],Jf={name:"PromisesHistory",components:{HistoryBlock:ff},data:function(){return{pagination:{sortBy:"createdAt",descending:!0,page:1,rowsPerPage:0},columns:[{name:"createdAt",field:"createdAt",label:"Дата обещания",align:"center",required:!0,sortable:!0},{name:"promisedAt",field:"promisedAt",label:"Дата выполнения обещания",align:"center",required:!0,sortable:!0},{name:"type",field:"type",label:"Тип обещания",align:"center",required:!0,sortable:!0},{name:"promisedAmount",field:"promisedAmount",label:"Сумма к оплате, ₽",align:"center",required:!0,sortable:!0},{name:"status",field:"status",label:"Статус обещания",align:"center",required:!0,sortable:!0},{name:"operator",field:"operator",label:"Исполнитель",align:"center",required:!0,sortable:!0}]}},computed:{},methods:{colorClass:function(t){var e="";return"notFulfilled"===Hl()(t)&&(e="red"),"partiallyFulfilled"===Hl()(t)&&(e="orange"),e},columnValue:function(t){var e=t.value;switch(t.name){case"partial":case"promisedAmount":e=t.value?Object(U["l"])(t.value,!0):"";break;case"createdAt":case"promisedAt":e=Object(U["d"])(t.value);break;case"type":e=t.value&&this.$t("communications.result."+t.value);break;case"status":e=t.value&&this.$t("communications.promises."+Hl()(t.value))||this.$t("communications.promises.unknown");break;case"operator":var a=t.value;e=a&&(a.fullName||a.department&&a.department.name);break}return e}}},Xf=Jf,th=(a("47c2"),Object(c["a"])(Xf,Zf,Kf,!1,null,"11eaa5d2",null)),eh=th.exports;d()(th,"components",{QTable:Zr["a"],QTr:Er["a"],QTd:Kr["a"],QTooltip:$n["a"]});var ah=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("HistoryBlock",[a("template",{slot:"title-left"},[a("span",[t._v(t._s(t.$t("histories.agreements.title")))])]),a("q-table",{attrs:{columns:t.columns,data:t.agreements,pagination:t.pagination,"row-key":"id",color:"WB-secondary","hide-bottom":"",separator:"cell",dark:!1},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(e){return["amnesty"===e.row.type||"finInsurance"===e.row.type||"creditHolidays"===e.row.type?[a("q-tr",{staticClass:"cursor-pointer",class:{active:t.isActiveDS(e.row.id)},attrs:{props:e,"data-prop":e}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,attrs:{props:e}},[a("span",[t._v(t._s(t.columnValue(n,e.row)))])])})),1)]:"renewal"===e.row.type?[a("q-tr",{staticClass:"cursor-pointer",class:{active:t.isActiveDS(e.row.id)},attrs:{props:e,"data-prop":e}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,attrs:{props:e}},["status"===n.name?[a("span",{class:{alarm:"signTermExpired"===n.value,warning:"paidTermExpired"===n.value}},[t._v(t._s(t.columnValue(n,e.row)))])]:[a("span",[t._v(t._s(t.columnValue(n,e.row)))])]],2)})),1)]:"installment"===e.row.type?[a("q-tr",{staticClass:"cursor-pointer",class:{active:t.isActiveDS(e.row.id)},attrs:{"data-prop":e}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,class:{active:t.isActiveDS(e.row.id)},attrs:{props:e}},["status"===n.name?[a("span",{class:{alarm:"signTermExpired"===n.value,warning:"paidTermExpired"===n.value}},[t._v(t._s(t.columnValue(n,e.row)))])]:"paymentAmount"===n.name?[t.isActiveDS(e.row.id)?a("q-checkbox",{staticClass:"q-mr-md",attrs:{size:"xs",color:"WB-primary","checked-icon":"remove","unchecked-icon":"add"},model:{value:e.expand,callback:function(a){t.$set(e,"expand",a)},expression:"props.expand"}}):t._e(),a("span",[t._v(t._s(t.columnValue(n,e.row)))])]:[a("span",[t._v(t._s(t.columnValue(n,e.row)))])]],2)})),1),a("q-tr",{directives:[{name:"show",rawName:"v-show",value:e.expand&&t.isActiveDS(e.row.id),expression:"props.expand && isActiveDS(props.row.id)"}],attrs:{props:e}},[a("q-td",{attrs:{colspan:"100%"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"schedule q-mr-md"},[a("PaymentScheduleFull")],1),a("div",{staticClass:"payments"},[a("InstallmentPayments")],1)])])],1)]:[a("q-tr",{staticClass:"cursor-pointer",class:{active:t.isActiveDS(e.row.id)},attrs:{props:e,"data-prop":e}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,attrs:{props:e}},[a("span",[t._v(t._s(t.columnValue(n,e.row)))])])})),1)]]}}])})],2)},nh=[],sh=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PaymentScheduleFull"},[a("div",{staticClass:"PaymentScheduleFull__title",domProps:{textContent:t._s(t.$t("loans.schedule.title"))}}),a("q-table",{staticClass:"PaymentScheduleFull__table",attrs:{data:t.schedule,columns:t.columns,"row-key":"index","hide-bottom":"",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}}}),a("div",{staticClass:"PaymentScheduleFull__leftToPay"},[a("span",{staticClass:"q-mr-sm"},[t._v(t._s(t.$t("loans.schedule.amountLeftToPay"))+":")]),a("span",{staticClass:"PaymentScheduleFull__leftToPay__value",domProps:{textContent:t._s(t.totalLeftToPay)}})])],1)},ih=[],rh={columns:[{name:"lastDayOfPayment",field:"lastDayOfPayment",format:function(t){return Object(U["d"])(t)},required:!0,align:"center",label:Mi["b"].t("loans.schedule.header.lastDayOfPayment")},{name:"amountBySchedule",field:"amountBySchedule",format:function(t){return Object(U["l"])(t,!0)},required:!0,align:"center",label:Mi["b"].t("loans.schedule.header.amountBySchedule")},{name:"amountToPay",field:"amountToPay",format:function(t){return Object(U["l"])(t,!0)},required:!0,label:Mi["b"].t("loans.schedule.header.amountToPay")},{name:"paidAmount",field:"paidAmount",format:function(t){return Object(U["l"])(t,!0)},required:!0,label:Mi["b"].t("loans.schedule.header.paidAmount")},{name:"status",field:function(t){return Mi["b"].t("loans.schedule.status."+t.status)+("delayed"===t.status?" до "+Object(U["d"])(t.delayedUntil):"")},align:"center",required:!0,label:Mi["b"].t("loans.schedule.header.status")}],pagination:{sortBy:"lastDayOfPayment",descending:!1,page:1,rowsPerPage:6}};function oh(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function lh(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?oh(Object(a),!0).forEach((function(e){z()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):oh(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var ch={name:"PaymentScheduleFull",data:function(){return lh({},rh)},computed:{schedule:function(){return this.$operatorWB.loans.currentActiveAgreementSchedule&&this.$operatorWB.loans.currentActiveAgreementSchedule.payments||[]},totalLeftToPay:function(){return Object(U["l"])(this.$operatorWB.loans.currentActiveAgreementSchedule&&this.$operatorWB.loans.currentActiveAgreementSchedule.totalLeftToPay,!0)}}},uh=ch,dh=(a("38bb"),Object(c["a"])(uh,sh,ih,!1,null,null,null)),mh=dh.exports;d()(dh,"components",{QTable:Zr["a"]});var ph=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payments"},[a("div",{staticClass:"payments__title q-mb-md",domProps:{textContent:t._s(t.$t("loans.schedule.payments"))}}),a("q-table",{attrs:{columns:t.columns,data:t.data,pagination:t.pagination,"row-key":"index",color:"WB-secondary","hide-bottom":"",separator:"cell"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",attrs:{props:e,"data-prop":e}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,attrs:{props:e}},[t._v(t._s(n.value))])})),1)]}}])})],1)},fh=[],hh={name:"InstallmentPayments",components:{HistoryBlock:ff},data:function(){return{pagination:{sortBy:"paidAt",descending:!1,page:1,rowsPerPage:0},columns:[{name:"paidAt",field:"paidAt",format:function(t){return Object(U["d"])(t)},label:this.$t("histories.payments.date"),align:"center",required:!0,sortable:!0},{name:"amount",field:"amount",format:function(t){return Object(U["l"])(t,!0)},label:this.$t("histories.payments.sumPayment"),align:"center",required:!0,sortable:!0}]}},computed:{data:function(){return this.$operatorWB.loans.currentActiveAgreementPayments},sumTotal:function(){return this.data.reduce((function(t,e){return t+e.sum_payment}),0)}}},bh=hh,gh=Object(c["a"])(bh,ph,fh,!1,null,"7d7c0d87",null),vh=gh.exports;d()(gh,"components",{QTable:Zr["a"],QTr:Er["a"],QTd:Kr["a"]});var _h={pagination:{sortBy:"createdAt",descending:!0,page:1,rowsPerPage:0},columns:[{name:"type",field:"type",label:"Тип",align:"center",required:!0,sortable:!0},{name:"createdAt",field:"createdAt",label:"Создание",align:"center",required:!0,sortable:!0},{name:"enteredIntoForceAt",field:"enteredIntoForceAt",label:"Вступило в силу",align:"center",required:!0,sortable:!0},{name:"period",field:"period",label:"Срок действия",align:"center",required:!0,sortable:!0},{name:"expiredAt",field:"expiredAt",label:"Окончание",align:"center",required:!0,sortable:!0},{name:"signedAt",field:"signedAt",label:"Подписание",align:"center",required:!0,sortable:!0},{name:"obligatoryPayment",field:"obligatoryPayment",label:"К оплате, ₽",align:"center",required:!0,sortable:!0},{name:"paidForAt",field:function(t){return Object(U["d"])(hs["b"].addToDate(t.createdAt,{days:"installment"===t.type?3:1}))},label:"Оплатить до",align:"center",required:!0,sortable:!0},{name:"paymentAmount",field:"paymentAmount",label:"Оплачено, ₽",align:"center",required:!0,sortable:!0},{name:"paymentAt",field:"paymentAt",label:"Дата оплаты",align:"center",required:!0,sortable:!0},{name:"status",field:"status",label:"Статус",align:"center",required:!0,sortable:!0}]};function yh(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function xh(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?yh(Object(a),!0).forEach((function(e){z()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):yh(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Ch={name:"AgreementsHistory",components:{InstallmentPayments:vh,PaymentScheduleFull:mh,PaymentSchedule:im,HistoryBlock:ff},data:function(){return xh(xh({},_h),{},{schedule:[]})},computed:{agreements:function(){var t=this,e=this.$operatorWB.loans.currentAgreements.map((function(e){var a=e.payments;if("renewal"===e.type&&a[0]&&(e.paymentAmount=a[0].amount,e.paymentAt=a[0].paidAt),"amnesty"!==e.type&&"finInsurance"!==e.type||"paid"!==e.status||(e.paymentAmount=e.obligatoryPayment,e.paymentAt=e.paidAt),"installment"===e.type){a=t.$operatorWB.loans.currentActiveAgreementPayments;var n=Array.from(a).reduce((function(t,e){return t+=e.amount,t}),0),s=t.$operatorWB.loans.currentActiveAgreementNextPayment;t.isActiveDS(e.id)&&(e.amountToPay=t.$operatorWB.loans.currentLoanDebt,e.paidAt=s,e.paymentAmount=n,e.paymentAt=a.length>0?a[a.length-1].paidAt:null)}return e}));return e}},methods:{isActiveDS:function(t){return!!this.$operatorWB.loans.currentActiveAgreement&&t===this.$operatorWB.loans.currentActiveAgreement.id},columnValue:function(t,e){var a=t.value;switch(t.name){case"obligatoryPayment":case"paymentAmount":a=t.value&&Object(U["l"])(t.value);break;case"createdAt":case"enteredIntoForceAt":case"expiredAt":case"terminatedAt":case"signedAt":case"paidAt":case"paymentAt":a=t.value&&Object(U["d"])(t.value);break;case"status":a=t.value&&this.$t("histories.agreements.status."+t.value),"terminated"===t.value&&(a=a+" ("+Object(U["d"])(e.terminatedAt)+")");break;case"type":a=t.value&&this.$t("histories.agreements.type."+t.value);break;case"period":if(a=t.value+" дн.",e&&"installment"===e.type){var n=hs["b"].getDateDiff(e.expiredAt,e.createdAt,"months");a=n+" мес."}if(e&&"creditHolidays"===e.type){var s=-(new Date).getTimezoneOffset()/60,i=hs["b"].subtractFromDate(e.expiredAt,{hours:s>3?s-3:0}),r=hs["b"].subtractFromDate(e.enteredIntoForceAt,{hours:s>3?s-3:0}),o=hs["b"].getDateDiff(i,r,"months"),l=Number(hs["b"].formatDate(i,"DD"))-Number(hs["b"].formatDate(r,"DD")),c=(l>=0?l:new Date(Number(hs["b"].formatDate(i,"YYYY")),Number(hs["b"].formatDate(i,"MM")),0).getDate()-Math.abs(l))+" дн.";a=l>=0?"".concat(o," мес.").concat(l>0?" "+c:""):"".concat(o-1," мес. ").concat(c)}break;default:a=t.value;break}return a||"Нет данных"}}},$h=Ch,Bh=(a("05da"),Object(c["a"])($h,ah,nh,!1,null,"f83c62fc",null)),qh=Bh.exports;d()(Bh,"components",{QTable:Zr["a"],QTr:Er["a"],QTd:Kr["a"],QCheckbox:ar["a"]});var wh=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("HistoryBlock",[a("template",{slot:"title-left"},[a("span",[t._v(t._s(t.$t("histories.purchases.title")))])]),a("q-table",{attrs:{columns:t.columns,data:t.deals,pagination:t.pagination,"row-key":"id",color:"WB-secondary","hide-bottom":"",separator:"cell",dark:!1},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",attrs:{"data-prop":e}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,attrs:{props:e}},["status"===n.name?[a("strong",{class:{"text-positive":"active"===n.value,"text-negative":"completed"===n.value}},[t._v(t._s(t.$t("histories.purchases.status."+n.value)))])]:"summ_period"===n.name?[a("span",[t._v(t._s(t.summPeriod(e.row)))])]:"paid"===n.name?[a("span",[t._v(t._s(t.paid(e.row)))])]:"products"===n.name?[a("q-icon",{attrs:{name:"far fa-file-alt",size:"1.5em",color:"blue"}},[a("q-tooltip",{attrs:{anchor:"top left",self:"bottom right",offset:[5,5]}},[a("ProductsList",{attrs:{products:n.value}})],1)],1)]:"shop_address"===n.name?[a("span",{staticClass:"link text-blue-grey"},[t._v(t._s(n.value)),a("q-tooltip",{attrs:{anchor:"top left",self:"bottom right",offset:[5,5]}},[a("span",[t._v(t._s(e.row.merchant.name)+" (ИНН: "+t._s(e.row.merchant.inn)+")")])])],1)]:"next_payment"===n.name?[a("div",{staticClass:"row items-baseline justify-center"},[a("span",{staticClass:"q-mr-lg"},[a("strong",{staticClass:"q-mr-sm",class:{"text-negative":t.overdue(e.row).length}},[t._v(t._s(t.money(t.nextAmount(e.row),!0))),t.overdue(e.row).length?a("q-tooltip",{attrs:{anchor:"top left",self:"bottom right",offset:[5,5]}},[a("span",[t._v("Просрочено платежей: "+t._s(t.overdue(e.row).length))])]):t._e()],1),a("span",{staticClass:"q-mr-sm text-profile"},[t._v("до")]),a("span",[t._v(t._s(t.getShortDate(t.nextDate(e.row))))])]),a("q-icon",{attrs:{name:"fa fa-signal",color:"blue"}},[a("q-tooltip",{attrs:{anchor:"top left",self:"bottom right",offset:[5,5]}},[a("PosScheduleList",{attrs:{schedule:e.row.schedules}})],1)],1)],1)]:[a("span",[t._v(t._s(n.value))])]],2)})),1)]}}])})],2)},Wh=[],kh={pagination:{sortBy:"date",descending:!0,page:1,rowsPerPage:0},columns:[{name:"index",field:function(t){return t.__index+1},label:"№",align:"center",required:!0,sortable:!0},{name:"group",field:function(t){return t.group},label:"Группа",align:"center",required:!0,sortable:!0},{name:"date",field:function(t){return hs["b"].formatDate(t.purchasedAt,"DD.MM.YYYY")},label:"Дата покупки",align:"center",required:!0,sortable:!0},{name:"summ_period",field:function(t){return"summPeriod"},label:"Сумма / Срок займа",align:"center",required:!0,sortable:!0},{name:"next_payment",field:function(t){return"xxxx"},label:"Ближайший платеж",align:"left",required:!0,sortable:!0},{name:"paid",field:function(t){return"yyyy"},label:"Погашено",align:"center",required:!0},{name:"shop_name",field:function(t){return t.shop.name},label:"Продавец",align:"center",required:!0},{name:"shop_address",field:function(t){return t.shop.address},label:"Адрес магазина",align:"center",required:!0},{name:"status",field:"status",label:"Статус займа",align:"center",required:!0},{name:"products",field:function(t){return t.products},label:"Список товаров",align:"center",required:!0}]},Dh=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-table",{attrs:{columns:t.columns,data:t.products,"row-key":"id",pagination:t.pagination,"hide-bottom":"",separator:"cell"},scopedSlots:t._u([{key:"body",fn:function(e){return a("q-tr",{attrs:{"data-prop":e}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,attrs:{props:e}},["status"===n.name?[a("strong",{class:{"text-positive":"not_returned"===n.value,"text-negative":"returned"===n.value}},[t._v(t._s(t.$t("histories.purchases.status."+n.value)))])]:[a("span",[t._v(t._s(n.value))])]],2)})),1)}}])})},Oh=[],jh={name:"ProductsList",props:{products:{type:Array,required:!0}},data:function(){return{pagination:{page:1,rowsPerPage:10},columns:[{name:"name",label:this.$t("histories.products.name"),field:"name",required:!0,align:"left"},{name:"price",label:this.$t("histories.products.price"),field:function(t){return Object(U["l"])(t.price)},required:!0,align:"right"},{name:"status",label:this.$t("histories.products.status"),field:"status",required:!0,align:"center"}]}}},Sh=jh,Ph=Object(c["a"])(Sh,Dh,Oh,!1,null,"7141060e",null),Mh=Ph.exports;function Ah(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function Th(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ah(Object(a),!0).forEach((function(e){z()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ah(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}d()(Ph,"components",{QTable:Zr["a"],QTr:Er["a"],QTd:Kr["a"]});var Qh={name:"PurchacesHistory",components:{PosScheduleList:sd,ProductsList:Mh,HistoryBlock:ff},data:function(){return Th(Th({},kh),{},{getShortDate:U["d"],money:U["l"]})},computed:{deals:function(){return this.$operatorWB.loans.currentLoan.deals}},methods:{notPaid:function(t){return Object(zi["sortBy"])(t.schedules,["date"]).filter((function(t){return"paid"!==t.status}))},overdue:function(t){return Object(zi["sortBy"])(t.schedules,["date"]).filter((function(t){return!["paid","not_paid"].includes(t.status)}))},nextDate:function(t){var e=this.notPaid(t).filter((function(t){return Date.parse(t.date)>Date.now()}));return e[0]&&e[0].date||new Date},summPeriod:function(t){return"".concat(Object(U["l"])(t.fund.loan,!0)," / ").concat(t.schedules.length?Object(U["d"])(Object(zi["maxBy"])(t.schedules,"date").date):"---")},nextAmount:function(t){var e=this,a=this.notPaid(t).filter((function(a){return Date.parse(a.date)<=Date.parse(e.nextDate(t))})).reduce((function(t,e){return t+(e.amount.expected-e.amount.paid)}),0);return a},paid:function(t){var e=Object(zi["sortBy"])(t.schedules,["date"]).reduce((function(t,e){return t+e.amount.paid}),0);return Object(U["l"])(e,!0)}}},Fh=Qh,Ih=(a("7760"),Object(c["a"])(Fh,wh,Wh,!1,null,"44fac96c",null)),Rh=Ih.exports;d()(Ih,"components",{QTable:Zr["a"],QTr:Er["a"],QTd:Kr["a"],QIcon:ja["a"],QTooltip:$n["a"]});var Eh={name:"ClientCard",components:{PurchasesHistory:Rh,AgreementsHistory:qh,PromisesHistory:eh,LoansHistory:Uf,PaymentsHistory:If,AccrualsHistory:Pf,Communication:rf,Borrower:$d,ClientHeader:Fl,CommunicationsHistory:_f},computed:{size:function(){return this.$operatorWB.layout.size},view:function(){return this.$operatorWB.layout.view}}},Lh=Eh,Yh=(a("823c"),Object(c["a"])(Lh,el,al,!1,null,"6e10d963",null)),Hh=Yh.exports;d()(Yh,"components",{QCard:m["a"],QCardSection:p["a"]});var Nh={name:"ClientCardModal",components:{ClientCard:Hh},mounted:function(){this.$nextTick((function(){this.$refs.layoutForDeleteTabindex.$parent.$refs.inner.removeAttribute("tabindex")}))}},zh=Nh,Vh=(a("69c1"),a("4d5a")),Gh=a("6ac5"),Uh=Object(c["a"])(zh,Xo,tl,!1,null,"5a1ae4d6",null),Zh=Uh.exports;d()(Uh,"components",{QDialog:$t["a"],QLayout:Vh["a"],QToolbarTitle:Gh["a"]});var Kh={name:"Modals",components:{ClientCardModal:Zh}},Jh=Kh,Xh=Object(c["a"])(Jh,Ko,Jo,!1,null,"60e5b64c",null),tb=Xh.exports,eb={name:"WBOperatorProject",components:{WBOperatorToolbar:bi,Modals:tb,PaymentsReport:Zo,Hard:Wo,WBOperatorProjectLogin:wi},created:function(){var t=this,e=G["a"].getItem("user-token")||null,a=null,n=!0;e&&(a=ki()(e),n=a.exp<Math.round(Date.now()/1e3)),!e||n?this.$operatorWB.layout.changeRoute("/login"):this.$operatorWB.layout.changeRoute("/"),!this.$operatorWB.layout.cancelWBOperatorStartNotify&&this.$q.platform.is.desktop&&Object(U["m"])({message:this.$t("wb.notify.resolution",{width:this.$q.screen.width,height:this.$q.screen.height}),color:this.$app.layout.activeColor,textColor:this.$app.layout.activeTextColor,icon:"desktop_mac",timeout:5e3},{label:this.$t("notify.dontShowAgain"),color:this.$app.layout.activeTextColor,handler:function(){G["a"].set("cancelWBOperatorStartNotify",!0),t.$operatorWB.layout.cancelWBOperatorStartNotify=!0}})},computed:{},methods:{}},ab=eb,nb=a("09e3"),sb=a("e359"),ib=Object(c["a"])(ab,In,Rn,!1,null,"6f664f6d",null),rb=ib.exports;d()(ib,"components",{QLayout:Vh["a"],QPageContainer:nb["a"],QHeader:sb["a"],QPage:Ci["a"]});var ob=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"managerWB__project"},["/login"===t.$managerWB.layout.route.path?[a("q-layout",[a("q-page-container",[a("WBManagerProjectLogin")],1)],1)]:[a("q-layout",{staticStyle:{height:"calc(100vh - 32px)",width:"100vw"},attrs:{view:"hHh lpR fFf",container:""}},[a("q-header",{attrs:{elevated:""}},[a("WBManagerToolbar")],1),a("WBManagerLeftMenu"),a("q-page-container",{staticClass:"bg-WB-bg-color text-WB-bg-profile-color"},[a("q-scroll-area",{staticStyle:{height:"calc(100vh - 82px)"},attrs:{"thumb-style":t.thumbStyle,dark:!1}},[a("q-page",{staticClass:"q-px-md q-pt-md q-pb-none",attrs:{padding:""}},["/"===t.$managerWB.layout.route.path?a("HardRatings"):t._e(),"/schedule"===t.$managerWB.layout.route.path?a("Schedule"):t._e(),"/settings"===t.$managerWB.layout.route.path?a("WBManagerSettingsPage"):t._e(),"/settings/mailing"===t.$managerWB.layout.route.path?a("WBManagerMailing"):t._e(),"/settings/loanRedistribution"===t.$managerWB.layout.route.path?a("WBManagerLoanRedistribution"):t._e(),"/settings/coefficients"===t.$managerWB.layout.route.path?a("WBManagerCoefficients"):t._e(),"/settings/payments"===t.$managerWB.layout.route.path?a("WBManagerPayments"):t._e()],1)],1)],1)],1)]],2)},lb=[],cb=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-toolbar",{staticClass:"width-100 flex items-center justify-between bg-WB-primary-color",attrs:{inverted:""}},[a("div",{staticClass:"row"},[a("div",{staticClass:"flex flex-center"},[a("q-btn",{attrs:{flat:"",dense:"",round:"","aria-label":"Menu",icon:"menu"},on:{click:function(e){t.$managerWB.layout.leftDrawerOpen=!t.$managerWB.layout.leftDrawerOpen}}})],1),a("div",{staticClass:"flex justify-between items-center bg-WB-primary-color text-WB-bg-profile-color max-h-50px q-pr-none"},[a("q-item",{staticClass:"q-py-xs"},[a("q-item-section",[a("q-item-label",{staticClass:"font-size-medium"},[t._v(t._s(t.$managerWB.user.shortName))]),a("q-item-label",{staticClass:"text-WB-bg-profile-color",attrs:{caption:""}},[t._v(t._s(t.$managerWB.user.department))])],1)],1)],1)]),a("q-btn",{attrs:{label:"Выйти",color:"negative","icon-right":"exit_to_app"},on:{click:t.$managerWB.user.logout}})],1)},ub=[],db={name:"WBManagerToolbar",data:function(){return{search:""}}},mb=db,pb=(a("d1aa"),Object(c["a"])(mb,cb,ub,!1,null,"9de3ab86",null)),fb=pb.exports;d()(pb,"components",{QToolbar:fi["a"],QBtn:b["a"],QItem:Ze["a"],QItemSection:Ke["a"],QItemLabel:Xn["a"]});var hb=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"bg-blue-grey-10 row justify-center items-center"},[a("q-form",{staticClass:"col-xs-12 col-sm-8 col-md-6 col-lg-3",on:{submit:function(e){return e.preventDefault(),t.doLogin(e)}}},[a("q-card",{staticClass:"bg-white text-black",attrs:{dark:!1}},[a("q-card-section",{staticClass:"font-size-large"},[t._v("Вход в систему")]),a("q-card-section",[a("div",{staticClass:"q-mb-md"},[a("q-input",{attrs:{label:"Логин",placeholder:"Имя пользователя или email",rules:[function(t){return!!t||"Введите логин"}],"lazy-rules":"",dark:!1,hint:"Подойдёт любой логин"},scopedSlots:t._u([{key:"before",fn:function(){return[a("q-icon",{attrs:{name:"account_box"}})]},proxy:!0}]),model:{value:t.form.login,callback:function(e){t.$set(t.form,"login","string"===typeof e?e.trim():e)},expression:"form.login"}}),a("q-input",{attrs:{type:t.isPwd?"password":"text",label:"Пароль",placeholder:"Пароль",rules:[function(t){return!!t||"Введите пароль"}],"lazy-rules":"",dark:!1,hint:"Подойдёт любой пароль"},scopedSlots:t._u([{key:"before",fn:function(){return[a("q-icon",{attrs:{name:"lock"}})]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)]),a("q-card-actions",[a("q-btn",{staticClass:"self-center bg-WB-primary text-white full-width",attrs:{type:"submit",loading:t.$managerWB.user.loading.user,label:"Войти"},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-spinner",{attrs:{size:"20px"}}),a("span",[t._v("загрузка...")])]},proxy:!0}])})],1)],1)],1)],1)},bb=[],gb={name:"WBManagerProjectLogin",data:function(){return{form:{login:"test@test.test",password:"~Test123"},isPwd:!0}},methods:{doLogin:function(){this.form.login&&this.form.password&&this.$managerWB.user.login({name:this.form.login,password:this.form.password})}}},vb=gb,_b=(a("acd2"),Object(c["a"])(vb,hb,bb,!1,null,"21fcbae0",null)),yb=_b.exports;d()(_b,"components",{QPage:Ci["a"],QForm:$i["a"],QCard:m["a"],QCardSection:p["a"],QInput:Ns["a"],QIcon:ja["a"],QCardActions:h["a"],QBtn:b["a"],QSpinner:Hs["a"],QField:Bi["a"]});var xb=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-drawer",{attrs:{mini:t.$managerWB.layout.leftDrawerMini,"content-class":"bg-WB-modal-bg-color"},on:{mouseover:t.$managerWB.layout.leftDrawerHover,mouseout:t.$managerWB.layout.leftDrawerOut},model:{value:t.$managerWB.layout.leftDrawerOpen,callback:function(e){t.$set(t.$managerWB.layout,"leftDrawerOpen",e)},expression:"$managerWB.layout.leftDrawerOpen"}},[a("q-scroll-area",{staticStyle:{height:"calc(100vh - 82px)"},attrs:{"thumb-style":t.thumbStyle,dark:!1}},[a("q-list",{staticClass:"text-WB-bg-profile-color font-size-large",attrs:{"no-border":"","inset-delimiter":"",dark:!1}},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{active:"/"===t.$managerWB.layout.route.path,"active-class":"text-WB-text-active-color",clickable:""},on:{click:function(e){return t.$managerWB.layout.changeRoute("/")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"home"}})],1),a("q-item-section",[a("q-item-label",[t._v(t._s(t.$t("menu.general.home")))])],1)],1),t.$managerWB.user.isUserHaveRoles("operatorHard")?a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{active:"/schedule"===t.$managerWB.layout.route.path,"active-class":"text-WB-text-active-color",clickable:""},on:{click:function(e){return t.$managerWB.layout.changeRoute("/schedule")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"date_range"}})],1),a("q-item-section",[a("q-item-label",[t._v(t._s(t.$t("menu.general.schedule")))])],1)],1):t._e(),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{active:"/settings"===t.$managerWB.layout.route.path,"active-class":"text-WB-text-active-color",clickable:""},on:{click:function(e){return t.$managerWB.layout.changeRoute("/settings")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"settings"}})],1),a("q-item-section",[a("q-item-label",[t._v(t._s(t.$t("menu.general.settings")))])],1)],1),t.$managerWB.layout.route.path.includes("/settings")?a("SettingsSubMenu"):t._e(),t.$managerWB.user.isUserHaveRoles("operatorHard")?a("div",{staticClass:"q-mt-xl"},[a("q-item-label",{staticClass:"text-WB-bg-profile-color",attrs:{header:""}},[t._v(t._s(t.$t("menu.employees"))+":")]),a("q-separator",{attrs:{dark:!1}}),t._l(t.$managerWB.user.employeesComp,(function(e,n){return a("q-list",{key:e.id,staticClass:"text-WB-bg-profile-color font-size-large",attrs:{bordered:"",dense:"",dark:!1}},[a("q-item",[a("q-item-section",[a("q-item-label",{staticClass:"font-size-medium"},[t._v(t._s(n+1)+". "+t._s(e.fullName))]),a("q-item-label",{staticClass:"text-WB-bg-profile-color font-size-xs",attrs:{caption:""}},[t._v(t._s(e.portfolios))])],1)],1)],1)}))],2):t._e()],1)],1)],1)},Cb=[],$b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"settings-sub-menu"},[a("q-list",{staticClass:"text-WB-bg-profile-color font-size-medium",attrs:{"no-border":"",link:"","inset-delimiter":""}},[t.$managerWB.user.isUserHaveRoles("operatorHard")?a("ListItemForSubMenu",{attrs:{properties:{subMenu:"settings",item:"mailing"}}}):t._e(),a("ListItemForSubMenu",{attrs:{properties:{subMenu:"settings",item:"loanRedistribution"}}}),a("ListItemForSubMenu",{attrs:{properties:{subMenu:"settings",item:"coefficients"}}}),a("ListItemForSubMenu",{attrs:{properties:{subMenu:"settings",item:"payments"}}})],1)],1)},Bb=[],qb=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-item-for-sub-menu"},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{active:t.$managerWB.layout.route.path==="/"+t.properties.subMenu+"/"+t.properties.item,"active-class":"text-WB-text-active-color",clickable:""},on:{click:function(e){return t.$managerWB.layout.changeRoute("/"+t.properties.subMenu+"/"+t.properties.item)}}},[a("q-item-section",{staticClass:"q-pl-xl",attrs:{avatar:""}},[t.$managerWB.layout.route.path.includes(t.properties.item)?a("q-icon",{attrs:{name:"fiber_smart_record",size:"16px"}}):a("q-icon",{attrs:{name:"fiber_manual_record",size:"16px"}})],1),a("q-item-section",[a("q-item-label",[t._v(t._s(t.$t("menu."+t.properties.subMenu+"."+t.properties.item)))])],1)],1)],1)},wb=[],Wb={name:"ListItemForSubMenu",props:{properties:{type:Object,required:!0}}},kb=Wb,Db=Object(c["a"])(kb,qb,wb,!1,null,"70d2a02c",null),Ob=Db.exports;d()(Db,"components",{QItem:Ze["a"],QItemSection:Ke["a"],QIcon:ja["a"],QItemLabel:Xn["a"]}),d()(Db,"directives",{Ripple:et["a"]});var jb={name:"SettingsSubMenu",components:{ListItemForSubMenu:Ob}},Sb=jb,Pb=Object(c["a"])(Sb,$b,Bb,!1,null,"b5455846",null),Mb=Pb.exports;d()(Pb,"components",{QList:sa["a"]});var Ab={name:"WBManagerLeftMenu",components:{SettingsSubMenu:Mb},data:function(){return{menu:[{slug:"monitoring",title:this.$t("menu.general.monitoring"),icon:"assessment"},{slug:"schedule",title:this.$t("menu.general.schedule"),icon:"date_range"},{slug:"settings",title:this.$t("menu.general.settings"),icon:"settings",children:{slug:"redistribution",title:this.$t("menu.general.schedule")}},{slug:"security",title:this.$t("menu.general.security"),icon:"security"}]}},computed:{thumbStyle:function(){return{backgroundColor:"$WB-primary-color",width:"8px",opacity:.5}}},methods:{}},Tb=Ab,Qb=a("9404"),Fb=Object(c["a"])(Tb,xb,Cb,!1,null,"2521cf8a",null),Ib=Fb.exports;d()(Fb,"components",{QDrawer:Qb["a"],QScrollArea:Fe["a"],QList:sa["a"],QItem:Ze["a"],QItemSection:Ke["a"],QIcon:ja["a"],QItemLabel:Xn["a"],QSeparator:f["a"]}),d()(Fb,"directives",{Ripple:et["a"]});var Rb=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("RatingsTable",{attrs:{tableData:t.tableData,options:t.options,excelData:t.excelData,excelCols:t.excelCols,excelRows:t.excelRows,colsPeriods:t.colsPeriods,totalSum:t.totalSum,role:"hard",filename:t.filename}})},Eb=[],Lb={columns:[{name:"name",label:"Сотрудник",field:function(t){return"".concat(t.fullName," (").concat(t.groupName,")")},sortable:!0,align:"left"},{name:"amount_0",label:"сборы",field:function(t){return t.values[0].value.amount},format:function(t){return Object(U["l"])(t)},sortable:!0,align:"center"},{name:"rating_0",label:"рейтинг",field:function(t){return t.values[0].value.rating},sortable:!0,align:"center"},{name:"amount_1",label:"сборы",field:function(t){return t.values[1].value.amount},format:function(t){return Object(U["l"])(t)},sortable:!0,align:"center"},{name:"rating_1",label:"рейтинг",field:function(t){return t.values[1].value.rating},sortable:!0,align:"center"},{name:"amount_2",label:"сборы",field:function(t){return t.values[2].value.amount},format:function(t){return Object(U["l"])(t)},sortable:!0,align:"center"},{name:"rating_2",label:"рейтинг",field:function(t){return t.values[2].value.rating},sortable:!0,align:"center"},{name:"amount_3",label:"сборы",field:function(t){return t.values[3].value.amount},format:function(t){return Object(U["l"])(t)},sortable:!0,align:"center"},{name:"rating_3",label:"рейтинг",field:function(t){return t.values[3].value.rating},sortable:!0,align:"center"},{name:"amount_4",label:"сборы",field:function(t){return t.values[4].value.amount},format:function(t){return Object(U["l"])(t)},sortable:!0,align:"center"},{name:"rating_4",label:"рейтинг",field:function(t){return t.values[4].value.rating},sortable:!0,align:"center"}],pagination:{page:1,rowsPerPage:0,sortBy:"name"}},Yb=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.role+"-ratings"},[a("q-table",{class:"my-sticky-header-table-"+t.role,attrs:{columns:t.columns,data:t.tableData,bordered:"",separator:"cell",pagination:t.pagination,diasble:t.$managerWB.user.loading.ratings,loading:t.$managerWB.user.loading.ratings,"row-key":"name",color:"WB-secondary",dark:""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header",fn:function(e){return[a("q-tr",[a("q-th",[t.excelRows.length?a("download-xlsx",{attrs:{data:t.excelData,columns:t.excelCols,filename:t.filename,sheetname:t.role+"Ratings"}},[a("q-btn",{attrs:{label:"Download Excel",color:"WB-secondary",icon:"cloud_download"}})],1):t._e()],1),t._l(t.colsPeriods,(function(e){return[a("q-th",{key:e.name,attrs:{colspan:"2"}},[a("span",[t._v(t._s(e.label))])])]}))],2),a("q-tr",t._l(e.cols,(function(n){return a("q-th",{key:n.name,attrs:{props:e}},[a("span",[t._v(t._s(n.label))])])})),1)]}},{key:"body",fn:function(e){return[a("q-tr",[t._l(e.cols,(function(e){return[a("q-td",{class:["col-"+e.name,"text-"+e.align]},[a("span",[t._v(t._s(e.value))])])]}))],2)]}},{key:"bottom",fn:function(e){return[a("table",{staticClass:"q-table bottom-row"},[a("tbody",[a("q-tr",[t._l(t.totalSum,(function(e,n){return[a("q-td",{class:["col-"+n,"text-"+("name"===n?"right":"center")]},["name"===n||n.includes("rating")?[a("strong",[t._v(t._s(e))])]:[a("strong",[t._v(t._s(t.money(e)))])]],2)]}))],2)],1)])]}}])})],1)},Hb=[],Nb=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{on:{click:t.exportExcel}},[t._t("default")],2)},zb=[],Vb=a("1146"),Gb=a.n(Vb),Ub={name:"download-xlsx",props:{columns:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},filename:{type:String,default:function(){return"excel"}},sheetname:{type:String,default:function(){return"SheetName"}}},methods:{exportExcel:function(){var t=[],e=[],a=this;if(0!==a.columns.length&&0!==a.data.length){a.columns.forEach((function(t){e.push(t.label)})),t.push(e),a.data.forEach((function(e){var n=[];a.columns.forEach((function(t){t.dataFormat&&"function"===typeof t.dataFormat?n.push(t.dataFormat(e[t.field])):n.push(e[t.field])})),t.push(n)}));var n=a.filename+".xlsx",s=a.sheetname,i=Gb.a.utils.book_new(),r=Gb.a.utils.aoa_to_sheet(t);Gb.a.utils.book_append_sheet(i,r,s),Gb.a.writeFile(i,n)}}}},Zb=Ub,Kb=Object(c["a"])(Zb,Nb,zb,!1,null,null,null),Jb=Kb.exports;function Xb(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function tg(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Xb(Object(a),!0).forEach((function(e){z()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Xb(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var eg={name:"RatingsTable",components:{DownloadXlsx:Jb},props:{tableData:{type:Array,required:!0},options:{type:Object,required:!0},excelData:{type:Array,required:!0},excelCols:{type:Array,required:!0},excelRows:{type:Array,required:!0},colsPeriods:{type:Array,required:!0},totalSum:{type:Object,required:!0},role:{type:String,required:!0},filename:{type:String,required:!0}},data:function(){return tg(tg({},this.options),{},{money:U["l"]})}},ag=eg,ng=a("357e"),sg=Object(c["a"])(ag,Yb,Hb,!1,null,null,null),ig=sg.exports;d()(sg,"components",{QTable:Zr["a"],QTr:Er["a"],QTh:ng["a"],QBtn:b["a"],QTd:Kr["a"]});var rg={name:"HardRatings",components:{RatingsTable:ig},data:function(){return{options:Lb}},created:function(){this.$managerWB.user.isUserHaveRoles("operatorHard")&&this.$managerWB.user.getEmployees(),this.$managerWB.user.getGroupsForSuper(),this.tableData.length||this.$managerWB.user.getRatings()},computed:{tableData:function(){var t=this.$managerWB.user.ratings&&this.$managerWB.user.ratings.groups||[];if(!t)return[];var e=t.map((function(t){var e=Object.keys(t.indicators.monthly).map((function(e){return{period:e,label:Object(hs["c"])(e,"MMMM"),value:t.indicators.monthly[e]}}));e.length>3&&e.splice(0,e.length-3);var a=Object.keys(t.indicators.daily).map((function(e){return{period:e,label:Object(hs["c"])(e,"DD.MM.YYYY"),value:t.indicators.daily[e]}}));return{fullName:t.employeeFullName,groupName:t.name,groupId:t.id,values:e.concat(a)}}));return Object(zi["orderBy"])(e,["fullName"],["asc"])},filename:function(){return"hardRatings_".concat(Object(hs["c"])(Date.now(),"YYYY-MM-DD_HH-mm-ssZZ"),"_").concat(Date.now())},colsPeriods:function(){return this.tableData.length?this.tableData[0].values.map((function(t){return{name:t.period,label:t.label}})):["Первый","Второй","Третий","Вчера","Сегодня"].map((function(t){return{label:t}}))},excelRows:function(){return this.tableData.length?this.tableData.map((function(t){var e={};return e.name="".concat(t.fullName," (").concat(t.groupName,")"),t.values.forEach((function(t,a){e["amount_"+a]=Number(t.value.amount).toFixed(2),e["rating_"+a]=Number(t.value.rating).toFixed(2)})),e})):[]},totalSum:function(){if(!this.excelRows.length)return{};var t=this.excelRows,e=Object.keys(t[0]);e.splice(e.indexOf("name"),1);var a=t.reduce((function(t,a){return e.forEach((function(e){void 0===t[e]&&(t[e]=0),e.includes("rating")&&(t[e]=""),e.includes("amount")&&(t[e]+=1*a[e].replace(",","."))})),t}),{name:"Сумма:"});return Object.keys(a).forEach((function(t){t.includes("amount")&&"number"===typeof a[t]&&(a[t]=a[t].toFixed(2))})),a},excelData:function(){var t=jt()(this.excelRows);return t.push(this.totalSum),t},excelCols:function(){if(!this.tableData.length)return[];var t=[];return t.push({label:"Сотрудник",field:"name"}),this.tableData[0].values.forEach((function(e,a){t.push({label:e.label+" / сборы ",field:"amount_"+a,dataFormat:function(t){return parseFloat(t)}}),t.push({label:e.label+" / рейтинг ",field:"rating_"+a,dataFormat:function(t){return t?Math.round(t):""}})})),t}}},og=rg,lg=Object(c["a"])(og,Rb,Eb,!1,null,null,null),cg=lg.exports,ug=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schedule__block"},[a("ScheduleToolbar"),a("ScheduleHeader"),a("ScheduleMain"),a("ScheduleFooter"),a("HoursAndNoteDialog"),a("AutoFillDialog"),a("DeleteEmployeeDialog"),a("AddEmployeeDialog")],1)},dg=[],mg=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schedule__header border-bottom"},[a("div",{staticClass:"row justify-between items-center"},[a("div",{staticClass:"col-xs-12 col-sm-6 col-lg-4 row justify-around items-center q-pa-xs"},[a("ChooseMonth"),a("TodaysDate")],1),a("div",{staticClass:"col-xs-12 col-sm-6 col-lg-8 flex justify-end items-center q-pa-xs"},[a("Helper")],1)])])},pg=[],fg=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schedule__choose-month"},[a("div",{staticClass:"row justify-between items-center"},[a("q-btn",{staticClass:"q-ma-none",attrs:{icon:"chevron_left",dense:"",flat:"",round:""},on:{click:t.subtractMonth}}),a("div",{staticClass:"flex justify-center items-center text-center"},[a("div",{staticClass:"q-mx-md font-size-large max-w-200px cursor-pointer"},[a("span",[t._v(t._s(t.$managerWB.schedule.monthAndYear))]),a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{value:t.$managerWB.schedule.changingMoment.format("YYYY/MM/DD"),color:"WB-modal-bg-color",dark:!1},on:{input:function(e){return t.editedByDatePicker(e)}}})],1)],1)]),a("q-btn",{staticClass:"q-ma-none",attrs:{icon:"chevron_right",dense:"",flat:"",round:""},on:{click:t.addMonth}})],1)])},hg=[],bg={name:"ChooseMonth",data:function(){return{}},created:function(){},computed:{},methods:{addMonth:function(){this.$managerWB.schedule.monthsForChange++,this.$managerWB.schedule.changeMonth(!0)},subtractMonth:function(){this.$managerWB.schedule.monthsForChange--,this.$managerWB.schedule.changeMonth(!1)},editedByDatePicker:function(t){this.$refs.qDateProxy.hide(),this.$managerWB.schedule.changingMoment=yu()(t,"YYYY/MM/DD").startOf("month")}}},gg=bg,vg=(a("95ff"),Object(c["a"])(gg,fg,hg,!1,null,"f851c73c",null)),_g=vg.exports;d()(vg,"components",{QBtn:b["a"],QPopupProxy:qr["a"],QDate:wr["a"]});var yg=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schedule__todays-date"},[a("div",{staticClass:"text-WB-schedule-green font-size-large text-center"},[a("span",[t._v(t._s(t.$managerWB.schedule.todayDateForHeader))])]),a("div",{staticClass:"text-WB-schedule-green font-size-large text-center"},[a("span",[t._v(t._s(t.$managerWB.schedule.dayOfWeek))])])])},xg=[],Cg={name:"TodaysDate",data:function(){return{}},created:function(){},computed:{},methods:{}},$g=Cg,Bg=Object(c["a"])($g,yg,xg,!1,null,"0cb92da2",null),qg=Bg.exports,wg=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schedule__helper font-size-medium"},[a("div",{staticClass:"row justify-end items-center"},[a("div",{staticClass:"flex justify-center items-center"},[a("div",{staticClass:"q-mx-sm q-my-xs row"},[a("BtnPlannedWorkday",{staticClass:"q-mr-xs",attrs:{cursorInherit:!0}}),a("span",[t._v("- "+t._s(t.$t("schedule.tips.plannedWorkday")))])],1),a("div",{staticClass:"q-mx-sm q-my-xs row"},[a("BtnPlannedDayOff",{staticClass:"q-mr-xs",attrs:{cursorInherit:!0}}),a("span",[t._v("- "+t._s(t.$t("schedule.tips.plannedDayOff")))])],1),a("div",{staticClass:"q-mx-sm q-my-xs row"},[a("BtnPresence",{staticClass:"q-mr-xs",attrs:{cursorInherit:!0}}),a("span",[t._v("- "+t._s(t.$t("schedule.tips.presence")))])],1),a("div",{staticClass:"q-mx-sm q-my-xs row"},[a("BtnVacation",{staticClass:"q-mr-xs",attrs:{cursorInherit:!0}}),a("span",[t._v("- "+t._s(t.$t("schedule.tips.vacation")))])],1),a("div",{staticClass:"q-mx-sm q-my-xs row"},[a("BtnSickLeave",{staticClass:"q-mr-xs",attrs:{cursorInherit:!0}}),a("span",[t._v("- "+t._s(t.$t("schedule.tips.sickLeave")))])],1)]),a("div",{staticClass:"flex justify-center items-center"},[a("div",{staticClass:"q-mx-sm q-my-xs row"},[a("BtnUnpaidLeave",{staticClass:"q-mr-xs",attrs:{cursorInherit:!0}}),a("span",[t._v("- "+t._s(t.$t("schedule.tips.unpaidLeave")))])],1),a("div",{staticClass:"q-mx-sm q-my-xs row"},[a("BtnTruancy",{staticClass:"q-mr-xs",attrs:{cursorInherit:!0}}),a("span",[t._v("- "+t._s(t.$t("schedule.tips.truancy")))])],1),a("div",{staticClass:"q-mx-sm q-my-xs row"},[a("BtnRescheduledShift",{staticClass:"q-mr-xs",attrs:{cursorInherit:!0}}),a("span",[t._v("- "+t._s(t.$t("schedule.tips.rescheduledShift")))])],1),a("div",{staticClass:"q-mx-sm q-my-xs row"},[a("BtnWithoutStatus",{staticClass:"q-mr-xs",attrs:{cursorInherit:!0}}),a("span",[t._v("- "+t._s(t.$t("schedule.tips.withoutStatus")))])],1)])])])},Wg=[],kg=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-planned-workday flex justify-center items-center"},[a("q-btn",{staticClass:"btn-for-schedule q-pa-none",class:t.cursorInherit?"cursor-inherit":"",attrs:{size:"xs",color:"WB-vkontakte-color",ripple:!t.cursorInherit}},[a("span",{staticClass:"font-size-small"},[t._v("Р")])])],1)},Dg=[],Og={name:"BtnPlannedWorkday",props:{cursorInherit:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},computed:{},methods:{}},jg=Og,Sg=Object(c["a"])(jg,kg,Dg,!1,null,"7fa3e4e4",null),Pg=Sg.exports;d()(Sg,"components",{QBtn:b["a"]});var Mg=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-planned-dayoff flex justify-center items-center"},[a("q-btn",{staticClass:"btn-for-schedule q-pa-none",class:t.cursorInherit?"cursor-inherit":"",attrs:{size:"xs",outline:"",color:"WB-disabled-color",ripple:!t.cursorInherit}},[a("span",{staticClass:"font-size-small"},[t._v("В")])])],1)},Ag=[],Tg={name:"BtnPlannedDayOff",props:{cursorInherit:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},computed:{},methods:{}},Qg=Tg,Fg=Object(c["a"])(Qg,Mg,Ag,!1,null,"09c84cec",null),Ig=Fg.exports;d()(Fg,"components",{QBtn:b["a"]});var Rg=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-vacation flex justify-center items-center"},[a("q-btn",{staticClass:"btn-for-schedule q-pa-none",class:t.cursorInherit?"cursor-inherit":"",attrs:{size:"xs",color:"WB-bg-profile-color",ripple:!t.cursorInherit}},[a("span",{staticClass:"font-size-small text-WB-bg-color"},[t._v("ОТ")])])],1)},Eg=[],Lg={name:"BtnVacation",props:{cursorInherit:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},computed:{},methods:{}},Yg=Lg,Hg=Object(c["a"])(Yg,Rg,Eg,!1,null,"554fd8b8",null),Ng=Hg.exports;d()(Hg,"components",{QBtn:b["a"]});var zg=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-unpaid-leave flex justify-center items-center"},[a("q-btn",{staticClass:"btn-for-schedule q-pa-none",class:t.cursorInherit?"cursor-inherit":"",attrs:{size:"xs",color:"warning",ripple:!t.cursorInherit}},[a("span",{staticClass:"font-size-small text-WB-bg-color"},[t._v("ДО")])])],1)},Vg=[],Gg={name:"BtnUnpaidLeave",props:{cursorInherit:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},computed:{},methods:{}},Ug=Gg,Zg=Object(c["a"])(Ug,zg,Vg,!1,null,"08f91cb6",null),Kg=Zg.exports;d()(Zg,"components",{QBtn:b["a"]});var Jg=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-sick-leave flex justify-center items-center"},[a("q-btn",{staticClass:"btn-for-schedule q-pa-none",class:t.cursorInherit?"cursor-inherit":"",attrs:{size:"xs",color:"WB-bg-color",ripple:!t.cursorInherit,glossy:""}},[a("span",{staticClass:"font-size-small"},[t._v("Б")])])],1)},Xg=[],tv={name:"BtnSickLeave",props:{cursorInherit:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},computed:{},methods:{}},ev=tv,av=Object(c["a"])(ev,Jg,Xg,!1,null,"a23cf96e",null),nv=av.exports;d()(av,"components",{QBtn:b["a"]});var sv=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-truancy flex justify-center items-center"},[a("q-btn",{staticClass:"btn-for-schedule q-pa-none",class:t.cursorInherit?"cursor-inherit":"",attrs:{size:"xs",color:"negative",ripple:!t.cursorInherit}},[a("span",{staticClass:"font-size-small"},[t._v("ПР")])])],1)},iv=[],rv={name:"BtnTruancy",props:{cursorInherit:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},computed:{},methods:{}},ov=rv,lv=Object(c["a"])(ov,sv,iv,!1,null,"795b36b1",null),cv=lv.exports;d()(lv,"components",{QBtn:b["a"]});var uv=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-rescheduled-shift flex justify-center items-center"},[a("q-btn",{staticClass:"btn-for-schedule q-pa-none",class:t.cursorInherit?"cursor-inherit":"",attrs:{size:"xs",color:"WB-warning-color",ripple:!t.cursorInherit}},[a("span",{staticClass:"font-size-small"},[t._v("ПС")])])],1)},dv=[],mv={name:"BtnRescheduledShift",props:{cursorInherit:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},computed:{},methods:{}},pv=mv,fv=Object(c["a"])(pv,uv,dv,!1,null,"3e91ad4c",null),hv=fv.exports;d()(fv,"components",{QBtn:b["a"]});var bv=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-presence flex justify-center items-center"},[a("q-btn",{staticClass:"btn-for-schedule q-pa-none",class:t.cursorInherit?"cursor-inherit":"",attrs:{size:"xs",color:"positive",ripple:!t.cursorInherit}},[a("span",{staticClass:"font-size-small"},[t._v("Я")])])],1)},gv=[],vv={name:"BtnPresence",props:{cursorInherit:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},computed:{},methods:{}},_v=vv,yv=Object(c["a"])(_v,bv,gv,!1,null,"73ae3168",null),xv=yv.exports;d()(yv,"components",{QBtn:b["a"]});var Cv=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-without-status flex justify-center items-center"},[a("q-btn",{staticClass:"btn-for-schedule q-pa-none",class:t.cursorInherit?"cursor-inherit":"",attrs:{size:"xs",color:"WB-instagram-color",ripple:!t.cursorInherit}},[a("span",{staticClass:"font-size-small"},[t._v("БС")])])],1)},$v=[],Bv={name:"BtnWithoutStatus",props:{cursorInherit:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},computed:{},methods:{}},qv=Bv,wv=Object(c["a"])(qv,Cv,$v,!1,null,"512e95a6",null),Wv=wv.exports;d()(wv,"components",{QBtn:b["a"]});var kv={name:"Helper",components:{BtnWithoutStatus:Wv,BtnPresence:xv,BtnRescheduledShift:hv,BtnTruancy:cv,BtnSickLeave:nv,BtnUnpaidLeave:Kg,BtnVacation:Ng,BtnPlannedDayOff:Ig,BtnPlannedWorkday:Pg},data:function(){return{}},created:function(){},computed:{},methods:{}},Dv=kv,Ov=Object(c["a"])(Dv,wg,Wg,!1,null,"73d624d0",null),jv=Ov.exports,Sv={name:"ScheduleHeader",components:{Helper:jv,TodaysDate:qg,ChooseMonth:_g},data:function(){return{}},created:function(){},computed:{},methods:{}},Pv=Sv,Mv=Object(c["a"])(Pv,mg,pg,!1,null,"6b80ff0d",null),Av=Mv.exports,Tv=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schedule__main"},[a("ScheduleTable",{staticClass:"q-ma-xs"})],1)},Qv=[],Fv=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schedule__table"},[a("q-table",{attrs:{data:t.$managerWB.schedule.tableData,columns:t.columns,loading:t.$managerWB.schedule.loading,pagination:t.pagination,separator:"cell","row-key":"name",dense:"",dark:"",color:"WB-secondary"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header",fn:function(e){return[a("q-tr",[t._l(e.cols,(function(n,s){return[a("q-th",{key:n.name,staticClass:"text-center q-px-md",class:t.classOfTh(n),attrs:{props:e}},[n.name.includes("day")?[a("div",{staticClass:"font-size-sm line-height-100",class:"сб"===n.label[1]||"вс"===n.label[1]?"text-red":""},[a("div",{staticClass:"q-px-xs"},[t._v(t._s(n.label[0]))]),a("div",{staticClass:"q-px-xs"},[t._v(t._s(n.label[1]))])])]:[a("span",[t._v(t._s(n.label))])]],2)]}))],2)]}},{key:"body",fn:function(e){return[a("q-tr",[t._l(e.cols,(function(n,s){return[a("q-td",{key:n.name,class:t.classOfTd(n.value),attrs:{props:e}},[n.hasOwnProperty("value")?[n.name.includes("day")?[a("div",{staticClass:"flex justify-center items-center"},[a("ButtonForSchedule",{attrs:{properties:{__index:e.row.__index,index:s-2,col:n}}})],1)]:"totalShifts"===n.name?[a("span",[t._v(t._s(t.$managerWB.schedule.totalShifts(n.value)))])]:"totalHours"===n.name?[a("span",[t._v(t._s(t.$managerWB.schedule.totalHours(n.value)))])]:[a("span",[t._v(t._s(n.value))])]]:t._e()],2)]}))],2)]}}])})],1)},Iv=[],Rv=a("7037"),Ev=a.n(Rv),Lv=a("4221"),Yv=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"button-for-schedule flex justify-center items-center",on:{mouseover:function(e){t.exist=!0}}},[t.isStatusEqualsString(t.properties.__index,t.properties.index,"plannedWorkday")?[a("BtnPlannedWorkday"),t.exist?a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[0,0]}},[t.$managerWB.schedule.schedulesData[t.properties.__index].schedule[t.properties.index].hours?a("div",{staticClass:"font-size-sm text-center"},[a("span",[t._v(t._s(t.$t("schedule.tooltips.hours"))+": "+t._s(t.$managerWB.schedule.schedulesData[t.properties.__index].schedule[t.properties.index].hours))])]):t._e(),t.$managerWB.schedule.schedulesData[t.properties.__index].schedule[t.properties.index].note?a("div",{staticClass:"font-size-sm text-center"},[a("span",[t._v(t._s(t.$t("schedule.tooltips.note"))+": "+t._s(t.$managerWB.schedule.schedulesData[t.properties.__index].schedule[t.properties.index].note))])]):t._e()]):t._e()]:t.isStatusEqualsString(t.properties.__index,t.properties.index,"plannedDayOff")?[a("BtnPlannedDayOff")]:t.isStatusEqualsString(t.properties.__index,t.properties.index,"vacation")?[a("BtnVacation")]:t.isStatusEqualsString(t.properties.__index,t.properties.index,"unpaidLeave")?[a("BtnUnpaidLeave")]:t.isStatusEqualsString(t.properties.__index,t.properties.index,"sickLeave")?[a("BtnSickLeave")]:t.isStatusEqualsString(t.properties.__index,t.properties.index,"truancy")?[a("BtnTruancy")]:t.isStatusEqualsString(t.properties.__index,t.properties.index,"rescheduledShift")?[a("BtnRescheduledShift")]:t.isStatusEqualsString(t.properties.__index,t.properties.index,"presence")?[a("BtnPresence"),a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[0,0]}},[t.$managerWB.schedule.schedulesData[t.properties.__index].schedule[t.properties.index].hours?a("div",{staticClass:"font-size-sm text-center"},[a("span",[t._v(t._s(t.$t("schedule.tooltips.hours"))+": "+t._s(t.$managerWB.schedule.schedulesData[t.properties.__index].schedule[t.properties.index].hours))])]):t._e(),t.$managerWB.schedule.schedulesData[t.properties.__index].schedule[t.properties.index].note?a("div",{staticClass:"font-size-sm text-center"},[a("span",[t._v(t._s(t.$t("schedule.tooltips.note"))+": "+t._s(t.$managerWB.schedule.schedulesData[t.properties.__index].schedule[t.properties.index].note))])]):t._e()])]:[a("BtnWithoutStatus")],[t.exist?a("PopupList",{attrs:{properties:t.properties}}):t._e()]],2)},Hv=[],Nv=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-popup-proxy",{staticClass:"popup-list",attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:t.popupValue,callback:function(e){t.popupValue=e},expression:"popupValue"}},[a("q-list",{staticClass:"bg-WB-bg-color text-WB-bg-profile-color popup-list",attrs:{dense:""}},[a("PopupItem",{attrs:{properties:t.properties,string:"plannedWorkday"}}),a("PopupItem",{attrs:{properties:t.properties,string:"plannedDayOff"}}),a("PopupItem",{attrs:{properties:t.properties,string:"presence"}}),a("PopupItem",{attrs:{properties:t.properties,string:"vacation"}}),a("PopupItem",{attrs:{properties:t.properties,string:"sickLeave"}}),a("PopupItem",{attrs:{properties:t.properties,string:"unpaidLeave"}}),a("PopupItem",{attrs:{properties:t.properties,string:"truancy"}}),a("PopupItem",{attrs:{properties:t.properties,string:"rescheduledShift"}}),a("PopupItem",{attrs:{properties:t.properties,string:"withoutStatus"}}),a("PopupItem",{attrs:{properties:t.properties,string:"changeHoursAndNote"}})],1)],1)},zv=[],Vv=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"popup-item font-size-medium"},["changeHoursAndNote"!==t.string?[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{active:t.isActiveItem(t.properties.__index,t.properties.index,t.string),clickable:"","active-class":"text-WB-text-active-color bg-WB-bg-active-color",dense:""},on:{click:function(e){return t.whatDoOnClick(t.properties.__index,t.properties.index,t.string)}}},[a("q-item-section",{attrs:{avatar:""}},["plannedWorkday"===t.string?[a("BtnPlannedWorkday")]:"plannedDayOff"===t.string?[a("BtnPlannedDayOff")]:"vacation"===t.string?[a("BtnVacation")]:"unpaidLeave"===t.string?[a("BtnUnpaidLeave")]:"sickLeave"===t.string?[a("BtnSickLeave")]:"truancy"===t.string?[a("BtnTruancy")]:"rescheduledShift"===t.string?[a("BtnRescheduledShift")]:"presence"===t.string?[a("BtnPresence")]:"withoutStatus"===t.string?[a("BtnWithoutStatus")]:"changeHoursAndNote"===t.string?[a("q-icon",{attrs:{name:"edit"}})]:t._e()],2),a("q-item-section",[a("q-item-label",[t._v(t._s(t.$t("schedule.tips."+t.string)))])],1)],1)]:[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:"plannedWorkday"!==t.properties.col.value.status&&"presence"!==t.properties.col.value.status,clickable:"plannedWorkday"===t.properties.col.value.status||"presence"===t.properties.col.value.status,dense:""},on:{click:function(e){return t.whatDoOnClick(t.properties.__index,t.properties.index,t.string)}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"edit"}})],1),a("q-item-section",[a("q-item-label",[t._v(t._s(t.$t("schedule.tips."+t.string)))])],1)],1)]],2)},Gv=[],Uv={name:"PopupItem",components:{BtnWithoutStatus:Wv,BtnPresence:xv,BtnRescheduledShift:hv,BtnTruancy:cv,BtnSickLeave:nv,BtnUnpaidLeave:Kg,BtnVacation:Ng,BtnPlannedDayOff:Ig,BtnPlannedWorkday:Pg},data:function(){return{}},props:{properties:{type:Object,required:!0},string:{type:String,required:!0}},created:function(){},computed:{},methods:{whatDoOnClick:function(t,e,a){"changeHoursAndNote"===a?(this.$managerWB.schedule.schedulesData[t].schedule[e].hasOwnProperty("hours")||Object.assign(this.$managerWB.schedule.schedulesData[t].schedule[e],{hours:11}),this.$managerWB.schedule.schedulesData[t].schedule[e].hasOwnProperty("note")||Object.assign(this.$managerWB.schedule.schedulesData[t].schedule[e],{note:""}),this.$managerWB.schedule.currentIndexOfChangingDay=e,this.$managerWB.schedule.modalObj=this.$managerWB.schedule.schedulesData[t],this.$managerWB.layout.schedule.hoursAndNoteModal=!0):this.changeTypeOfDay(t,e,a)},changeTypeOfDay:function(t,e,a){var n=this,s=this.$managerWB.schedule.schedulesForChanges.findIndex((function(e){return e.employeeId===n.$managerWB.schedule.schedulesData[t].employee.id}));switch(a){case"plannedWorkday":this.editObjInSchedulesData(t,e,"plannedWorkday",11,"");break;case"plannedDayOff":this.editObjInSchedulesData(t,e,"plannedDayOff");break;case"vacation":this.editObjInSchedulesData(t,e,"vacation");break;case"unpaidLeave":this.editObjInSchedulesData(t,e,"unpaidLeave");break;case"sickLeave":this.editObjInSchedulesData(t,e,"sickLeave");break;case"truancy":this.editObjInSchedulesData(t,e,"truancy");break;case"rescheduledShift":this.editObjInSchedulesData(t,e,"rescheduledShift");break;case"presence":this.editObjInSchedulesData(t,e,"presence",11,"");break;case"withoutStatus":this.editObjInSchedulesData(t,e,null);break;default:this.editObjInSchedulesData(t,e,null)}this.$managerWB.schedule.refresh(),-1===s&&this.addObjToSchedulesForTemplate(this.$managerWB.schedule.schedulesData[t].employee.id,this.$managerWB.schedule.schedulesData[t].schedule)},editObjInSchedulesData:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object.assign(this.$managerWB.schedule.schedulesData[t].schedule[e],{status:a,hours:n,note:s})},addObjToSchedulesForTemplate:function(t,e){this.$managerWB.schedule.schedulesForSend.push(Object.assign({},{type:"TwoOverTwo",employeeId:t,schedule:e}))},isActiveItem:function(t,e,a){return t<this.$managerWB.schedule.schedulesData.length&&(!!(this.$managerWB.schedule.schedulesData[t].hasOwnProperty("schedule")&&e<this.$managerWB.schedule.schedulesData[t].schedule.length)&&("withoutStatus"===a?!this.$managerWB.schedule.schedulesData[t].schedule[e].hasOwnProperty("status")||null===this.$managerWB.schedule.schedulesData[t].schedule[e].status:this.$managerWB.schedule.schedulesData[t].schedule[e].hasOwnProperty("status")&&this.$managerWB.schedule.schedulesData[t].schedule[e].status===a))}},watch:{}},Zv=Uv,Kv=Object(c["a"])(Zv,Vv,Gv,!1,null,"3dd2cab2",null),Jv=Kv.exports;d()(Kv,"components",{QItem:Ze["a"],QItemSection:Ke["a"],QIcon:ja["a"],QItemLabel:Xn["a"]}),d()(Kv,"directives",{Ripple:et["a"],ClosePopup:Bn["a"]});var Xv={name:"PopupList",components:{PopupItem:Jv,BtnWithoutStatus:Wv,BtnPresence:xv,BtnRescheduledShift:hv,BtnTruancy:cv,BtnSickLeave:nv,BtnUnpaidLeave:Kg,BtnVacation:Ng,BtnPlannedDayOff:Ig,BtnPlannedWorkday:Pg},data:function(){return{popupValue:!1}},props:{properties:{type:Object,required:!0}},created:function(){},computed:{},methods:{},watch:{}},t_=Xv,e_=Object(c["a"])(t_,Nv,zv,!1,null,"68bfa7b7",null),a_=e_.exports;d()(e_,"components",{QPopupProxy:qr["a"],QList:sa["a"]});var n_={name:"ButtonForSchedule",components:{PopupList:a_,BtnWithoutStatus:Wv,BtnPresence:xv,BtnRescheduledShift:hv,BtnTruancy:cv,BtnSickLeave:nv,BtnUnpaidLeave:Kg,BtnVacation:Ng,BtnPlannedDayOff:Ig,BtnPlannedWorkday:Pg},data:function(){return{exist:!1}},props:{properties:{type:Object,required:!0}},created:function(){},computed:{},methods:{isStatusEqualsString:function(t,e,a){return t<this.$managerWB.schedule.schedulesData.length&&(!!(this.$managerWB.schedule.schedulesData[t].hasOwnProperty("schedule")&&e<this.$managerWB.schedule.schedulesData[t].schedule.length)&&(this.$managerWB.schedule.schedulesData[t].schedule[e].hasOwnProperty("status")&&this.$managerWB.schedule.schedulesData[t].schedule[e].status===a))}}},s_=n_,i_=Object(c["a"])(s_,Yv,Hv,!1,null,"30cf1338",null),r_=i_.exports;d()(i_,"components",{QTooltip:$n["a"]});var o_={name:"ScheduleTable",components:{ButtonForSchedule:r_},data:function(){return{columnsForTable:[],columnsDefault:Lv["a"],pagination:{sortBy:"employee",descending:!1,page:1,rowsPerPage:10}}},created:function(){},computed:{columns:function(){return this.$managerWB.schedule.columns}},methods:{classOfTd:function(t){return"object"===Ev()(t)&&null!==t&&t.hasOwnProperty("date")&&t.date===this.$managerWB.schedule.todayDateDashedFormat?"today-column":""},classOfTh:function(t){return(this.$managerWB.schedule.currentTimesheetObj.hasOwnProperty("period")||this.$managerWB.schedule.currentTimesheetObj.hasOwnProperty("timesheet"))&&this.$managerWB.schedule.firstDayOfChangingMonthString===this.$managerWB.schedule.startOfCurrentMonthDashedFormat&&"string"!==typeof t.label&&"number"!==typeof t.label&&null!==t.label&&t.label[0]===Number(this.$managerWB.schedule.todayDateDashedFormat[8]+this.$managerWB.schedule.todayDateDashedFormat[9])?"today-header-column":""}}},l_=o_,c_=(a("0df1"),Object(c["a"])(l_,Fv,Iv,!1,null,"49346492",null)),u_=c_.exports;d()(c_,"components",{QTable:Zr["a"],QTr:Er["a"],QTh:ng["a"],QTd:Kr["a"]});var d_={name:"ScheduleMain",components:{ScheduleTable:u_},data:function(){return{}},created:function(){},computed:{},methods:{}},m_=d_,p_=Object(c["a"])(m_,Tv,Qv,!1,null,"45773397",null),f_=p_.exports,h_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{staticClass:"hours-and-note-dialog",attrs:{persistent:""},model:{value:t.$managerWB.layout.schedule.hoursAndNoteModal,callback:function(e){t.$set(t.$managerWB.layout.schedule,"hoursAndNoteModal",e)},expression:"$managerWB.layout.schedule.hoursAndNoteModal"}},[a("q-card",{staticClass:"row justify-center items-center max-w-300px bg-WB-modal-bg-color text-WB-text-profile-color"},[a("q-card-section",{staticClass:"col-12 flex justify-center items-center"},[a("span",{staticClass:"font-size-normal"},[t._v(t._s(t.$t("schedule.tooltips.hours")))])]),a("q-card-section",{staticClass:"col-12 flex justify-center items-center"},[a("q-input",{staticClass:"q-mx-xs max-w-100px",attrs:{dense:"",outlined:"",color:"WB-secondary",type:"number","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary text-WB-secondary"},model:{value:t.$managerWB.schedule.modalObj&&t.$managerWB.schedule.modalObj.schedule&&t.$managerWB.schedule.modalObj.schedule.length>0&&t.$managerWB.schedule.modalObj.schedule[t.$managerWB.schedule.currentIndexOfChangingDay].hours,callback:function(e){t.$set(t.$managerWB.schedule.modalObj&&t.$managerWB.schedule.modalObj.schedule&&t.$managerWB.schedule.modalObj.schedule.length>0&&t.$managerWB.schedule.modalObj.schedule[t.$managerWB.schedule.currentIndexOfChangingDay],"hours",t._n(e))},expression:"$managerWB.schedule.modalObj && $managerWB.schedule.modalObj.schedule && $managerWB.schedule.modalObj.schedule.length > 0 && $managerWB.schedule.modalObj.schedule[$managerWB.schedule.currentIndexOfChangingDay].hours"}})],1),a("q-card-section",{staticClass:"col-12 flex justify-center items-center"},[a("span",{staticClass:"font-size-normal"},[t._v(t._s(t.$t("schedule.tooltips.note")))])]),a("q-card-section",{staticClass:"col-12 flex justify-center items-center"},[a("q-input",{staticClass:"q-mx-xs max-w-200px",attrs:{dense:"",outlined:"",color:"WB-secondary",type:"text","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary text-WB-secondary"},model:{value:t.$managerWB.schedule.modalObj&&t.$managerWB.schedule.modalObj.schedule&&t.$managerWB.schedule.modalObj.schedule.length>0&&t.$managerWB.schedule.modalObj.schedule[t.$managerWB.schedule.currentIndexOfChangingDay].note,callback:function(e){t.$set(t.$managerWB.schedule.modalObj&&t.$managerWB.schedule.modalObj.schedule&&t.$managerWB.schedule.modalObj.schedule.length>0&&t.$managerWB.schedule.modalObj.schedule[t.$managerWB.schedule.currentIndexOfChangingDay],"note",e)},expression:"$managerWB.schedule.modalObj && $managerWB.schedule.modalObj.schedule && $managerWB.schedule.modalObj.schedule.length > 0 && $managerWB.schedule.modalObj.schedule[$managerWB.schedule.currentIndexOfChangingDay].note"}})],1),a("q-card-actions",{staticClass:"col-12 flex justify-center items-center text-WB-primary",attrs:{align:"center"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"WB-secondary",label:"OK"},on:{click:t.addHoursAndNoteChanges}})],1)],1)],1)},b_=[],g_={name:"HoursAndNoteDialog",data:function(){return{}},created:function(){},computed:{},methods:{addHoursAndNoteChanges:function(){var t=this,e=this.$managerWB.schedule.schedulesForChanges.findIndex((function(e){return e.employeeId===t.$managerWB.schedule.modalObj.employee.id}));-1===e&&this.$managerWB.schedule.schedulesForSend.push(Object.assign({},{type:"TwoOverTwo",employeeId:this.$managerWB.schedule.modalObj.employee.id,schedule:this.$managerWB.schedule.modalObj.schedule})),this.$managerWB.schedule.refresh()}}},v_=g_,__=Object(c["a"])(v_,h_,b_,!1,null,"e256e500",null),y_=__.exports;d()(__,"components",{QDialog:$t["a"],QCard:m["a"],QCardSection:p["a"],QInput:Ns["a"],QCardActions:h["a"],QBtn:b["a"]}),d()(__,"directives",{ClosePopup:Bn["a"]});var x_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{staticClass:"auto-fill-dialog",attrs:{persistent:""},model:{value:t.$managerWB.layout.schedule.autoFillGraphicsModal,callback:function(e){t.$set(t.$managerWB.layout.schedule,"autoFillGraphicsModal",e)},expression:"$managerWB.layout.schedule.autoFillGraphicsModal"}},[a("q-card",{staticClass:"row justify-center items-center bg-WB-modal-bg-color text-WB-text-profile-color"},[a("q-card-section",{staticClass:"col-12 flex justify-start items-center text-justify font-size-normal"},[a("span",[t._v("Чтобы автозаполнить пустой табель, нужно проставить по одному первому запланированному рабочему дню (Р) для каждого сотрудика. ")]),a("br"),a("span",[t._v("Оставшиеся дни для сотрудника должны быть без статуса (БС). ")]),a("br"),a("span",[t._v("Для тех сотрудников, чьи первые дни графика автозаполнились при создании на основании данных с прошлого месяца, проставлять первый запланированный рабочий день не требуется.")]),a("br"),a("br"),a("div",{staticClass:"flex justify-center full-width"},[a("div",{staticClass:"text-negative"},[a("strong",[t._v("ВНИМАНИЕ! ЭТА ОПЕРАЦИЯ ОТМЕНИТ ВСЕ ИЗМЕНЕНИЯ, СДЕЛАННЫЕ РАНЕЕ!!!")])])])]),a("q-card-actions",{staticClass:"col-12 flex justify-end items-center text-WB-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"WB-secondary",label:t.$t("schedule.labels.noDoNotFill"),flat:""}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"WB-secondary",label:t.$t("schedule.labels.yesFill")},on:{click:function(e){return t.$managerWB.schedule.autoFillGraphics({id:t.$managerWB.schedule.idOfThisMonthTimesheet,schedules:t.$managerWB.schedule.schedulesForChanges})}}})],1)],1)],1)},C_=[],$_={name:"AutoFillDialog",data:function(){return{}},created:function(){},computed:{},methods:{}},B_=$_,q_=Object(c["a"])(B_,x_,C_,!1,null,"b51ed39e",null),w_=q_.exports;d()(q_,"components",{QDialog:$t["a"],QCard:m["a"],QCardSection:p["a"],QCardActions:h["a"],QBtn:b["a"]}),d()(q_,"directives",{ClosePopup:Bn["a"]});var W_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{staticClass:"delete-employee-dialog",model:{value:t.$managerWB.layout.schedule.employeeModal.delete,callback:function(e){t.$set(t.$managerWB.layout.schedule.employeeModal,"delete",e)},expression:"$managerWB.layout.schedule.employeeModal.delete"}},[a("q-card",{staticClass:"employee-dialog__card row justify-center items-center max-w-300px bg-WB-modal-bg-color text-WB-text-profile-color"},[a("q-card-section",{staticClass:"col-12 flex justify-center items-center"},[a("span",{staticClass:"font-size-normal"},[t._v(t._s(t.$t("schedule.dialogs.chooseEmployee")))])]),a("q-card-section",{staticClass:"col-12 flex justify-center items-center"},[a("q-select",{staticClass:"max-h-100px min-w-200px full-width q-px-md",attrs:{"transition-show":"fade","transition-hide":"fade",options:t.$managerWB.schedule.employeesInCurrentTimesheetForSelect,standout:"bg-WB-secondary text-WB-secondary",dense:"",dark:"",outlined:"",color:"WB-secondary","popup-content-class":"bg-WB-dark text-white","options-dense":""},model:{value:t.$managerWB.schedule.employeeObj.delete,callback:function(e){t.$set(t.$managerWB.schedule.employeeObj,"delete",e)},expression:"$managerWB.schedule.employeeObj.delete"}})],1),a("q-card-actions",{staticClass:"col-12 flex justify-end items-center text-WB-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"WB-secondary",label:t.$t("schedule.labels.cancel"),flat:""}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!t.$managerWB.schedule.employeeObj.delete||!t.$managerWB.schedule.employeeObj.delete.value,color:t.$managerWB.schedule.employeeObj.delete&&t.$managerWB.schedule.employeeObj.delete.value?"WB-secondary":"",label:t.$t("schedule.labels.deleteEmployeeBtn")},on:{click:function(e){return t.$managerWB.schedule.deleteEmployee({id:t.$managerWB.schedule.idOfThisMonthTimesheet,employeeId:t.$managerWB.schedule.employeeObj.delete.value})}}})],1)],1)],1)},k_=[],D_={name:"DeleteEmployeeDialog",data:function(){return{}},computed:{},methods:{}},O_=D_,j_=Object(c["a"])(O_,W_,k_,!1,null,"cd1514a6",null),S_=j_.exports;d()(j_,"components",{QDialog:$t["a"],QCard:m["a"],QCardSection:p["a"],QSelect:Jn["a"],QCardActions:h["a"],QBtn:b["a"]}),d()(j_,"directives",{ClosePopup:Bn["a"]});var P_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{staticClass:"add-employee-dialog",model:{value:t.$managerWB.layout.schedule.employeeModal.add,callback:function(e){t.$set(t.$managerWB.layout.schedule.employeeModal,"add",e)},expression:"$managerWB.layout.schedule.employeeModal.add"}},[a("q-card",{staticClass:"employee-dialog__card row justify-center items-center max-w-300px bg-WB-modal-bg-color text-WB-text-profile-color"},[a("q-card-section",{staticClass:"col-12 flex justify-center items-center"},[a("span",{staticClass:"font-size-normal"},[t._v(t._s(t.$t("schedule.dialogs.chooseEmployee")))])]),a("q-card-section",{staticClass:"col-12 flex justify-center items-center"},[a("q-select",{staticClass:"max-h-100px min-w-200px full-width q-px-md",attrs:{"transition-show":"fade","transition-hide":"fade",options:t.$managerWB.schedule.employeesForAddInTimesheetForSelect,standout:"bg-WB-secondary text-WB-secondary",dense:"",dark:"",outlined:"",color:"WB-secondary","popup-content-class":"bg-WB-dark text-white","options-dense":"",multiple:"","use-chips":""},model:{value:t.$managerWB.schedule.employeeObj.add,callback:function(e){t.$set(t.$managerWB.schedule.employeeObj,"add",e)},expression:"$managerWB.schedule.employeeObj.add"}})],1),a("q-card-section",{staticClass:"col-12 flex justify-center items-center"},[a("span",{staticClass:"font-size-normal"},[t._v(t._s(t.$t("schedule.dialogs.firstWorkDay")))])]),a("q-card-section",{staticClass:"col-12 row justify-center items-center"},[a("q-input",{staticClass:"q-px-xs",attrs:{value:t.dateRus,color:"WB-secondary","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary text-WB-secondary",dense:"",dark:"",outlined:"",readonly:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}})]},proxy:!0}])},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{options:t.canChooseDates,color:"WB-modal-bg-color",dark:!1},on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.$managerWB.schedule.firstWorkDayDate,callback:function(e){t.$set(t.$managerWB.schedule,"firstWorkDayDate",e)},expression:"$managerWB.schedule.firstWorkDayDate"}})],1)],1)],1),a("q-card-actions",{staticClass:"col-12 flex justify-end items-center text-WB-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"WB-secondary",label:t.$t("schedule.labels.cancel"),flat:""}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!t.$managerWB.schedule.employeeObj.add.length,color:t.$managerWB.schedule.employeeObj.add.length?"WB-secondary":"",label:t.$t("schedule.labels.addEmployeeBtn")},on:{click:t.addAllNewEmployees}})],1)],1)],1)},M_=[];function A_(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=T_(t))){var e=0,a=function(){};return{s:a,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s,i=!0,r=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){r=!0,s=t},f:function(){try{i||null==n.return||n.return()}finally{if(r)throw s}}}}function T_(t,e){if(t){if("string"===typeof t)return Q_(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Q_(t,e):void 0}}function Q_(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var F_={name:"AddEmployeeDialog",data:function(){return{}},computed:{dateRus:function(){return Object(U["b"])(this.$managerWB.schedule.firstWorkDayDate)},canChooseDates:function(){for(var t=this.$managerWB.schedule.firstDayOfChangingMoment,e=t.daysInMonth(),a=[],n=0;n<e;n++)a.push(t.add({days:n}).format("YYYY/MM/DD")),t.add({days:-n});return a},dataForSend:function(){var t=this;return this.$managerWB.schedule.employeeObj.add.map((function(e){return{id:t.$managerWB.schedule.idOfThisMonthTimesheet,employeeId:e.value,type:"TwoOverTwo",firstWorkday:Object(U["b"])(t.$managerWB.schedule.firstWorkDayDate,"YYYY/MM/DD","YYYY-MM-DD")}}))}},methods:{addAllNewEmployees:function(){var t=this;return Gn()(zn.a.mark((function e(){var a,n,s;return zn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=A_(t.dataForSend),e.prev=1,a.s();case 3:if((n=a.n()).done){e.next=9;break}return s=n.value,e.next=7,t.$managerWB.schedule.addEmployee(s);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),a.e(e.t0);case 14:return e.prev=14,a.f(),e.finish(14);case 17:return e.next=19,t.$managerWB.schedule.getOneTimesheet({id:t.$managerWB.schedule.idOfThisMonthTimesheet});case 19:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))()}}},I_=F_,R_=Object(c["a"])(I_,P_,M_,!1,null,null,null),E_=R_.exports;d()(R_,"components",{QDialog:$t["a"],QCard:m["a"],QCardSection:p["a"],QSelect:Jn["a"],QInput:Ns["a"],QPopupProxy:qr["a"],QDate:wr["a"],QIcon:ja["a"],QCardActions:h["a"],QBtn:b["a"]}),d()(R_,"directives",{ClosePopup:Bn["a"]});var L_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schedule__toolbar row justify-around items-center border-bottom"},[a("div",{staticClass:"col-xs-12 col-sm-6"},[a("ChooseTimesheet")],1),t.$managerWB.schedule.startOfCurrentMonthDashedFormat===t.$managerWB.schedule.currentTimesheetPeriod?[a("div",{staticClass:"col-xs-12 col-sm-4"},[a("ScheduleTodayStatus")],1)]:t._e(),a("div",{staticClass:"col-xs-12 col-sm-2"},[a("div",{staticClass:"row justify-center items-center"},[a("q-btn",{staticClass:"q-ma-xs",attrs:{label:t.$t("schedule.labels.addNewEmployee"),loading:t.$managerWB.schedule.loading,color:"WB-secondary",size:"sm","icon-right":"add"},on:{click:function(e){t.$managerWB.layout.schedule.employeeModal.add=!0}},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-skeleton",{staticClass:"full-width full-height"})]},proxy:!0}])})],1),a("div",{staticClass:"row justify-center items-center"},[a("q-btn",{staticClass:"q-ma-xs",attrs:{label:t.$t("schedule.labels.deleteEmployee"),loading:t.$managerWB.schedule.loading,color:"negative",size:"sm","icon-right":"remove"},on:{click:function(e){t.$managerWB.layout.schedule.employeeModal.delete=!0}},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-skeleton",{staticClass:"full-width full-height"})]},proxy:!0}])})],1)])],2)},Y_=[],H_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schedule__choose-timesheet font-size-sm q-ma-xs"},[a("q-table",{attrs:{data:t.$managerWB.schedule.thisMonthTimesheets,columns:t.columns,loading:t.$managerWB.schedule.loading,pagination:t.pagination,separator:"cell","row-key":"name",dense:"",dark:"",color:"WB-secondary","hide-bottom":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",class:t.classOfTr(e.row.id),attrs:{props:e},nativeOn:{click:function(a){return t.changeTimesheet(e.row.id)}}},[t._l(e.cols,(function(n,s){return[a("q-td",{key:n.name,attrs:{props:e}},[a("span",[t._v(t._s(n.value))])])]})),a("q-tooltip",{attrs:{anchor:"center right",self:"center left"}},[a("span",[t._v("Загрузить табель")])])],2)]}}])})],1)},N_=[];yu.a.locale("ru");var z_={name:"ChooseTimesheet",data:function(){var t=this;return{columns:[{name:"createdAt",label:"Дата создания",align:"center",field:function(e){return t.getShortDate(e.createdAt)},sortable:!1,type:"string"},{name:"id",label:"Номер",align:"center",field:function(t){return t.id},sortable:!0,type:"number"},{name:"start",label:"Дата начала",align:"center",field:function(e){return t.getShortDate(e.period)},sortable:!1,type:"string"},{name:"end",label:"Дата окончания",align:"center",field:function(e){return t.endOfMonth(e.period)},sortable:!1,type:"string"},{name:"creator",label:"Создатель",align:"center",field:function(t){return t.creator.fullName},sortable:!0,type:"string"}],pagination:{sortBy:"id",descending:!0,page:1,rowsPerPage:10}}},created:function(){},computed:{},methods:{changeTimesheet:function(t){var e=this;return Gn()(zn.a.mark((function a(){return zn.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.$managerWB.schedule.idOfThisMonthTimesheet=t,a.next=3,e.$managerWB.schedule.getOneTimesheet({id:t});case 3:case"end":return a.stop()}}),a)})))()},getShortDate:function(t){return yu()(t).format("DD.MM.YYYY")},endOfMonth:function(t){return yu()(t).endOf("month").format("DD.MM.YYYY")},classOfTr:function(t){return t===this.$managerWB.schedule.idOfThisMonthTimesheet?"today-row":""}}},V_=z_,G_=(a("2922"),Object(c["a"])(V_,H_,N_,!1,null,"0635579e",null)),U_=G_.exports;d()(G_,"components",{QTable:Zr["a"],QTr:Er["a"],QTd:Kr["a"],QTooltip:$n["a"]});var Z_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schedule__today-status font-size-medium"},[a("div",{staticClass:"flex justify-center items-center"},[a("div",{staticClass:"flex justify-center items-center status-border q-my-xs"},[0!==t.$managerWB.schedule.summaryStatusesForToday.plannedWorkday?[a("div",{staticClass:"cell"},[a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm border-bottom"},[a("BtnPlannedWorkday",{attrs:{cursorInherit:!0}})],1),a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm"},[a("span",[t._v(t._s(t.$managerWB.schedule.summaryStatusesForToday.plannedWorkday))])])])]:t._e(),0!==t.$managerWB.schedule.summaryStatusesForToday.plannedDayOff?[a("div",{staticClass:"cell border-left"},[a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm border-bottom"},[a("BtnPlannedDayOff",{attrs:{cursorInherit:!0}})],1),a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm"},[a("span",[t._v(t._s(t.$managerWB.schedule.summaryStatusesForToday.plannedDayOff))])])])]:t._e(),0!==t.$managerWB.schedule.summaryStatusesForToday.vacation?[a("div",{staticClass:"cell border-left"},[a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm border-bottom"},[a("BtnVacation",{attrs:{cursorInherit:!0}})],1),a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm"},[a("span",[t._v(t._s(t.$managerWB.schedule.summaryStatusesForToday.vacation))])])])]:t._e(),0!==t.$managerWB.schedule.summaryStatusesForToday.unpaidLeave?[a("div",{staticClass:"cell border-left"},[a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm border-bottom"},[a("BtnUnpaidLeave",{attrs:{cursorInherit:!0}})],1),a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm"},[a("span",[t._v(t._s(t.$managerWB.schedule.summaryStatusesForToday.unpaidLeave))])])])]:t._e(),0!==t.$managerWB.schedule.summaryStatusesForToday.sickLeave?[a("div",{staticClass:"cell border-left"},[a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm border-bottom"},[a("BtnSickLeave",{attrs:{cursorInherit:!0}})],1),a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm"},[a("span",[t._v(t._s(t.$managerWB.schedule.summaryStatusesForToday.sickLeave))])])])]:t._e(),0!==t.$managerWB.schedule.summaryStatusesForToday.truancy?[a("div",{staticClass:"cell border-left"},[a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm border-bottom"},[a("BtnTruancy",{attrs:{cursorInherit:!0}})],1),a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm"},[a("span",[t._v(t._s(t.$managerWB.schedule.summaryStatusesForToday.truancy))])])])]:t._e(),0!==t.$managerWB.schedule.summaryStatusesForToday.rescheduledShift?[a("div",{staticClass:"cell border-left"},[a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm border-bottom"},[a("BtnRescheduledShift",{attrs:{cursorInherit:!0}})],1),a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm"},[a("span",[t._v(t._s(t.$managerWB.schedule.summaryStatusesForToday.rescheduledShift))])])])]:t._e(),0!==t.$managerWB.schedule.summaryStatusesForToday.presence?[a("div",{staticClass:"cell border-left"},[a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm border-bottom"},[a("BtnPresence",{attrs:{cursorInherit:!0}})],1),a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm"},[a("span",[t._v(t._s(t.$managerWB.schedule.summaryStatusesForToday.presence))])])])]:t._e(),0!==t.$managerWB.schedule.summaryStatusesForToday.withoutStatus?[a("div",{staticClass:"cell border-left"},[a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm border-bottom"},[a("BtnWithoutStatus",{attrs:{cursorInherit:!0}})],1),a("div",{staticClass:"flex justify-center items-center q-py-xs q-px-sm"},[a("span",[t._v(t._s(t.$managerWB.schedule.summaryStatusesForToday.withoutStatus))])])])]:t._e(),0!==t.$managerWB.schedule.summaryStatusesForToday.default?[a("span",[t._v("Что-то пошло не так")])]:t._e()],2)])])},K_=[],J_={name:"ScheduleTodayStatus",components:{BtnWithoutStatus:Wv,BtnPresence:xv,BtnRescheduledShift:hv,BtnTruancy:cv,BtnSickLeave:nv,BtnUnpaidLeave:Kg,BtnVacation:Ng,BtnPlannedDayOff:Ig,BtnPlannedWorkday:Pg},data:function(){return{}},created:function(){},computed:{},methods:{}},X_=J_,ty=Object(c["a"])(X_,Z_,K_,!1,null,"4ce285ec",null),ey=ty.exports,ay={name:"ScheduleToolbar",components:{ScheduleTodayStatus:ey,ChooseTimesheet:U_},data:function(){return{}},computed:{},methods:{}},ny=ay,sy=a("293e"),iy=Object(c["a"])(ny,L_,Y_,!1,null,"6ca7eade",null),ry=iy.exports;d()(iy,"components",{QBtn:b["a"],QSkeleton:sy["a"]});var oy=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schedule__footer flex justify-around items-center"},[0===t.$managerWB.schedule.schedulesData.length?a("q-btn",{staticClass:"q-ma-md",attrs:{label:t.$t("schedule.labels.createNewTimesheet"),loading:t.$managerWB.schedule.loading,color:"WB-secondary","icon-right":"add"},on:{click:t.$managerWB.schedule.createNewTimesheet},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-skeleton",{staticClass:"full-width full-height"})]},proxy:!0}],null,!1,1925289836)}):t._e(),t.$managerWB.schedule.schedulesData.length?[a("DownloadSchedule"),a("q-btn",{staticClass:"q-ma-md",attrs:{disable:0===t.$managerWB.schedule.schedulesForChanges.length,label:t.$t("schedule.labels.autoFillGraphics"),loading:t.$managerWB.schedule.loading,color:0===t.$managerWB.schedule.schedulesForChanges.length?"":"WB-secondary","icon-right":"schedule"},on:{click:function(e){t.$managerWB.layout.schedule.autoFillGraphicsModal=!0}},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-skeleton",{staticClass:"full-width full-height"})]},proxy:!0}],null,!1,1925289836)}),a("q-btn",{staticClass:"q-ma-md",attrs:{disable:0===t.$managerWB.schedule.schedulesForChanges.length,label:t.$t("schedule.labels.saveChangesInCurrentTimesheet"),loading:t.$managerWB.schedule.loading,color:0===t.$managerWB.schedule.schedulesForChanges.length?"":"WB-secondary","icon-right":"save"},on:{click:function(e){return t.$managerWB.schedule.saveChangesInCurrentTimesheet({id:t.$managerWB.schedule.idOfThisMonthTimesheet,schedules:t.$managerWB.schedule.schedulesForChanges})}},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-skeleton",{staticClass:"full-width full-height"})]},proxy:!0}],null,!1,1925289836)})]:t._e()],2)},ly=[],cy=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("download-xlsx",{attrs:{data:t.$managerWB.schedule.tableDataForDownload,columns:t.$managerWB.schedule.columnsForDownload,filename:t.filename,sheetname:t.$managerWB.schedule.monthAndYear}},[a("q-btn",{attrs:{loading:t.$managerWB.schedule.loading,color:t.$managerWB.schedule.loading?"":"info",label:"Скачать Excel","icon-right":"cloud_download"},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-skeleton",{staticClass:"full-width full-height"})]},proxy:!0}])})],1)},uy=[],dy={name:"DownloadSchedule",components:{DownloadXlsx:Jb},data:function(){return{}},computed:{filename:function(){return"".concat(this.$managerWB.schedule.monthAndYear,"_").concat(Date.now())}},methods:{}},my=dy,py=Object(c["a"])(my,cy,uy,!1,null,"760733a7",null),fy=py.exports;d()(py,"components",{QBtn:b["a"],QSkeleton:sy["a"]});var hy={name:"ScheduleFooter",components:{DownloadSchedule:fy},data:function(){return{}},computed:{},methods:{}},by=hy,gy=Object(c["a"])(by,oy,ly,!1,null,"6b788bf5",null),vy=gy.exports;d()(gy,"components",{QBtn:b["a"],QSkeleton:sy["a"]});var _y={name:"Schedule",components:{ScheduleToolbar:ry,ScheduleHeader:Av,ScheduleMain:f_,ScheduleFooter:vy,HoursAndNoteDialog:y_,AddEmployeeDialog:E_,DeleteEmployeeDialog:S_,AutoFillDialog:w_},data:function(){return{}},created:function(){var t=this;return Gn()(zn.a.mark((function e(){return zn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.$managerWB.schedule.allTimesheets.length<=0)){e.next=3;break}return e.next=3,t.$managerWB.schedule.getAllTimesheets();case 3:if(!(t.$managerWB.schedule.schedulesData.length<=0)){e.next=6;break}return e.next=6,t.$managerWB.schedule.findMyTimesheet(t.$managerWB.schedule.firstDayOfChangingMonthString);case 6:case"end":return e.stop()}}),e)})))()},computed:{},methods:{}},yy=_y,xy=Object(c["a"])(yy,ug,dg,!1,null,"0d67c45e",null),Cy=xy.exports,$y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"settings"},[a("div",{staticClass:"flex justify-around items-center"},[a("q-btn",{staticClass:"q-ma-sm",attrs:{label:"Рассылка",color:"WB-secondary","icon-right":"mail_outline"},on:{click:function(e){return t.$managerWB.layout.changeRoute("/settings/mailing")}}}),a("q-btn",{staticClass:"q-ma-sm",attrs:{label:"Управление нагрузкой",color:"WB-secondary","icon-right":"work"},on:{click:function(e){return t.$managerWB.layout.changeRoute("/settings/loanRedistribution")}}}),a("q-btn",{staticClass:"q-ma-sm",attrs:{label:"Управление коэффициентами",color:"WB-secondary","icon-right":"repeat_one"},on:{click:function(e){return t.$managerWB.layout.changeRoute("/settings/coefficients")}}}),a("q-btn",{staticClass:"q-ma-sm",attrs:{label:"Перезакрепление платежей",color:"WB-secondary","icon-right":"attach_money"},on:{click:function(e){return t.$managerWB.layout.changeRoute("/settings/payments")}}})],1),a("router-view")],1)},By=[],qy={},wy=Object(c["a"])(qy,$y,By,!1,null,null,null),Wy=wy.exports;d()(wy,"components",{QBtn:b["a"]});var ky=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mailing"},[a("div",{staticClass:"filters q-pa-xs q-mb-sm"},[a("div",{staticClass:"row justify-around items-center"},[a("div",{staticClass:"col-xs-12 col-sm-6 flex justify-center items-center q-pa-xs"},[a("MailingActiveDSBlock")],1),a("div",{staticClass:"col-xs-12 col-sm-6 flex justify-center items-center q-pa-xs"},[a("MailingActivePromiseBlock")],1)]),a("div",{staticClass:"row justify-around items-center"},[a("div",{staticClass:"col-xs-12 col-sm-6 row justify-center items-center q-pa-xs"},[a("MailingDelayBlock")],1),a("div",{staticClass:"col-xs-12 col-sm-6 row justify-center items-center q-pa-xs"},[a("MailingDebtBlock")],1)]),a("div",{staticClass:"row justify-around items-center"},[a("div",{staticClass:"col-xs-12 col-sm-4 flex justify-center items-center q-pa-xs"},[a("MailingMessageTypeBlock")],1),a("div",{staticClass:"col-xs-12 col-sm-4 flex justify-center items-center q-pa-xs"},[a("MailingProductTypeBlock")],1),a("div",{staticClass:"col-xs-12 col-sm-4 flex justify-center items-center q-pa-xs"},[a("MailingGroupsBlock")],1)]),a("div",{staticClass:"row justify-around items-center"},[a("div",{staticClass:"col-xs-12 col-sm-4 col-xl flex justify-center items-center q-pa-xs"},[a("MailingPreviewButton")],1),a("div",{staticClass:"col-xs-12 col-sm-4 col-xl flex justify-center items-center q-pa-xs"},[a("MailingClearButton")],1),a("div",{staticClass:"col-xs-12 col-sm-12 col-xl-4 flex justify-center items-center q-pa-xs"},[a("MailingTemplateBlock")],1),a("div",{staticClass:"col-xs-12 col-sm-12 col-xl-3 flex justify-center items-center q-pa-xs"},[a("MailingTemplateTextBlock")],1),a("div",{staticClass:"col-xs-12 col-sm-4 col-xl flex justify-center items-center q-pa-xs"},[a("MailingSendButton")],1)])]),a("MailingTable")],1)},Dy=[],Oy=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mailing-DS-status__block filter__block q-mx-xs full-width"},[t._m(0),a("div",{staticClass:"flex justify-around items-center q-ma-xs"},[a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:"Есть",color:"positive","keep-color":""},on:{input:function(e){return t.uncheckStatus(!1)}},model:{value:t.$managerWB.mailing.filters.status.hardWithAgreement,callback:function(e){t.$set(t.$managerWB.mailing.filters.status,"hardWithAgreement",e)},expression:"$managerWB.mailing.filters.status.hardWithAgreement"}}),a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:"Нет",color:"negative","keep-color":""},on:{input:function(e){return t.uncheckStatus(!0)}},model:{value:t.$managerWB.mailing.filters.status.hard,callback:function(e){t.$set(t.$managerWB.mailing.filters.status,"hard",e)},expression:"$managerWB.mailing.filters.status.hard"}})],1)])},jy=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v("Активное ДС")])])}],Sy={name:"MailingActiveDSBlock",data:function(){return{}},created:function(){},mounted:function(){},computed:{},methods:{uncheckStatus:function(t){t?this.$managerWB.mailing.filters.status.hardWithAgreement=!1:this.$managerWB.mailing.filters.status.hard=!1}}},Py=Sy,My=Object(c["a"])(Py,Oy,jy,!1,null,"02cba48a",null),Ay=My.exports;d()(My,"components",{QCheckbox:ar["a"]});var Ty=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mailing-active-promises__block filter__block q-mx-xs full-width"},[t._m(0),a("div",{staticClass:"flex justify-around items-center"},[a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:"Есть",color:"positive","keep-color":""},on:{input:function(e){return t.uncheckPromises(!0)}},model:{value:t.$managerWB.mailing.filters.isPromised.yes,callback:function(e){t.$set(t.$managerWB.mailing.filters.isPromised,"yes",e)},expression:"$managerWB.mailing.filters.isPromised.yes"}}),a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:"Нет",color:"negative","keep-color":""},on:{input:function(e){return t.uncheckPromises(!1)}},model:{value:t.$managerWB.mailing.filters.isPromised.no,callback:function(e){t.$set(t.$managerWB.mailing.filters.isPromised,"no",e)},expression:"$managerWB.mailing.filters.isPromised.no"}})],1)])},Qy=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v("Активное обещание")])])}],Fy={name:"MailingActivePromiseBlock",data:function(){return{}},created:function(){},computed:{},methods:{uncheckPromises:function(t){t?this.$managerWB.mailing.filters.isPromised.no=!1:this.$managerWB.mailing.filters.isPromised.yes=!1}}},Iy=Fy,Ry=Object(c["a"])(Iy,Ty,Qy,!1,null,"2f878eed",null),Ey=Ry.exports;d()(Ry,"components",{QCheckbox:ar["a"]});var Ly=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mailing-delay__block filter__block full-width q-mx-xs"},[t._m(0),a("div",{staticClass:"row justify-around items-center"},[a("q-input",{staticClass:"col-2 q-mx-xs max-w-75px",attrs:{type:"number","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary text-WB-secondary",dense:"",outlined:"",color:"WB-secondary"},on:{change:function(e){return t.validateRange(t.$managerWB.mailing.filters.delay)}},model:{value:t.$managerWB.mailing.filters.delay.min,callback:function(e){t.$set(t.$managerWB.mailing.filters.delay,"min",t._n(e))},expression:"$managerWB.mailing.filters.delay.min"}}),a("q-range",{staticClass:"w-50 q-pa-none",attrs:{min:t.min,max:t.max,color:"positive"},model:{value:t.$managerWB.mailing.filters.delay,callback:function(e){t.$set(t.$managerWB.mailing.filters,"delay",e)},expression:"$managerWB.mailing.filters.delay"}}),a("q-input",{staticClass:"col-2 q-mx-xs max-w-75px",attrs:{type:"number","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary text-WB-secondary",dense:"",outlined:"",color:"WB-secondary"},on:{change:function(e){return t.validateRange(t.$managerWB.mailing.filters.delay)}},model:{value:t.$managerWB.mailing.filters.delay.max,callback:function(e){t.$set(t.$managerWB.mailing.filters.delay,"max",t._n(e))},expression:"$managerWB.mailing.filters.delay.max"}})],1)])},Yy=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v("Просрочка")])])}],Hy={name:"MailingDelayBlock",data:function(){return{min:this.$managerWB.user.isUserHaveRoles("operatorHard")?31:1,max:this.$managerWB.user.isUserHaveRoles("operatorHard")?999:60}},created:function(){this.$managerWB.mailing.filters.delay.min=this.min,this.$managerWB.mailing.filters.delay.max=this.max},mounted:function(){},computed:{},methods:{validateRange:function(t){(t.min<this.min||t.min>this.max||""===t.min)&&(this.$managerWB.mailing.filters.delay.min=this.min),(t.max<this.min||t.max>this.max||""===t.max)&&(this.$managerWB.mailing.filters.delay.max=this.max),t.max<t.min&&(this.$managerWB.mailing.filters.delay.min=this.min,this.$managerWB.mailing.filters.delay.max=this.max)}}},Ny=Hy,zy=Object(c["a"])(Ny,Ly,Yy,!1,null,"0abc1d44",null),Vy=zy.exports;d()(zy,"components",{QInput:Ns["a"],QRange:dr["a"]});var Gy=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mailing-debt__block filter__block full-width q-mx-xs"},[t._m(0),a("div",{staticClass:"row justify-around items-center"},[a("q-input",{staticClass:"col-2 q-mx-xs max-w-75px",attrs:{type:"number","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary text-WB-secondary",dense:"",outlined:"",color:"WB-secondary"},on:{change:function(e){return t.validateRange(t.$managerWB.mailing.filters.debt)}},model:{value:t.$managerWB.mailing.filters.debt.min,callback:function(e){t.$set(t.$managerWB.mailing.filters.debt,"min",t._n(e))},expression:"$managerWB.mailing.filters.debt.min"}}),a("q-range",{staticClass:"w-50 q-pa-none",attrs:{min:1,max:15e4,color:"positive"},model:{value:t.$managerWB.mailing.filters.debt,callback:function(e){t.$set(t.$managerWB.mailing.filters,"debt",e)},expression:"$managerWB.mailing.filters.debt"}}),a("q-input",{staticClass:"col-2 q-mx-xs max-w-100px",attrs:{type:"number","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary text-WB-secondary",dense:"",outlined:"",color:"WB-secondary"},on:{change:function(e){return t.validateRange(t.$managerWB.mailing.filters.debt)}},model:{value:t.$managerWB.mailing.filters.debt.max,callback:function(e){t.$set(t.$managerWB.mailing.filters.debt,"max",t._n(e))},expression:"$managerWB.mailing.filters.debt.max"}})],1)])},Uy=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v("Задолженность")])])}],Zy={name:"MailingDebtBlock",data:function(){return{}},created:function(){},computed:{},methods:{validateRange:function(t){(t.min<1||t.min>15e4||""===t.min)&&(this.$managerWB.mailing.filters.debt.min=1),(t.max<1||t.max>15e4||""===t.max)&&(this.$managerWB.mailing.filters.debt.max=15e4),t.max<t.min&&(this.$managerWB.mailing.filters.debt.min=1,this.$managerWB.mailing.filters.debt.max=15e4)}}},Ky=Zy,Jy=Object(c["a"])(Ky,Gy,Uy,!1,null,"a85451a4",null),Xy=Jy.exports;d()(Jy,"components",{QInput:Ns["a"],QRange:dr["a"]});var tx=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mailing-groups__block filter__block q-mx-xs full-width"},[a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v("Группа "+t._s(t.role))])]),a("div",{staticClass:"flex justify-center items-center full-width"},[a("div",{staticClass:"q-px-md q-pb-md full-width"},[a("q-select",{staticClass:"max-h-40px min-w-200px full-width",attrs:{"transition-show":"fade","transition-hide":"fade",multiple:"","use-chips":"",options:t.groups,standout:"bg-WB-secondary text-WB-secondary",clearable:"",dense:"",dark:"",outlined:"",color:"WB-secondary","popup-content-class":"bg-WB-dark text-white","options-dense":"",error:t.$managerWB.mailing.isGroupIdsEmpty},on:{input:function(e){t.$managerWB.mailing.isGroupIdsEmpty=!1}},model:{value:t.$managerWB.mailing.filters.groupsArrayOfObjects,callback:function(e){t.$set(t.$managerWB.mailing.filters,"groupsArrayOfObjects",e)},expression:"$managerWB.mailing.filters.groupsArrayOfObjects"}})],1)])])},ex=[],ax={name:"MailingGroupsBlock",data:function(){return{role:null}},created:function(){this.$managerWB.user.isUserHaveRoles("operatorHard")&&(this.role="Хард")},computed:{groups:function(){var t=this;return this.$managerWB.user.groupsForSelect.filter((function(e){return e.label.includes(t.role)}))}},methods:{}},nx=ax,sx=Object(c["a"])(nx,tx,ex,!1,null,null,null),ix=sx.exports;d()(sx,"components",{QSelect:Jn["a"]});var rx=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mailing-template__block filter__block q-mx-xs full-width"},[t._m(0),a("div",{staticClass:"flex justify-center items-center full-width"},[a("div",{staticClass:"q-px-md q-pb-md full-width"},[a("q-select",{staticClass:"max-h-75px min-w-200px full-width",attrs:{"transition-show":"fade","transition-hide":"fade",options:t.$managerWB.mailing.templatesOptions,disable:!(t.$managerWB.mailing.tableData&&t.$managerWB.mailing.tableData.length),standout:"bg-WB-secondary text-WB-secondary",dense:"",dark:"",outlined:"",color:"WB-secondary","popup-content-class":"bg-WB-dark text-white","options-dense":"","emit-value":"","map-options":""},model:{value:t.$managerWB.mailing.communicationResult,callback:function(e){t.$set(t.$managerWB.mailing,"communicationResult",e)},expression:"$managerWB.mailing.communicationResult"}})],1)])])},ox=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v("Шаблон")])])}],lx={name:"MailingTemplateBlock",data:function(){return{}},created:function(){},computed:{},methods:{}},cx=lx,ux=Object(c["a"])(cx,rx,ox,!1,null,null,null),dx=ux.exports;d()(ux,"components",{QSelect:Jn["a"]});var mx=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mailing-preview__button"},[a("q-btn",{attrs:{color:"WB-secondary",loading:t.$managerWB.mailing.loadings.preview||t.$managerWB.mailing.loadings.sending,"icon-right":"create",label:"Сформировать"},on:{click:t.$managerWB.mailing.getPreview},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-skeleton",{staticClass:"full-width full-height"})]},proxy:!0}])})],1)},px=[],fx={name:"MailingPreviewButton",data:function(){return{}},created:function(){},computed:{},methods:{}},hx=fx,bx=Object(c["a"])(hx,mx,px,!1,null,"20b9af7c",null),gx=bx.exports;d()(bx,"components",{QBtn:b["a"],QSkeleton:sy["a"]});var vx=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mailing-send__button"},[a("q-btn",{attrs:{color:t.$managerWB.mailing.tableData&&t.$managerWB.mailing.tableData.length&&"blank"!==t.$managerWB.mailing.communicationResult?"WB-secondary":"",disable:!(t.$managerWB.mailing.tableData&&t.$managerWB.mailing.tableData.length)||"blank"===t.$managerWB.mailing.communicationResult,loading:t.$managerWB.mailing.loadings.preview||t.$managerWB.mailing.loadings.sending,"icon-right":"mail",label:"Отправить"},on:{click:t.$managerWB.mailing.sendMessages},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-skeleton",{staticClass:"full-width full-height"})]},proxy:!0}])})],1)},_x=[],yx={name:"MailingSendButton",data:function(){return{}},created:function(){},computed:{},methods:{}},xx=yx,Cx=Object(c["a"])(xx,vx,_x,!1,null,"92b3c968",null),$x=Cx.exports;d()(Cx,"components",{QBtn:b["a"],QSkeleton:sy["a"]});var Bx=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mailing-clear__button"},[a("q-btn",{attrs:{color:t.$managerWB.mailing.tableData&&t.$managerWB.mailing.tableData.length?"WB-secondary":"",disable:!(t.$managerWB.mailing.tableData&&t.$managerWB.mailing.tableData.length),loading:t.$managerWB.mailing.loadings.preview||t.$managerWB.mailing.loadings.sending,"icon-right":"clear",label:"Очистить"},on:{click:function(e){t.$managerWB.mailing.tableData=[]}},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-skeleton",{staticClass:"full-width full-height"})]},proxy:!0}])})],1)},qx=[],wx={name:"MailingClearButton",data:function(){return{}},created:function(){},computed:{},methods:{}},Wx=wx,kx=Object(c["a"])(Wx,Bx,qx,!1,null,"741a1a8d",null),Dx=kx.exports;d()(kx,"components",{QBtn:b["a"],QSkeleton:sy["a"]});var Ox=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mailing-product-type-block__block filter__block q-mx-xs full-width"},[t._m(0),a("div",{staticClass:"flex justify-center items-center full-width"},[a("div",{staticClass:"q-px-md q-pb-md full-width"},[a("q-select",{staticClass:"max-h-75px min-w-200px full-width",attrs:{"transition-show":"fade","transition-hide":"fade",options:t.optionsForProductType,standout:"bg-WB-secondary text-WB-secondary",dense:"",dark:"",outlined:"",color:"WB-secondary","popup-content-class":"bg-WB-dark text-white","options-dense":"","emit-value":"","map-options":""},model:{value:t.$managerWB.mailing.filters.product,callback:function(e){t.$set(t.$managerWB.mailing.filters,"product",e)},expression:"$managerWB.mailing.filters.product"}})],1)])])},jx=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v("Виды займов")])])}],Sx={name:"MailingProductTypeBlock",data:function(){return{}},created:function(){},computed:{optionsForProductType:function(){var t=this;return["all","pos","pdl"].map((function(e){return{label:t.$t("loanRedistribution.filters.productType."+e),value:e}}))}},methods:{}},Px=Sx,Mx=Object(c["a"])(Px,Ox,jx,!1,null,null,null),Ax=Mx.exports;d()(Mx,"components",{QSelect:Jn["a"]});var Tx=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mailing__table"},[a("q-table",{attrs:{data:t.$managerWB.mailing.tableData,columns:t.columns,pagination:t.pagination,loading:t.$managerWB.mailing.loadings.sending,"loading-label":"Запрашиваются данные","no-data-label":"Список не сформирован","rows-per-page-label":t.$managerWB.mailing.tableData.length>0?"Общее количество клиентов: "+t.$managerWB.mailing.tableData.length:"",rowsPerPageOptions:[3,5,7,10,15,20,25,30,35,50,0],"visible-columns":t.visibleColumns,separator:"cell","row-key":"name",color:"WB-secondary",bordered:"",dense:"",dark:""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(e){return[a("q-space"),a("q-select",{staticStyle:{"min-width":"150px"},attrs:{"transition-show":"fade","transition-hide":"fade",options:t.columns,"display-value":t.$q.lang.table.columns,color:"WB-secondary","popup-content-class":"bg-WB-dark text-white",multiple:"",outlined:"",dense:"",dark:"","options-dense":"","emit-value":"","map-options":"","option-value":"name"},on:{input:t.setNewColumnsToLocalStorage},model:{value:t.visibleColumns,callback:function(e){t.visibleColumns=e},expression:"visibleColumns"}})]}},{key:"body",fn:function(e){return[a("q-tr",t._l(e.cols,(function(n){return a("q-td",{key:n.name,staticClass:"q-pa-none",attrs:{props:e}},["state"===n.name?[t._v(t._s(t.$t("sms.table.state."+n.value)))]:[t._v(t._s(n.value))]],2)})),1)]}},{key:"pagination",fn:function(e){return[a("div",{staticClass:"row flex-center"},[a("q-btn",{staticClass:"q-mr-sm",attrs:{round:"",dense:"",size:"sm",icon:"undo",color:"WB-legend-color-info",disable:e.isFirstPage},on:{click:e.prevPage}}),a("div",{staticClass:"q-mr-sm"},[a("span",[t._v(t._s(e.pagination.page)+" / "+t._s(e.pagesNumber))])]),a("q-btn",{attrs:{round:"",dense:"",size:"sm",icon:"redo",color:"WB-legend-color-info",disable:e.isLastPage},on:{click:e.nextPage}})],1)]}},{key:"loading",fn:function(){return[a("q-inner-loading",{attrs:{showing:"",dark:""}})]},proxy:!0}])})],1)},Qx=[],Fx={name:"MailingTable",data:function(){return{visibleColumns:G["a"].getItem("mailingTableVisibleColumns")||["clientFullName","contract","groupName","delay","debt"],pagination:{page:1,rowsPerPage:10},columns:[{name:"clientFullName",field:"clientFullName",label:"ФИО",align:"start",sortable:!0,required:!0,disable:!0},{name:"contract",field:"contract",label:"Договор",align:"center",sortable:!0},{name:"groupName",field:"groupName",label:"Группа",align:"center",sortable:!0},{name:"delay",field:"delay",label:"Просрочка",align:"center",sortable:!0},{name:"debt",field:"debt",format:function(t){return Object(U["l"])(t,!0)},label:"Задолженность",align:"right",sortable:!0}]}},created:function(){},computed:{},methods:{setNewColumnsToLocalStorage:function(){G["a"].set("mailingTableVisibleColumns",this.visibleColumns)}}},Ix=Fx,Rx=(a("b7c9"),Object(c["a"])(Ix,Tx,Qx,!1,null,null,null)),Ex=Rx.exports;d()(Rx,"components",{QTable:Zr["a"],QSpace:Cn["a"],QSelect:Jn["a"],QTr:Er["a"],QTd:Kr["a"],QBtn:b["a"],QInnerLoading:Ys["a"]});var Lx=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mailing-message-type__block filter__block q-mx-xs full-width"},[t._m(0),a("div",{staticClass:"flex justify-center items-center full-width"},[a("div",{staticClass:"q-px-md q-pb-md full-width"},[a("q-select",{staticClass:"max-h-75px min-w-200px full-width",attrs:{"transition-show":"fade","transition-hide":"fade",options:[{label:"SMS",value:"sms"},{label:"Email",value:"email"}],standout:"bg-WB-secondary text-WB-secondary",dense:"",dark:"",outlined:"",color:"WB-secondary","popup-content-class":"bg-WB-dark text-white","options-dense":"","emit-value":"","map-options":""},model:{value:t.$managerWB.mailing.filters.messagesType,callback:function(e){t.$set(t.$managerWB.mailing.filters,"messagesType",e)},expression:"$managerWB.mailing.filters.messagesType"}})],1)])])},Yx=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v("Тип сообщений")])])}],Hx={name:"MailingMessageTypeBlock",data:function(){return{}},created:function(){},computed:{},methods:{}},Nx=Hx,zx=Object(c["a"])(Nx,Lx,Yx,!1,null,null,null),Vx=zx.exports;d()(zx,"components",{QSelect:Jn["a"]});var Gx=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mailing-template-text__block q-mx-xs full-width"},[a("q-input",{staticClass:"text-for-template-area brs3",attrs:{value:t.$t("mailing."+t.$managerWB.mailing.filters.messagesType+".textForTemplates."+t.$managerWB.mailing.communicationResult),type:"textarea",readonly:"",orientation:"vertical",outlined:"",dense:""}})],1)},Ux=[],Zx={name:"MailingTemplateTextBlock",data:function(){return{}},created:function(){},computed:{},methods:{}},Kx=Zx,Jx=(a("4f79"),Object(c["a"])(Kx,Gx,Ux,!1,null,null,null)),Xx=Jx.exports;d()(Jx,"components",{QInput:Ns["a"],QField:Bi["a"]});var tC={name:"WBManagerMailing",components:{MailingTemplateTextBlock:Xx,MailingMessageTypeBlock:Vx,MailingProductTypeBlock:Ax,MailingClearButton:Dx,MailingActiveDSBlock:Ay,MailingActivePromiseBlock:Ey,MailingDelayBlock:Vy,MailingDebtBlock:Xy,MailingGroupsBlock:ix,MailingTemplateBlock:dx,MailingPreviewButton:gx,MailingSendButton:$x,MailingTable:Ex},data:function(){return{}},created:function(){},computed:{},methods:{}},eC=tC,aC=Object(c["a"])(eC,ky,Dy,!1,null,"1df706df",null),nC=aC.exports,sC=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loan__redistribution"},[a("div",{staticClass:"filters q-pa-xs q-mb-sm"},[a("div",{staticClass:"row justify-around items-center"},[t.$managerWB.user.isUserHaveRoles("operatorHard")?a("div",{staticClass:"col-xs-12 col-sm flex justify-center items-center q-pa-xs"},[a("AssignedBlock")],1):t._e(),t.$managerWB.user.isUserHaveRoles("operatorHard")?a("div",{staticClass:"col-xs-12 col-sm flex justify-center items-center q-pa-xs"},[a("StatusBlock")],1):t._e(),a("div",{staticClass:"col-xs-12 col-sm flex justify-center items-center q-pa-xs"},[a("PortfolioLimit")],1),a("div",{staticClass:"col-xs-12 col-sm flex justify-center items-center q-pa-xs"},[a("GroupLimit")],1)]),a("div",{staticClass:"row justify-around items-center"},[a("div",{staticClass:"col-xs-12 col-sm-4 flex justify-center items-center q-pa-xs"},[a("PaymentsBlock")],1),a("div",{staticClass:"col-xs-12 col-sm-4 flex justify-center items-center q-pa-xs"},[a("ContactWithClientBlock")],1),a("div",{staticClass:"col-xs-12 col-sm-4 flex justify-center items-center q-pa-xs"},[a("PromisesBlock")],1)]),a("div",{staticClass:"row justify-around items-center"},[a("div",{staticClass:"col-xs-12 col-sm-6 row justify-center items-center q-pa-xs"},[a("DelayBlock")],1),a("div",{staticClass:"col-xs-12 col-sm-6 row justify-center items-center q-pa-xs"},[a("DebtBlock")],1)]),a("div",{staticClass:"row justify-around items-center"},[a("div",{staticClass:"col-sm-12 col-md-5 col-xl flex justify-center items-center q-pa-xs"},[a("DonorGroupBlock")],1),a("div",{staticClass:"col-sm-12 col-md-1 col-xl-1 flex justify-center items-center q-pa-xs"},[a("SwitchButton")],1),a("div",{staticClass:"col-sm-12 col-md-5 col-xl flex justify-center items-center q-pa-xs"},[a("RecipientGroupBlock")],1),t.$managerWB.user.isUserHaveRoles("operatorHard")?a("div",{staticClass:"col-sm-12 col-md-6 col-xl flex justify-center items-center q-pa-xs"},[a("GPSBlock")],1):t._e()]),a("div",{staticClass:"row justify-around items-center"},[a("div",{staticClass:"col-sm-12 col-md-6 col-xl-3 flex justify-center items-center q-pa-xs"},[a("SelectionMethodBlock")],1),a("div",{staticClass:"col-sm-12 col-md-6 col-xl-3 flex justify-center items-center q-pa-xs"},[a("ProductTypeBlock")],1),a("div",{staticClass:"col-sm-12 col-md-6 col-xl flex justify-center items-center q-pa-xs"},[a("ToFormButton")],1),a("div",{staticClass:"col-sm-12 col-md-6 col-xl flex justify-center items-center q-pa-xs"},[a("ClearButton")],1),a("div",{staticClass:"col-sm-12 col-md-6 col-xl flex justify-center items-center q-pa-xs"},[a("RedistributeButton")],1)])]),a("RedistributionTable")],1)},iC=[],rC=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"assigned__block filter__block q-mx-xs full-width"},[a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.titles.assigned")))])]),a("div",{staticClass:"flex justify-around items-center q-ma-xs"},[a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:t.$t("loanRedistribution.filters.labels.yes"),color:"positive","keep-color":""},on:{input:function(e){return t.uncheckAssigned(!0)}},model:{value:t.$managerWB.loanRedistribution.filters.assigned.yes,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.assigned,"yes",e)},expression:"$managerWB.loanRedistribution.filters.assigned.yes"}}),a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:t.$t("loanRedistribution.filters.labels.no"),color:"negative","keep-color":""},on:{input:function(e){return t.uncheckAssigned(!1)}},model:{value:t.$managerWB.loanRedistribution.filters.assigned.no,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.assigned,"no",e)},expression:"$managerWB.loanRedistribution.filters.assigned.no"}})],1)])},oC=[],lC={name:"AssignedBlock",data:function(){return{}},created:function(){},computed:{},methods:{uncheckAssigned:function(t){t?this.$managerWB.loanRedistribution.filters.assigned.no=!1:this.$managerWB.loanRedistribution.filters.assigned.yes=!1}}},cC=lC,uC=Object(c["a"])(cC,rC,oC,!1,null,"25adb1eb",null),dC=uC.exports;d()(uC,"components",{QCheckbox:ar["a"]});var mC=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"status__block filter__block q-mx-xs full-width"},[a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.titles.status")))])]),a("div",{staticClass:"flex justify-around items-center q-ma-xs"},[a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:t.$t("loanRedistribution.filters.labels.hard"),color:"WB-primary","keep-color":""},on:{input:function(e){return t.uncheckStatus(!0)}},model:{value:t.$managerWB.loanRedistribution.filters.status.hard,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.status,"hard",e)},expression:"$managerWB.loanRedistribution.filters.status.hard"}}),a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:t.$t("loanRedistribution.filters.labels.hardWithAgreement"),color:"WB-primary","keep-color":""},on:{input:function(e){return t.uncheckStatus(!1)}},model:{value:t.$managerWB.loanRedistribution.filters.status.hardWithAgreement,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.status,"hardWithAgreement",e)},expression:"$managerWB.loanRedistribution.filters.status.hardWithAgreement"}})],1)])},pC=[],fC={name:"StatusBlock",data:function(){return{}},created:function(){this.$managerWB.loanRedistribution.filters.status.hard=this.$managerWB.user.isUserHaveRoles("operatorHard")},mounted:function(){},computed:{},methods:{uncheckStatus:function(t){t?this.$managerWB.loanRedistribution.filters.status.hardWithAgreement=!1:this.$managerWB.loanRedistribution.filters.status.hard=!1}}},hC=fC,bC=Object(c["a"])(hC,mC,pC,!1,null,"6bff0428",null),gC=bC.exports;d()(bC,"components",{QCheckbox:ar["a"]});var vC=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"portfolioLimit__block filter__block q-mx-xs full-width"},[a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.titles.portfolioLimit")))])]),a("div",{staticClass:"flex justify-around items-center q-ma-xs"},[a("q-input",{staticClass:"q-mx-xs max-w-100px",attrs:{dense:"",outlined:"",color:"WB-secondary",type:"number","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary text-WB-secondary"},on:{input:function(e){return t.verifyCheckbox(t.$managerWB.loanRedistribution.filters.portfolioLimit.isLimited,t.$managerWB.loanRedistribution.filters.portfolioLimit.limit)}},model:{value:t.$managerWB.loanRedistribution.filters.portfolioLimit.limit,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.portfolioLimit,"limit",t._n(e))},expression:"$managerWB.loanRedistribution.filters.portfolioLimit.limit"}}),a("q-checkbox",{staticClass:"q-mx-xs",attrs:{"keep-color":"",color:t.$managerWB.loanRedistribution.filters.portfolioLimit.isLimited?"positive":""},on:{input:function(e){return t.verifyInputField(t.$managerWB.loanRedistribution.filters.portfolioLimit.isLimited,t.$managerWB.loanRedistribution.filters.portfolioLimit.limit)}},model:{value:t.$managerWB.loanRedistribution.filters.portfolioLimit.isLimited,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.portfolioLimit,"isLimited",e)},expression:"$managerWB.loanRedistribution.filters.portfolioLimit.isLimited"}})],1)])},_C=[],yC=a("2a19"),xC={name:"PortfolioLimit",data:function(){return{}},created:function(){this.$managerWB.loanRedistribution.filters.portfolioLimit.limit=this.$managerWB.user.isUserHaveRoles("operatorHard")?850:450},mounted:function(){},computed:{},methods:{verifyInputField:function(t,e){(null===e||""===e||e<=0)&&(this.$managerWB.loanRedistribution.filters.portfolioLimit.isLimited=!1,null===e||""===e?yC["a"].create({message:this.$t("managerWBNotify.loanRedistributionFilters.fillPortfolioLimitField"),color:"negative",position:"bottom-left",icon:"warning"}):yC["a"].create({message:this.$t("managerWBNotify.loanRedistributionFilters.wrongContentPortfolioLimitField"),color:"negative",position:"bottom-left",icon:"warning"}))},verifyCheckbox:function(t,e){!0===t&&(null===e||""===e||e<=0)&&(this.$managerWB.loanRedistribution.filters.portfolioLimit.isLimited=!1)}}},CC=xC,$C=Object(c["a"])(CC,vC,_C,!1,null,"2794563d",null),BC=$C.exports;d()($C,"components",{QInput:Ns["a"],QCheckbox:ar["a"]});var qC=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"groupLimit__block filter__block q-mx-xs full-width"},[a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.titles.groupLimit")))])]),a("div",{staticClass:"flex justify-around items-center q-ma-xs"},[a("q-input",{staticClass:"q-mx-xs max-w-100px",attrs:{dense:"",outlined:"",color:"WB-secondary",type:"number","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary text-WB-secondary"},on:{input:function(e){return t.verifyCheckbox(t.$managerWB.loanRedistribution.filters.groupLimit.isLimited,t.$managerWB.loanRedistribution.filters.groupLimit.limit)}},model:{value:t.$managerWB.loanRedistribution.filters.groupLimit.limit,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.groupLimit,"limit",t._n(e))},expression:"$managerWB.loanRedistribution.filters.groupLimit.limit"}}),a("q-checkbox",{staticClass:"q-mx-xs",attrs:{"keep-color":"",color:t.$managerWB.loanRedistribution.filters.groupLimit.isLimited?"positive":""},on:{input:function(e){return t.verifyInputField(t.$managerWB.loanRedistribution.filters.groupLimit.isLimited,t.$managerWB.loanRedistribution.filters.groupLimit.limit)}},model:{value:t.$managerWB.loanRedistribution.filters.groupLimit.isLimited,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.groupLimit,"isLimited",e)},expression:"$managerWB.loanRedistribution.filters.groupLimit.isLimited"}})],1)])},wC=[],WC={name:"GroupLimit",data:function(){return{}},created:function(){},computed:{},methods:{verifyInputField:function(t,e){(null===e||""===e||e<=0)&&(this.$managerWB.loanRedistribution.filters.groupLimit.isLimited=!1,null===e||""===e?yC["a"].create({message:this.$t("managerWBNotify.loanRedistributionFilters.fillGroupLimitField"),color:"negative",position:"bottom-left",icon:"warning"}):yC["a"].create({message:this.$t("managerWBNotify.loanRedistributionFilters.wrongContentGroupLimitField"),color:"negative",position:"bottom-left",icon:"warning"}))},verifyCheckbox:function(t,e){!0===t&&(null===e||""===e||e<=0)&&(this.$managerWB.loanRedistribution.filters.groupLimit.isLimited=!1)}}},kC=WC,DC=Object(c["a"])(kC,qC,wC,!1,null,"0ede6311",null),OC=DC.exports;d()(DC,"components",{QInput:Ns["a"],QCheckbox:ar["a"]});var jC=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payments__block filter__block q-mx-xs full-width"},[a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.titles.payments")))])]),a("div",{staticClass:"flex justify-around items-center"},[a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:t.$t("loanRedistribution.filters.labels.yes"),color:"positive","keep-color":""},on:{input:function(e){return t.uncheckPayments(!0)}},model:{value:t.$managerWB.loanRedistribution.filters.payments.isPaid.yes,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.payments.isPaid,"yes",e)},expression:"$managerWB.loanRedistribution.filters.payments.isPaid.yes"}}),a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:t.$t("loanRedistribution.filters.labels.no"),color:"negative","keep-color":""},on:{input:function(e){return t.uncheckPayments(!1)}},model:{value:t.$managerWB.loanRedistribution.filters.payments.isPaid.no,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.payments.isPaid,"no",e)},expression:"$managerWB.loanRedistribution.filters.payments.isPaid.no"}}),a("div",{staticClass:"q-ma-xs"},[a("div",{staticClass:"text-center"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.labels.oldestDate")))])]),a("div",{staticClass:"flex justify-center items-center q-my-xs q-mx-sm"},[a("q-input",{staticClass:"q-px-xs",attrs:{mask:"##.##.####",color:"WB-secondary","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary",dense:"",dark:"",outlined:"",readonly:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}})]},proxy:!0}]),model:{value:t.rusDate,callback:function(e){t.rusDate=e},expression:"rusDate"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{color:"WB-modal-bg-color",dark:!1},on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.$managerWB.loanRedistribution.filters.payments.oldestDate,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.payments,"oldestDate",e)},expression:"$managerWB.loanRedistribution.filters.payments.oldestDate"}})],1)],1)],1)])],1)])},SC=[],PC={name:"PaymentsBlock",data:function(){return{}},created:function(){},computed:{rusDate:{get:function(){return Object(U["b"])(this.$managerWB.loanRedistribution.filters.payments.oldestDate)},set:function(t){this.$managerWB.loanRedistribution.filters.payments.oldestDate=Object(U["b"])(t,"DD.MM.YYYY","YYYY/MM/DD")}}},methods:{uncheckPayments:function(t){t?this.$managerWB.loanRedistribution.filters.payments.isPaid.no=!1:this.$managerWB.loanRedistribution.filters.payments.isPaid.yes=!1}}},MC=PC,AC=Object(c["a"])(MC,jC,SC,!1,null,"8faabd52",null),TC=AC.exports;d()(AC,"components",{QCheckbox:ar["a"],QInput:Ns["a"],QPopupProxy:qr["a"],QDate:wr["a"],QIcon:ja["a"]});var QC=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contactsWithClient__block filter__block q-mx-xs full-width"},[a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.titles.contactsWithClient")))])]),a("div",{staticClass:"flex justify-around items-center"},[a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:t.$t("loanRedistribution.filters.labels.yes"),color:"positive","keep-color":""},on:{input:function(e){return t.uncheckContactWithClient(!0)}},model:{value:t.$managerWB.loanRedistribution.filters.contactsWithClient.isContacted.yes,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.contactsWithClient.isContacted,"yes",e)},expression:"$managerWB.loanRedistribution.filters.contactsWithClient.isContacted.yes"}}),a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:t.$t("loanRedistribution.filters.labels.no"),color:"negative","keep-color":""},on:{input:function(e){return t.uncheckContactWithClient(!1)}},model:{value:t.$managerWB.loanRedistribution.filters.contactsWithClient.isContacted.no,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.contactsWithClient.isContacted,"no",e)},expression:"$managerWB.loanRedistribution.filters.contactsWithClient.isContacted.no"}}),a("div",{staticClass:"q-ma-xs"},[a("div",{staticClass:"text-center"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.labels.oldestDate")))])]),a("div",{staticClass:"flex justify-center items-center q-my-xs q-mx-sm"},[a("q-input",{staticClass:"q-px-xs",attrs:{mask:"##.##.####",color:"WB-secondary","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary",dense:"",dark:"",outlined:"",readonly:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}})]},proxy:!0}]),model:{value:t.rusDate,callback:function(e){t.rusDate=e},expression:"rusDate"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{color:"WB-modal-bg-color",dark:!1},on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.$managerWB.loanRedistribution.filters.contactsWithClient.oldestDate,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.contactsWithClient,"oldestDate",e)},expression:"$managerWB.loanRedistribution.filters.contactsWithClient.oldestDate"}})],1)],1)],1)])],1)])},FC=[],IC={name:"ContactWithClientBlock",data:function(){return{}},created:function(){},computed:{rusDate:{get:function(){return Object(U["b"])(this.$managerWB.loanRedistribution.filters.contactsWithClient.oldestDate)},set:function(t){this.$managerWB.loanRedistribution.filters.contactsWithClient.oldestDate=Object(U["b"])(t,"DD.MM.YYYY","YYYY/MM/DD")}}},methods:{uncheckContactWithClient:function(t){t?this.$managerWB.loanRedistribution.filters.contactsWithClient.isContacted.no=!1:this.$managerWB.loanRedistribution.filters.contactsWithClient.isContacted.yes=!1}}},RC=IC,EC=Object(c["a"])(RC,QC,FC,!1,null,"6adacc5c",null),LC=EC.exports;d()(EC,"components",{QCheckbox:ar["a"],QInput:Ns["a"],QPopupProxy:qr["a"],QDate:wr["a"],QIcon:ja["a"]});var YC=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"promises__block filter__block q-mx-xs full-width"},[a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.titles.promises")))])]),a("div",{staticClass:"flex justify-around items-center"},[a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:t.$t("loanRedistribution.filters.labels.yes"),color:"positive","keep-color":""},on:{input:function(e){return t.uncheckPromises(!0)}},model:{value:t.$managerWB.loanRedistribution.filters.promises.isPromised.yes,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.promises.isPromised,"yes",e)},expression:"$managerWB.loanRedistribution.filters.promises.isPromised.yes"}}),a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:t.$t("loanRedistribution.filters.labels.no"),color:"negative","keep-color":""},on:{input:function(e){return t.uncheckPromises(!1)}},model:{value:t.$managerWB.loanRedistribution.filters.promises.isPromised.no,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.promises.isPromised,"no",e)},expression:"$managerWB.loanRedistribution.filters.promises.isPromised.no"}}),a("div",{staticClass:"q-ma-xs"},[a("div",{staticClass:"text-center"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.labels.oldestDate")))])]),a("div",{staticClass:"flex justify-center items-center q-my-xs q-mx-sm"},[a("q-input",{staticClass:"q-px-xs",attrs:{mask:"##.##.####",color:"WB-secondary","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary",dense:"",dark:"",outlined:"",readonly:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}})]},proxy:!0}]),model:{value:t.rusDate,callback:function(e){t.rusDate=e},expression:"rusDate"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{color:"WB-modal-bg-color",dark:!1},on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.$managerWB.loanRedistribution.filters.promises.oldestDate,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.promises,"oldestDate",e)},expression:"$managerWB.loanRedistribution.filters.promises.oldestDate"}})],1)],1)],1)])],1)])},HC=[],NC={name:"PromisesBlock",data:function(){return{}},created:function(){},computed:{rusDate:{get:function(){return Object(U["b"])(this.$managerWB.loanRedistribution.filters.promises.oldestDate)},set:function(t){this.$managerWB.loanRedistribution.filters.promises.oldestDate=Object(U["b"])(t,"DD.MM.YYYY","YYYY/MM/DD")}}},methods:{uncheckPromises:function(t){t?this.$managerWB.loanRedistribution.filters.promises.isPromised.no=!1:this.$managerWB.loanRedistribution.filters.promises.isPromised.yes=!1}}},zC=NC,VC=Object(c["a"])(zC,YC,HC,!1,null,"36743ce3",null),GC=VC.exports;d()(VC,"components",{QCheckbox:ar["a"],QInput:Ns["a"],QPopupProxy:qr["a"],QDate:wr["a"],QIcon:ja["a"]});var UC=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"delay__block filter__block full-width q-mx-xs"},[a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.titles.delay")))])]),a("div",{staticClass:"row justify-around items-center"},[a("q-input",{staticClass:"col-2 q-mx-xs max-w-75px",attrs:{type:"number","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary text-WB-secondary",dense:"",outlined:"",color:"WB-secondary"},on:{change:function(e){return t.validateRange(t.$managerWB.loanRedistribution.filters.delay)}},model:{value:t.$managerWB.loanRedistribution.filters.delay.min,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.delay,"min",t._n(e))},expression:"$managerWB.loanRedistribution.filters.delay.min"}}),a("q-range",{staticClass:"w-50 q-pa-none",attrs:{min:t.min,max:t.max,color:"positive"},model:{value:t.$managerWB.loanRedistribution.filters.delay,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters,"delay",e)},expression:"$managerWB.loanRedistribution.filters.delay"}}),a("q-input",{staticClass:"col-2 q-mx-xs max-w-75px",attrs:{type:"number","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary text-WB-secondary",dense:"",outlined:"",color:"WB-secondary"},on:{change:function(e){return t.validateRange(t.$managerWB.loanRedistribution.filters.delay)}},model:{value:t.$managerWB.loanRedistribution.filters.delay.max,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.delay,"max",t._n(e))},expression:"$managerWB.loanRedistribution.filters.delay.max"}})],1)])},ZC=[],KC={name:"DelayBlock",data:function(){return{min:this.$managerWB.user.isUserHaveRoles("operatorHard")?31:1,max:this.$managerWB.user.isUserHaveRoles("operatorHard")?999:60}},created:function(){this.$managerWB.loanRedistribution.filters.delay.min=this.min,this.$managerWB.loanRedistribution.filters.delay.max=this.max},mounted:function(){},computed:{},methods:{validateRange:function(t){(t.min<this.min||t.min>this.max||""===t.min)&&(this.$managerWB.loanRedistribution.filters.delay.min=this.min),(t.max<this.min||t.max>this.max||""===t.max)&&(this.$managerWB.loanRedistribution.filters.delay.max=this.max),t.max<t.min&&(this.$managerWB.loanRedistribution.filters.delay.min=this.min,this.$managerWB.loanRedistribution.filters.delay.max=this.max)}}},JC=KC,XC=Object(c["a"])(JC,UC,ZC,!1,null,"260b51be",null),t$=XC.exports;d()(XC,"components",{QInput:Ns["a"],QRange:dr["a"]});var e$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"debt__block filter__block full-width q-mx-xs"},[a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.titles.debt")))])]),a("div",{staticClass:"row justify-around items-center"},[a("q-input",{staticClass:"col-2 q-mx-xs max-w-75px",attrs:{type:"number","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary text-WB-secondary",dense:"",outlined:"",color:"WB-secondary"},on:{change:function(e){return t.validateRange(t.$managerWB.loanRedistribution.filters.debt)}},model:{value:t.$managerWB.loanRedistribution.filters.debt.min,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.debt,"min",t._n(e))},expression:"$managerWB.loanRedistribution.filters.debt.min"}}),a("q-range",{staticClass:"w-50 q-pa-none",attrs:{min:1,max:15e4,color:"positive"},model:{value:t.$managerWB.loanRedistribution.filters.debt,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters,"debt",e)},expression:"$managerWB.loanRedistribution.filters.debt"}}),a("q-input",{staticClass:"col-2 q-mx-xs max-w-100px",attrs:{type:"number","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary text-WB-secondary",dense:"",outlined:"",color:"WB-secondary"},on:{change:function(e){return t.validateRange(t.$managerWB.loanRedistribution.filters.debt)}},model:{value:t.$managerWB.loanRedistribution.filters.debt.max,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.debt,"max",t._n(e))},expression:"$managerWB.loanRedistribution.filters.debt.max"}})],1)])},a$=[],n$={name:"DebtBlock",data:function(){return{}},created:function(){},computed:{},methods:{validateRange:function(t){(t.min<1||t.min>15e4||""===t.min)&&(this.$managerWB.loanRedistribution.filters.debt.min=1),(t.max<1||t.max>15e4||""===t.max)&&(this.$managerWB.loanRedistribution.filters.debt.max=15e4),t.max<t.min&&(this.$managerWB.loanRedistribution.filters.debt.min=1,this.$managerWB.loanRedistribution.filters.debt.max=15e4)}}},s$=n$,i$=Object(c["a"])(s$,e$,a$,!1,null,"1fd995cd",null),r$=i$.exports;d()(i$,"components",{QInput:Ns["a"],QRange:dr["a"]});var o$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"donor-group__block filter__block q-mx-xs full-width"},[a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.titles.donorGroup")))])]),a("div",{staticClass:"flex justify-center items-center full-width"},[a("div",{staticClass:"q-px-md q-pb-md full-width"},[a("q-select",{staticClass:"max-h-40px min-w-200px full-width",attrs:{"transition-show":"fade","transition-hide":"fade",multiple:"","use-chips":"",options:t.$managerWB.user.groupsForSelect,standout:"bg-WB-secondary text-WB-secondary",clearable:"",dense:"",dark:"",outlined:"",color:"WB-secondary","popup-content-class":"bg-WB-dark text-white","options-dense":"",error:t.$managerWB.loanRedistribution.isDonorGroupsEmpty},on:{input:function(e){t.$managerWB.loanRedistribution.isDonorGroupsEmpty=!1}},model:{value:t.$managerWB.loanRedistribution.filters.donorGroupsArrayOfObjects,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters,"donorGroupsArrayOfObjects",e)},expression:"$managerWB.loanRedistribution.filters.donorGroupsArrayOfObjects"}})],1)])])},l$=[],c$={name:"DonorGroupBlock",data:function(){return{}},created:function(){},computed:{},methods:{}},u$=c$,d$=Object(c["a"])(u$,o$,l$,!1,null,null,null),m$=d$.exports;d()(d$,"components",{QSelect:Jn["a"]});var p$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recipient-group__block filter__block q-mx-xs full-width"},[a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.titles.recipientGroup")))])]),a("div",{staticClass:"flex justify-center items-center full-width"},[a("div",{staticClass:"q-px-md q-pb-md full-width"},[a("q-select",{staticClass:"max-h-40px min-w-200px full-width",attrs:{"transition-show":"fade","transition-hide":"fade",multiple:"","use-chips":"",options:t.$managerWB.user.groupsForSelect,standout:"bg-WB-secondary text-WB-secondary",clearable:"",dense:"",dark:"",outlined:"",color:"WB-secondary","popup-content-class":"bg-WB-dark text-white","options-dense":"",error:t.$managerWB.loanRedistribution.isRecipientGroupsEmpty},on:{input:function(e){t.$managerWB.loanRedistribution.isRecipientGroupsEmpty=!1}},model:{value:t.$managerWB.loanRedistribution.filters.recipientGroupsArrayOfObjects,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters,"recipientGroupsArrayOfObjects",e)},expression:"$managerWB.loanRedistribution.filters.recipientGroupsArrayOfObjects"}})],1)])])},f$=[],h$={name:"RecipientGroupBlock",data:function(){return{}},created:function(){},computed:{},methods:{}},b$=h$,g$=Object(c["a"])(b$,p$,f$,!1,null,null,null),v$=g$.exports;d()(g$,"components",{QSelect:Jn["a"]});var _$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gps__block filter__block q-mx-xs full-width"},[a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.titles.GPS")))])]),a("div",{staticClass:"flex justify-around items-center q-ma-xs"},[a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:t.$t("loanRedistribution.filters.labels.all"),color:"WB-primary","keep-color":""},on:{input:function(e){return t.uncheck3("all")}},model:{value:t.$managerWB.loanRedistribution.filters.trash.all,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.trash,"all",e)},expression:"$managerWB.loanRedistribution.filters.trash.all"}}),a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:t.$t("loanRedistribution.filters.labels.auto"),color:"WB-primary","keep-color":""},on:{input:function(e){return t.uncheck3("auto")}},model:{value:t.$managerWB.loanRedistribution.filters.trash.auto,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.trash,"auto",e)},expression:"$managerWB.loanRedistribution.filters.trash.auto"}}),a("q-checkbox",{staticClass:"q-mx-xs",attrs:{label:t.$t("loanRedistribution.filters.labels.forced"),color:"WB-primary","keep-color":""},on:{input:function(e){return t.uncheck3("forced")}},model:{value:t.$managerWB.loanRedistribution.filters.trash.forced,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters.trash,"forced",e)},expression:"$managerWB.loanRedistribution.filters.trash.forced"}})],1)])},y$=[],x$={name:"GPSBlock",data:function(){return{}},created:function(){},computed:{},methods:{uncheck3:function(t){switch(t){case"all":this.$managerWB.loanRedistribution.filters.trash.auto=!1,this.$managerWB.loanRedistribution.filters.trash.forced=!1;break;case"auto":this.$managerWB.loanRedistribution.filters.trash.all=!1,this.$managerWB.loanRedistribution.filters.trash.forced=!1;break;case"forced":this.$managerWB.loanRedistribution.filters.trash.all=!1,this.$managerWB.loanRedistribution.filters.trash.auto=!1;break}}}},C$=x$,$$=Object(c["a"])(C$,_$,y$,!1,null,"7aafd7b0",null),B$=$$.exports;d()($$,"components",{QCheckbox:ar["a"]});var q$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"selection-method__block filter__block q-mx-xs full-width"},[a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.titles.selectionMethod")))])]),a("div",{staticClass:"flex justify-center items-center full-width"},[a("q-select",{staticClass:"max-h-75px min-w-200px full-width q-px-md",attrs:{"transition-show":"fade","transition-hide":"fade",options:t.optionsForSelectionMethod,standout:"bg-WB-secondary text-WB-secondary",dense:"",dark:"",outlined:"",color:"WB-secondary","popup-content-class":"bg-WB-dark text-white","options-dense":""},model:{value:t.$managerWB.loanRedistribution.filters.selectionMethodObj,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters,"selectionMethodObj",e)},expression:"$managerWB.loanRedistribution.filters.selectionMethodObj"}})],1)])},w$=[],W$={name:"SelectionMethodBlock",data:function(){return{}},created:function(){},computed:{optionsForSelectionMethod:function(){var t=this;return["risingDebt","descendingDebt","risingDelay","descendingDelay","withoutSort"].map((function(e){return{label:t.$t("loanRedistribution.filters.selectionMethod."+e),value:e}}))}},methods:{}},k$=W$,D$=Object(c["a"])(k$,q$,w$,!1,null,null,null),O$=D$.exports;d()(D$,"components",{QSelect:Jn["a"]});var j$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"switch__button"},[a("q-btn",{attrs:{flat:"",round:"",color:"WB-secondary",icon:"switch_camera"},on:{click:t.$managerWB.loanRedistribution.switchBetweenDonorAndRecipient}})],1)},S$=[],P$={name:"SwitchButton",data:function(){return{}},created:function(){},computed:{},methods:{}},M$=P$,A$=Object(c["a"])(M$,j$,S$,!1,null,"aea34b4a",null),T$=A$.exports;d()(A$,"components",{QBtn:b["a"]});var Q$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"to-form__button"},[a("q-btn",{attrs:{color:"WB-secondary",loading:t.$managerWB.loanRedistribution.loading.toFormMethod||t.$managerWB.loanRedistribution.loading.redistributeMethod,"icon-right":"create"},on:{click:t.$managerWB.loanRedistribution.getPreview},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-skeleton",{staticClass:"full-width full-height"})]},proxy:!0}])},[t._v(t._s(t.$t("loanRedistribution.filters.labels.toForm")))])],1)},F$=[],I$={name:"ToFormButton",data:function(){return{}},created:function(){},computed:{},methods:{}},R$=I$,E$=Object(c["a"])(R$,Q$,F$,!1,null,"e3b05e72",null),L$=E$.exports;d()(E$,"components",{QBtn:b["a"],QSkeleton:sy["a"]});var Y$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"redistribute__button"},[a("q-btn",{attrs:{color:t.$managerWB.loanRedistribution.dataForTable.length?"WB-secondary":"",disable:!t.$managerWB.loanRedistribution.dataForTable.length,loading:t.$managerWB.loanRedistribution.loading.toFormMethod||t.$managerWB.loanRedistribution.loading.redistributeMethod,"icon-right":"check"},on:{click:t.$managerWB.loanRedistribution.sayApprove},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-skeleton",{staticClass:"full-width full-height"})]},proxy:!0}])},[t._v(t._s(t.$t("loanRedistribution.filters.labels.redistribute")))])],1)},H$=[],N$={name:"RedistributeButton",data:function(){return{}},created:function(){},computed:{},methods:{}},z$=N$,V$=Object(c["a"])(z$,Y$,H$,!1,null,"31c7e811",null),G$=V$.exports;d()(V$,"components",{QBtn:b["a"],QSkeleton:sy["a"]});var U$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"redistribution__table"},[a("q-table",{attrs:{data:t.$managerWB.loanRedistribution.dataForTable,columns:t.columns,pagination:t.pagination,loading:t.$managerWB.loanRedistribution.loading.toFormMethod,"loading-label":t.$t("loanRedistribution.table.fetchingData"),"no-data-label":t.$t("loanRedistribution.table.noData"),"rows-per-page-label":t.longLongString,"visible-columns":t.visibleColumns,separator:"cell","row-key":"name",color:"WB-secondary",bordered:"",dense:"",dark:""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(e){return[a("q-space"),a("q-select",{staticStyle:{"min-width":"150px"},attrs:{"transition-show":"fade","transition-hide":"fade",options:t.columns,"display-value":t.$q.lang.table.columns,color:"WB-secondary","popup-content-class":"bg-WB-dark text-white",multiple:"",outlined:"",dense:"",dark:"","options-dense":"","emit-value":"","map-options":"","option-value":"name"},on:{input:t.setNewColumnsToLocalStorage},model:{value:t.visibleColumns,callback:function(e){t.visibleColumns=e},expression:"visibleColumns"}})]}},{key:"body",fn:function(e){return[a("q-tr",t._l(e.cols,(function(n){return a("q-td",{key:n.name,staticClass:"q-pa-none",attrs:{props:e}},["state"===n.name?[t._v(t._s(t.$t("loanRedistribution.table.state."+n.value)))]:[t._v(t._s(n.value))]],2)})),1)]}},{key:"pagination",fn:function(e){return[a("div",{staticClass:"row flex-center"},[a("q-btn",{staticClass:"q-mr-sm",attrs:{round:"",dense:"",size:"sm",icon:"undo",color:"WB-legend-color-info",disable:e.isFirstPage},on:{click:e.prevPage}}),a("div",{staticClass:"q-mr-sm"},[a("span",[t._v(t._s(e.pagination.page)+" / "+t._s(e.pagesNumber))])]),a("q-btn",{attrs:{round:"",dense:"",size:"sm",icon:"redo",color:"WB-legend-color-info",disable:e.isLastPage},on:{click:e.nextPage}})],1)]}},{key:"loading",fn:function(){return[a("q-inner-loading",{attrs:{showing:"",dark:""}})]},proxy:!0}])})],1)},Z$=[],K$={name:"RedistributionTable",data:function(){return{visibleColumns:G["a"].getItem("redistributionTableVisibleColumns")||["client","contract","groupName","newGroupName","delay","debt"],pagination:{page:1,rowsPerPage:10},columns:[{name:"client",field:"client",label:"ФИО",align:"start",sortable:!0,required:!0,disable:!0},{name:"contract",field:"contract",label:"Договор",align:"center",sortable:!0},{name:"groupName",field:"groupName",label:"Группа-донор",align:"center",sortable:!0},{name:"newGroupName",field:"newGroupName",label:"Группа-реципиент",align:"center",sortable:!0},{name:"delay",field:"delay",label:"Просрочка",align:"center",sortable:!0},{name:"debt",field:"debt",format:function(t){return Object(U["l"])(t,!0)},label:"Задолженность",align:"right",sortable:!0}]}},created:function(){},computed:{longLongString:function(){return this.$t("loanRedistribution.table.quantityOfLoans")+this.quantityOfLoans+"    "+this.$t("loanRedistribution.table.totalSumOfDebts")+this.totalSumOfDebts+"    "+this.$t("loanRedistribution.table.loansPerPage")},quantityOfLoans:function(){return this.$managerWB.loanRedistribution.dataForTable.length},totalSumOfDebts:function(){for(var t=0,e=0;e<this.$managerWB.loanRedistribution.dataForTable.length;e++)t+=this.$managerWB.loanRedistribution.dataForTable[e].debt;return Number(t).toLocaleString("ru-RU",{style:"currency",currency:"RUB"})}},methods:{setNewColumnsToLocalStorage:function(){G["a"].set("redistributionTableVisibleColumns",this.visibleColumns)}}},J$=K$,X$=Object(c["a"])(J$,U$,Z$,!1,null,"1088460f",null),tB=X$.exports;d()(X$,"components",{QTable:Zr["a"],QSpace:Cn["a"],QSelect:Jn["a"],QTr:Er["a"],QTd:Kr["a"],QBtn:b["a"],QInnerLoading:Ys["a"]});var eB=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"to-form__button"},[a("q-btn",{attrs:{color:t.$managerWB.loanRedistribution.dataForTable&&t.$managerWB.loanRedistribution.dataForTable.length?"WB-secondary":"",disable:!(t.$managerWB.loanRedistribution.dataForTable&&t.$managerWB.loanRedistribution.dataForTable.length)||t.loading,loading:t.loading,"icon-right":"clear"},on:{click:function(e){t.$managerWB.loanRedistribution.dataForTable=[]}},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-skeleton",{staticClass:"full-width full-height"})]},proxy:!0}])},[t._v(t._s(t.$t("loanRedistribution.filters.labels.clear")))])],1)},aB=[],nB={name:"ClearButton",data:function(){return{}},created:function(){},computed:{loading:function(){return this.$managerWB.loanRedistribution.loading.toFormMethod||this.$managerWB.loanRedistribution.loading.redistributeMethod}},methods:{}},sB=nB,iB=Object(c["a"])(sB,eB,aB,!1,null,"0c3cd544",null),rB=iB.exports;d()(iB,"components",{QBtn:b["a"],QSkeleton:sy["a"]});var oB=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-type-block__block filter__block q-mx-xs full-width"},[a("div",{staticClass:"flex justify-center items-center text-center q-mt-xs"},[a("span",[t._v(t._s(t.$t("loanRedistribution.filters.titles.productType")))])]),a("div",{staticClass:"flex justify-center items-center full-width"},[a("div",{staticClass:"q-px-md q-pb-md full-width"},[a("q-select",{staticClass:"max-h-75px min-w-200px full-width",attrs:{"transition-show":"fade","transition-hide":"fade",options:t.optionsForProductType,standout:"bg-WB-secondary text-WB-secondary",dense:"",dark:"",outlined:"",color:"WB-secondary","popup-content-class":"bg-WB-dark text-white","options-dense":""},model:{value:t.$managerWB.loanRedistribution.filters.productTypeModel,callback:function(e){t.$set(t.$managerWB.loanRedistribution.filters,"productTypeModel",e)},expression:"$managerWB.loanRedistribution.filters.productTypeModel"}})],1)])])},lB=[],cB={name:"ProductTypeBlock",data:function(){return{}},created:function(){},computed:{optionsForProductType:function(){var t=this;return["all","pos","pdl"].map((function(e){return{label:t.$t("loanRedistribution.filters.productType."+e),value:e}}))}},methods:{}},uB=cB,dB=Object(c["a"])(uB,oB,lB,!1,null,null,null),mB=dB.exports;d()(dB,"components",{QSelect:Jn["a"]});var pB={name:"WBManagerLoanRedistribution",components:{ProductTypeBlock:mB,ClearButton:rB,AssignedBlock:dC,StatusBlock:gC,PortfolioLimit:BC,GroupLimit:OC,PaymentsBlock:TC,ContactWithClientBlock:LC,PromisesBlock:GC,DelayBlock:t$,DebtBlock:r$,DonorGroupBlock:m$,RecipientGroupBlock:v$,GPSBlock:B$,SelectionMethodBlock:O$,SwitchButton:T$,ToFormButton:L$,RedistributeButton:G$,RedistributionTable:tB},data:function(){return{}},created:function(){},computed:{},methods:{}},fB=pB,hB=Object(c["a"])(fB,sC,iC,!1,null,"1e1d0305",null),bB=hB.exports,gB=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coefficients"},[a("CoefficientsTable")],1)},vB=[],_B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coefficients__table"},[a("q-table",{attrs:{data:t.groups,columns:t.columns,pagination:t.pagination,loading:t.$managerWB.user.loading.groups,"loading-label":t.$t("loanRedistribution.table.fetchingData"),"no-data-label":t.$t("loanRedistribution.table.noData"),separator:"cell","row-key":"name",dense:"",dark:"",color:"WB-secondary"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(e){return[a("q-input",{staticClass:"search",attrs:{debounce:"0",type:"search",label:"Поиск по группе",color:"white",dense:"",dark:"",outlined:"",clearable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search",color:"white"}})]},proxy:!0}],null,!0),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]}},{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",nativeOn:{click:function(a){return t.updateOneGroup(e.row)}}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,staticClass:"q-pa-none",attrs:{props:e}},[a("span",[t._v(t._s(n.value))])])})),1)]}}])}),t.$managerWB.layout.dialogs.settings.changeCoefficient?a("ChangeCoefficientDialog",{attrs:{row:t.dataForDialog}}):t._e()],1)},yB=[],xB=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{staticClass:"change-coefficient-dialog",model:{value:t.$managerWB.layout.dialogs.settings.changeCoefficient,callback:function(e){t.$set(t.$managerWB.layout.dialogs.settings,"changeCoefficient",e)},expression:"$managerWB.layout.dialogs.settings.changeCoefficient"}},[a("q-card",{staticClass:"change-coefficient-dialog__card row justify-center items-center max-w-300px bg-WB-modal-bg-color text-WB-text-profile-color"},[a("q-card-section",{staticClass:"col-12 flex justify-center items-center font-size-normal q-mb-sm"},[a("span",[t._v("Изменение весового коэффициента для группы ")]),a("strong",{staticClass:"text-WB-secondary"},[t._v(t._s(t.row.name))])]),a("q-card-section",{staticClass:"col-12 row justify-center items-center"},[a("div",{staticClass:"col-11"},[a("q-slider",{attrs:{color:"WB-secondary",step:25,markers:"",label:"","label-always":""},model:{value:t.coefficient,callback:function(e){t.coefficient=e},expression:"coefficient"}})],1)]),a("q-card-actions",{staticClass:"col-12 flex justify-end items-center text-WB-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"WB-secondary",label:t.$t("schedule.labels.cancel"),flat:""}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:t.coefficient===t.row.rank,color:t.coefficient===t.row.rank?"":"WB-secondary",label:"Изменить весовой коэффициент"},on:{click:function(e){return t.changeCoefficient({id:t.row.id,rank:t.coefficient})}}})],1)],1)],1)},CB=[],$B={name:"ChangeCoefficientDialog",props:{row:{type:Object,required:!0}},data:function(){return{coefficient:null}},created:function(){this.coefficient=this.row.rank},mounted:function(){},computed:{},methods:{changeCoefficient:function(t){var e=this;return Gn()(zn.a.mark((function a(){return zn.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$managerWB.user.groups.find((function(e){return e.id===t.id})).rank=t.rank,yC["a"].create({message:"Весовой коэффициент группы ".concat(e.row.name," успешно изменён"),color:"positive",position:"bottom",icon:"check_circle_outline"});case 2:case"end":return a.stop()}}),a)})))()}}},BB=$B,qB=a("c1d0"),wB=Object(c["a"])(BB,xB,CB,!1,null,"2a331c1e",null),WB=wB.exports;d()(wB,"components",{QDialog:$t["a"],QCard:m["a"],QCardSection:p["a"],QSlider:qB["a"],QCardActions:h["a"],QBtn:b["a"]}),d()(wB,"directives",{ClosePopup:Bn["a"]});var kB={name:"CoefficientsTable",components:{ChangeCoefficientDialog:WB},data:function(){return{search:null,pagination:{sortBy:"name",descending:!1,page:1,rowsPerPage:25},columns:[{name:"name",field:"name",label:"Группа",align:"center",sortable:!0},{name:"rank",field:"rank",label:"Весовой коэффициент",align:"center",sortable:!0}],dataForDialog:null}},created:function(){},computed:{groups:function(){var t=this;return this.search?this.$managerWB.user.groups.filter((function(e){return e.name.toLowerCase().includes(t.search.toLowerCase())})):this.$managerWB.user.groups}},methods:{updateOneGroup:function(t){this.dataForDialog=t,this.$managerWB.layout.dialogs.settings.changeCoefficient=!0}}},DB=kB,OB=(a("2d11"),Object(c["a"])(DB,_B,yB,!1,null,"23536361",null)),jB=OB.exports;d()(OB,"components",{QTable:Zr["a"],QInput:Ns["a"],QIcon:ja["a"],QTr:Er["a"],QTd:Kr["a"]});var SB={name:"WBManagerCoefficients",components:{CoefficientsTable:jB},data:function(){return{}},created:function(){},computed:{},methods:{}},PB=SB,MB=Object(c["a"])(PB,gB,vB,!1,null,"14f10b50",null),AB=MB.exports,TB=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payments font-size-medium"},[a("PaymentsSearch",{staticClass:"q-mb-md",on:{loaded:t.fillPayments,loading:t.changeLoadingState}}),t.payments.length?a("PaymentsTable",{attrs:{data:t.payments,login:t.login,from:t.from,all:t.all,loading:t.loading}}):t._e()],1)},QB=[],FB=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-form",{staticClass:"payments-search q-pa-sm",on:{submit:function(e){return e.preventDefault(),t.findPayments(e)}}},[a("div",{staticClass:"flex justify-around items-center"},[a("div",{staticClass:"q-ma-xs"},[a("div",{staticClass:"text-center"},[a("span",[t._v("Клиент")])]),a("div",{staticClass:"flex justify-center items-center q-my-xs q-mx-sm"},[a("q-input",{staticClass:"search min-w-225px",attrs:{placeholder:"Введите логин клиента",color:"WB-secondary","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary text-WB-secondary",dense:"",outlined:"",clearable:"",dark:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"person"}})]},proxy:!0}]),model:{value:t.login,callback:function(e){t.login=e},expression:"login"}})],1)]),a("div",{staticClass:"q-ma-xs"},[a("div",{staticClass:"text-center"},[a("span",[t._v("Платежи от")])]),a("div",{staticClass:"flex justify-center items-center q-my-xs q-mx-sm"},[a("q-input",{staticClass:"q-px-xs",attrs:{value:t.valueForDate,disable:t.all,color:"WB-secondary","input-class":"text-center text-WB-bg-profile-color q-pa-none",standout:"bg-WB-secondary text-WB-secondary",dense:"",outlined:"",readonly:"",dark:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}})]},proxy:!0}])},[a("q-popup-proxy",{ref:"qDateProxyFrom",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{options:t.canChooseDatesFrom,color:"WB-modal-bg-color",dark:!1},on:{input:function(){return t.$refs.qDateProxyFrom.hide()}},model:{value:t.from,callback:function(e){t.from=e},expression:"from"}})],1)],1)],1)]),a("div",{staticClass:"q-ma-xs"},[a("div",{staticClass:"flex justify-center items-center q-my-xs q-mx-sm"},[a("q-toggle",{attrs:{label:"Все платежи клиента",color:"WB-secondary","checked-icon":"check","unchecked-icon":"clear",size:"lg",dark:""},model:{value:t.all,callback:function(e){t.all=e},expression:"all"}})],1)]),a("div",{staticClass:"q-ma-xs"},[a("q-btn",{attrs:{type:"submit",loading:t.loading,disable:!t.login,color:t.login?"WB-secondary":"",label:"Найти платежи","icon-right":"search"},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-skeleton",{staticClass:"full-width full-height"})]},proxy:!0}])})],1)])])},IB=[],RB=hs["b"].formatDate,EB=hs["b"].extractDate,LB=yu()().format("YYYY/MM/DD"),YB=yu()().add({years:-5}).format("YYYY/MM/DD"),HB={name:"PaymentsSearch",data:function(){return{login:"190679010",from:yu()().format("YYYY/MM/DD"),all:!0,loading:!1}},created:function(){},computed:{valueForDate:function(){return Object(U["b"])(this.from)}},methods:{canChooseDatesFrom:function(t){return t>=YB&&t<=LB},findPayments:function(){var t=this;return Gn()(zn.a.mark((function e(){return zn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.login&&!t.loading){e.next=2;break}return e.abrupt("return",!1);case 2:t.loading=!0,setTimeout(Gn()(zn.a.mark((function e(){var a;return zn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Un["a"].crm.getPayments({login:t.login,from:RB(EB(t.from,"YYYY/MM/DD"),"YYYY-MM-DD"),to:yu()().format("YYYY-MM-DD"),all:t.all});case 2:a=e.sent,t.loading=!1,a&&(0===a.data.payments.length&&yC["a"].create({message:"Для клиента с логином ".concat(t.login," не найдены платежи по заданным критериям"),color:"warning",textColor:"black",position:"bottom",icon:"warning"}),a.data.payments.length&&yC["a"].create({message:"Платежи для перезакрепления получены",color:"positive",position:"bottom",icon:"check_circle_outline"}),t.$emit("loaded",Object.assign({},a.data,{from:Object(U["b"])(t.from),all:t.all})));case 5:case"end":return e.stop()}}),e)}))),800);case 4:case"end":return e.stop()}}),e)})))()}},watch:{loading:function(t){this.$emit("loading",t)}}},NB=HB,zB=(a("5bfc"),a("9564")),VB=Object(c["a"])(NB,FB,IB,!1,null,"45ddf020",null),GB=VB.exports;d()(VB,"components",{QForm:$i["a"],QInput:Ns["a"],QIcon:ja["a"],QPopupProxy:qr["a"],QDate:wr["a"],QToggle:zB["a"],QBtn:b["a"],QSkeleton:sy["a"],QField:Bi["a"]});var UB=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payments__table"},[a("q-table",{attrs:{data:t.data,columns:t.columns,pagination:t.pagination,loading:t.loading,separator:"cell","row-key":"id",dense:"",dark:"",color:"WB-secondary"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(e){return[a("span",[t._v(t._s(t.all?"Все платежи клиента "+t.login:"Платежи клиента "+t.login+" за период с "+t.from+" по "+t.today))])]}},{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",nativeOn:{click:function(a){return t.openDialog(e.row.id)}}},t._l(e.cols,(function(n){return a("q-td",{key:n.name,staticClass:"q-pa-none",attrs:{props:e}},["datetime"===n.type?[n.value?a("span",[t._v(t._s(n.value.split(" ")[0])+"\n "),a("small",[t._v(t._s(n.value.split(" ")[1]))])]):t._e()]:[a("span",[t._v(t._s(n.value))])]],2)})),1)]}}])}),t.modal?a("ChangeGroupForPaymentDialog",{attrs:{show:t.modal,paymentId:t.paymentId},on:{close:function(e){t.modal=!1}}}):t._e()],1)},ZB=[],KB=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{staticClass:"change-payment-group",attrs:{value:t.show,persistent:t.loading},on:{hide:function(e){return t.$emit("close")}}},[a("q-card",{staticClass:"change-payment-group__card row justify-center items-center bg-WB-modal-bg-color text-WB-text-profile-color"},[a("q-card-section",{staticClass:"col-12 flex justify-center items-center font-size-normal q-pb-none"},[a("span",[t._v("Изменение группы для платежа ")]),a("strong",{staticClass:"text-WB-secondary"},[t._v(t._s(t.paymentId))])]),a("q-card-section",{staticClass:"col-12 row justify-center items-center"},[a("q-select",{staticClass:"min-w-200px full-width",attrs:{"transition-show":"fade","transition-hide":"fade",options:t.$managerWB.user.groupsForSelect,standout:"bg-WB-secondary text-WB-secondary",color:"WB-secondary","popup-content-class":"bg-WB-dark text-white",clearable:"",dense:"",outlined:"","options-dense":"",dark:""},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}})],1),a("q-card-section",{staticClass:"col-12 flex justify-end items-center text-WB-primary q-pt-none",attrs:{align:"right"}},[a("q-btn",{staticClass:"q-mr-md",attrs:{color:"WB-secondary",loading:t.loading,label:"Отмена",flat:""},on:{click:function(e){return t.$emit("close")}},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-skeleton",{staticClass:"full-width full-height"})]},proxy:!0}])}),a("q-btn",{attrs:{loading:t.loading,disable:null===t.group,color:null===t.group?"":"WB-secondary",label:"Перезакрепить платёж"},on:{click:t.changeGroupForPayment},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-skeleton",{staticClass:"full-width full-height"})]},proxy:!0}])})],1)],1)],1)},JB=[],XB={name:"changeGroupForPaymentDialog",props:{show:{type:Boolean,default:!1},paymentId:{type:Number,default:0}},data:function(){return{group:null,loading:!1}},created:function(){},mounted:function(){},computed:{},methods:{changeGroupForPayment:function(){var t=this;return Gn()(zn.a.mark((function e(){return zn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loading=!0,setTimeout((function(){t.loading=!1,yC["a"].create({message:"Платёж ".concat(t.paymentId," перезакреплён за группой ").concat(t.group.label),color:"positive",position:"bottom",icon:"check_circle_outline"}),t.$emit("close")}),2e3);case 2:case"end":return e.stop()}}),e)})))()}}},tq=XB,eq=Object(c["a"])(tq,KB,JB,!1,null,"7000df7e",null),aq=eq.exports;d()(eq,"components",{QDialog:$t["a"],QCard:m["a"],QCardSection:p["a"],QSelect:Jn["a"],QBtn:b["a"],QSkeleton:sy["a"]});var nq=hs["b"].extractDate,sq=hs["b"].formatDate,iq={name:"PaymentsTable",components:{ChangeGroupForPaymentDialog:aq},props:{data:{type:Array,default:function(){return[]}},login:{type:String,default:""},from:{type:String,default:""},all:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},data:function(){return{today:yu()().format("DD.MM.YYYY"),modal:!1,paymentId:null,pagination:{sortBy:"paidAt",descending:!0,page:1,rowsPerPage:25},columns:[{name:"id",field:"id",label:"ID платежа",align:"center",sortable:!0},{name:"contract",field:"contract",label:"Договор",align:"center",sortable:!0},{name:"productId",field:"productId",label:"ID продукта",align:"center",sortable:!0},{name:"dealId",field:"dealId",label:"ID сделки (POS)",align:"center",sortable:!0},{name:"agreementId",field:"agreementId",label:"ID ДС",align:"center",sortable:!0},{name:"paidAt",field:"paidAt",format:function(t){return sq(nq(t,"YYYY-MM-DDTHH:mm:ssZ"),"DD.MM.YYYY HH:mm:ss")},label:"Дата олаты",align:"center",type:"datetime",sortable:!0},{name:"amount",field:"amount",label:"Сумма",align:"center",sortable:!0},{name:"paymentSystem",field:"paymentSystem",label:"Система оплаты",align:"center",sortable:!0}]}},created:function(){},computed:{},methods:{openDialog:function(t){var e=this;this.paymentId=t,this.$nextTick((function(){e.modal=!0}))}}},rq=iq,oq=Object(c["a"])(rq,UB,ZB,!1,null,"2e522b8e",null),lq=oq.exports;d()(oq,"components",{QTable:Zr["a"],QTr:Er["a"],QTd:Kr["a"]});var cq={name:"WBManagerPayments",components:{PaymentsTable:lq,PaymentsSearch:GB},data:function(){return{payments:[],login:"",from:"",all:!1,loading:""}},created:function(){},computed:{},methods:{fillPayments:function(t){this.payments=t.payments,this.login=t.login,this.from=t.from,this.all=t.all},changeLoadingState:function(t){this.loading=t}}},uq=cq,dq=Object(c["a"])(uq,TB,QB,!1,null,"671d59fe",null),mq=dq.exports,pq={name:"WBManagerProject",components:{WBManagerPayments:mq,WBManagerCoefficients:AB,WBManagerLoanRedistribution:bB,WBManagerMailing:nC,WBManagerSettingsPage:Wy,Schedule:Cy,HardRatings:cg,WBManagerLeftMenu:Ib,WBManagerProjectLogin:yb,WBManagerToolbar:fb},created:function(){var t=this,e=G["a"].getItem("manager-user-token")||null,a=null,n=!0;e&&(a=ki()(e),n=a.exp<Math.round(Date.now()/1e3)),!e||n?this.$managerWB.layout.changeRoute("/login"):this.$managerWB.layout.changeRoute("/"),!this.$managerWB.layout.cancelWBManagerStartNotify&&this.$q.platform.is.desktop&&Object(U["m"])({message:this.$t("wb.notify.resolution",{width:this.$q.screen.width,height:this.$q.screen.height}),color:this.$app.layout.activeColor,textColor:this.$app.layout.activeTextColor,icon:"desktop_mac",timeout:5e3},{label:this.$t("notify.dontShowAgain"),color:this.$app.layout.activeTextColor,handler:function(){G["a"].set("cancelWBManagerStartNotify",!0),t.$managerWB.layout.cancelWBManagerStartNotify=!0}})},computed:{thumbStyle:function(){return{backgroundColor:"$WB-primary-color",width:"8px",opacity:.5}}},methods:{}},fq=pq,hq=Object(c["a"])(fq,ob,lb,!1,null,"6efb774f",null),bq=hq.exports;d()(hq,"components",{QLayout:Vh["a"],QPageContainer:nb["a"],QHeader:sb["a"],QScrollArea:Fe["a"],QPage:Ci["a"]});var gq={name:"Webbankir",components:{DesktopOnlyDialog:Sn,WBManagerProject:bq,WBOperatorProject:rb,ProjectDialog:wn,ProjectCard:w},data:function(){return{wbOperatorDialog:!1,wbManagerDialog:!1}},computed:{obj:function(){return{title:this.$t("layout.drawer.wb"),employees:[{type:this.$t("wb.text.team.frontend"),number:2},{type:this.$t("wb.text.team.backend"),number:3},{type:this.$t("wb.text.team.design"),number:1},{type:this.$t("wb.text.team.manager"),number:1}],technologies:"SPA, Vue.js, WebSocket, JWT, REST API, Agile, Kanban",description:this.$t("wb.text.description"),time:this.$t("wb.text.time")}}}},vq=gq,_q=Object(c["a"])(vq,Qn,Fn,!1,null,"028cd00c",null),yq=_q.exports;d()(_q,"components",{QBtn:b["a"]});var xq=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rozetki__block"},[a("ProjectCard",{attrs:{projectObj:t.obj},scopedSlots:t._u([{key:"actions",fn:function(){return[a("q-btn",{attrs:{type:"a",href:"https://rozetki-shop.ru/",target:"_blank",rel:"noopener",label:t.$t("rozetki.text.btns.rozetki"),color:t.$app.layout.activeColor,textColor:t.$app.layout.activeTextColor,size:t.$app.layout.btnsSizeForProjectCard,"icon-right":"emoji_objects"}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[0,5]}},[a("span",[t._v(t._s(t.$t("rozetki.text.tooltip")))])])],1)]},proxy:!0}])})],1)},Cq=[],$q={name:"Rozetki",components:{ProjectCard:w},data:function(){return{}},computed:{obj:function(){return{title:this.$t("layout.drawer.rozetki"),employees:[{type:this.$t("rozetki.text.team.frontend"),number:1},{type:this.$t("rozetki.text.team.backend"),number:1}],technologies:"SSR, SPA, Vue.js, Vuex",description:this.$t("rozetki.text.description"),time:this.$t("rozetki.text.time")}}}},Bq=$q,qq=Object(c["a"])(Bq,xq,Cq,!1,null,"05a80c70",null),wq=qq.exports;d()(qq,"components",{QBtn:b["a"],QTooltip:$n["a"]});var Wq=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-intersection",{style:"height: "+(t.$q.screen.height-50)+"px;",attrs:{transition:"fade"}},[t._t("default")],2)},kq=[],Dq={name:"FullHeightIntersection"},Oq=Dq,jq=a("ad56"),Sq=Object(c["a"])(Oq,Wq,kq,!1,null,null,null),Pq=Sq.exports;d()(Sq,"components",{QIntersection:jq["a"]});var Mq={name:"PageIndex",components:{FullHeightIntersection:Pq,Rozetki:wq,Webbankir:yq,Heroes:Tn,Start:v},data:function(){return{bounce:{top:!0,bottom:!0}}},methods:{goToSection:function(t){t?this.bounce.bottom=!1:this.bounce.top=!1,this.$app.layout.goToSection(t)}}},Aq=Mq,Tq=(a("1a5b"),a("de5e")),Qq=Object(c["a"])(Aq,n,s,!1,null,"96a683cc",null);e["default"]=Qq.exports;d()(Qq,"components",{QPage:Ci["a"],QPageSticky:Tq["a"],QBtn:b["a"],QIcon:ja["a"]})},"8b99":function(t,e,a){"use strict";var n=a("ac9e"),s=a.n(n);s.a},"8bd5":function(t,e,a){"use strict";var n=a("f1b2"),s=a.n(n);s.a},9128:function(t,e,a){},"923a":function(t,e,a){},"928e":function(t,e,a){},9312:function(t,e,a){},"944a":function(t,e,a){},"95ff":function(t,e,a){"use strict";var n=a("9128"),s=a.n(n);s.a},"96be":function(t,e,a){"use strict";var n=a("6544"),s=a.n(n);s.a},9868:function(t,e,a){},"9bc1":function(t,e,a){"use strict";var n=a("d049"),s=a.n(n);s.a},"9e27":function(t,e,a){"use strict";var n=a("f189"),s=a.n(n);s.a},a279:function(t,e,a){"use strict";var n=a("7f3a"),s=a.n(n);s.a},a36c:function(t,e,a){"use strict";var n=a("928e"),s=a.n(n);s.a},a700:function(t,e,a){"use strict";var n=a("33ce"),s=a.n(n);s.a},aa51:function(t,e,a){},ac9e:function(t,e,a){},acd2:function(t,e,a){"use strict";var n=a("69b6"),s=a.n(n);s.a},b60f:function(t,e,a){},b7c9:function(t,e,a){"use strict";var n=a("4850"),s=a.n(n);s.a},be1f:function(t,e,a){},be34:function(t,e,a){"use strict";var n=a("9868"),s=a.n(n);s.a},bf46:function(t,e,a){"use strict";var n=a("da61"),s=a.n(n);s.a},c0f2:function(t,e,a){},c246:function(t,e,a){},c406:function(t,e,a){"use strict";var n=a("d7ce"),s=a.n(n);s.a},c5ee:function(t,e,a){},c6c3:function(t,e,a){},c7aa0:function(t,e,a){"use strict";var n=a("c6c3"),s=a.n(n);s.a},cd66:function(t,e,a){"use strict";var n=a("944a"),s=a.n(n);s.a},cece:function(t,e,a){},cfb4:function(t,e,a){},d049:function(t,e,a){},d054:function(t,e,a){},d1aa:function(t,e,a){"use strict";var n=a("827d"),s=a.n(n);s.a},d3d1:function(t,e,a){},d75e:function(t,e,a){},d7ce:function(t,e,a){},d97f:function(t,e,a){"use strict";var n=a("d75e"),s=a.n(n);s.a},da61:function(t,e,a){},db17:function(t,e,a){},dc1d:function(t,e,a){},dc39:function(t,e,a){"use strict";var n=a("22a6"),s=a.n(n);s.a},e220:function(t,e,a){"use strict";var n=a("0f8d"),s=a.n(n);s.a},e292:function(t,e,a){"use strict";var n=a("156e"),s=a.n(n);s.a},e2ce:function(t,e,a){},e3fe:function(t,e,a){"use strict";var n=a("cece"),s=a.n(n);s.a},e422:function(t,e,a){},e76c:function(t,e,a){},eb64:function(t,e,a){"use strict";var n=a("30e5"),s=a.n(n);s.a},f11b:function(t,e,a){"use strict";var n=a("1f8d"),s=a.n(n);s.a},f189:function(t,e,a){},f1b2:function(t,e,a){},f228:function(t,e,a){},f640:function(t,e,a){},f7a9:function(t,e,a){},fa88:function(t,e,a){},fbb1:function(t,e,a){"use strict";var n=a("6236"),s=a.n(n);s.a},fe28:function(t,e,a){"use strict";var n=a("15d3"),s=a.n(n);s.a}}]);